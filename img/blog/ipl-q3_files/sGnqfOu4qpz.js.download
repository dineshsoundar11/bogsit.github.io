if (self.CavalryLogger) { CavalryLogger.start_js(["jOTSl"]); }

__d("AdsUseExistingPostModalOnRowSelectDataProviderPlugin",[],(function(a,b,c,d,e,f){"use strict";a={initialState:{selectedPost:null}};e.exports=a}),null);
__d("AdsUseExistingPostModalOnRowSelectDataProvider",["Laminar","AdsUseExistingPostModalOnRowSelectDataProviderPlugin"],(function(a,b,c,d,e,f){"use strict";e.exports=b("Laminar").__createProvider(b("AdsUseExistingPostModalOnRowSelectDataProviderPlugin"),"AdsUseExistingPostModalOnRowSelectDataProviderPlugin")}),null);
__d("AdsUseExistingPostModalOnRowSelectDataReducerPlugin",[],(function(a,b,c,d,e,f){"use strict";a={reduce:function(a,b){return{selectedPost:b.selectedPost}}};e.exports=a}),null);
__d("AdsUseExistingPostModalOnRowSelectDataAction",["Laminar","AdsUseExistingPostModalOnRowSelectDataReducerPlugin","AdsUseExistingPostModalOnRowSelectDataProvider"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsUseExistingPostModalOnRowSelectDataReducerPlugin"),b("AdsUseExistingPostModalOnRowSelectDataProvider"),{})]},function(){return[]},"ADS_CREATE_POST.ROW_SELECT_ACTION");e.exports=a}),null);
__d("AssetName.brands",["fbt","AppConstants.brands"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("AppConstants.brands").ASSET_TYPE;a={getName:function(a,b,c){__p&&__p();var d="";d+=b===1?"":"P";d+=c?"C":"";switch(a){case h.AD_ACCOUNT:return g._({"":"ad account","P":"ad accounts","C":"Ad Account","PC":"Ad Accounts"},[g._enum(d,{"":"ad account",P:"ad accounts",C:"Ad Account",PC:"Ad Accounts"})]);case h.PAGE:return g._({"":"Page","P":"Pages","C":"Page","PC":"Pages"},[g._enum(d,{"":"Page",P:"Pages",C:"Page",PC:"Pages"})]);case h.APP:return g._({"":"app","P":"apps","C":"App","PC":"Apps"},[g._enum(d,{"":"app",P:"apps",C:"App",PC:"Apps"})]);case h.PIXEL:return g._({"":"pixel","P":"pixels","C":"Pixel","PC":"Pixels"},[g._enum(d,{"":"pixel",P:"pixels",C:"Pixel",PC:"Pixels"})]);case h.USER:return g._({"":"person","P":"people","C":"Person","PC":"People"},[g._enum(d,{"":"person",P:"people",C:"Person",PC:"People"})]);case h.INSTAGRAM_ACCOUNT:b={"":g._("Instagram account"),P:g._("Instagram accounts"),C:g._("Instagram Account"),PC:g._("Instagram Accounts")};return b[d];case h.SYSTEM_USER:return g._({"":"system user","P":"system users","C":"System User","PC":"System Users"},[g._enum(d,{"":"system user",P:"system users",C:"System User",PC:"System Users"})]);case h.PRODUCT_CATALOG:return g._({"":"catalog","P":"catalogs","C":"Catalog","PC":"Catalogs"},[g._enum(d,{"":"catalog",P:"catalogs",C:"Catalog",PC:"Catalogs"})]);case h.FUNDING_SOURCE:return g._({"":"payment method","P":"payment methods","C":"Payment method","PC":"Payment Methods"},[g._enum(d,{"":"payment method",P:"payment methods",C:"Payment method",PC:"Payment Methods"})]);case h.PROJECT:return g._({"":"project","P":"projects","C":"Project","PC":"Projects"},[g._enum(d,{"":"project",P:"projects",C:"Project",PC:"Projects"})]);case h.LEGACY_LOGIN:return g._({"":"shared login","P":"shared logins","C":"Shared Login","PC":"Shared Logins"},[g._enum(d,{"":"shared login",P:"shared logins",C:"Shared Login",PC:"Shared Logins"})]);case h.PAYOUT_ACCOUNT:return g._({"":"payout account","P":"payout accounts","C":"Payout Account","PC":"Payout Accounts"},[g._enum(d,{"":"payout account",P:"payout accounts",C:"Payout Account",PC:"Payout Accounts"})]);case h.CUSTOM_AUDIENCE:return g._({"":"shared audience","P":"shared audiences","C":"Shared Audience","PC":"Shared Audiences"},[g._enum(d,{"":"shared audience",P:"shared audiences",C:"Shared Audience",PC:"Shared Audiences"})]);case h.EVENT_SOURCE_GROUP:return g._({"":"event source group","P":"event source groups","C":"Event Source Group","PC":"Event Source Groups"},[g._enum(d,{"":"event source group",P:"event source groups",C:"Event Source Group",PC:"Event Source Groups"})]);case h.OFFLINE_CONVERSION_DATA_SET:return g._({"":"offline event set","P":"offline event sets","C":"Offline Event Set","PC":"Offline Event Sets"},[g._enum(d,{"":"offline event set",P:"offline event sets",C:"Offline Event Set",PC:"Offline Event Sets"})]);case h.BUSINESS_UNIT:return g._({"":"line of business","P":"line of business","C":"Line of Business","PC":"Line of Businesses"},[g._enum(d,{"":"line of business",P:"line of business",C:"Line of Business",PC:"Line of Businesses"})]);case h.MONETIZATION_PROPERTY:return g._({"":"property","P":"property","C":"Property","PC":"Properties"},[g._enum(d,{"":"property",P:"property",C:"Property",PC:"Properties"})]);case h.CUSTOM_CONVERSION:return g._({"":"custom conversion","P":"custom conversion","C":"Custom Conversion","PC":"Custom Conversions"},[g._enum(d,{"":"custom conversion",P:"custom conversion",C:"Custom Conversion",PC:"Custom Conversions"})]);case h.OWNED_DOMAIN:return g._({"":"domain","P":"domains","C":"Domain","PC":"Domains"},[g._enum(d,{"":"domain",P:"domains",C:"Domain",PC:"Domains"})]);case h.NEWS_PAGE:return g._({"":"news Page","P":"news Pages","C":"News Page","PC":"News Pages"},[g._enum(d,{"":"news Page",P:"news Pages",C:"News Page",PC:"News Pages"})]);default:return g._({"":"asset","P":"assets","C":"Asset","PC":"Assets"},[g._enum(d,{"":"asset",P:"assets",C:"Asset",PC:"Assets"})])}}};e.exports=a}),null);
__d("AdsAssetSelector.react",["ix","cx","fbt","invariant","xuiglyph","AdsAssetSectionType","AdsFBIconDownsized.react","AdsFilterWidgets.react","AdsLoadState_LEGACY","AssetName.brands","BusinessAssetGrouping.brands","BusinessObjectConstantNames","CenteredContainer.react","CurrentUser","FDSSpinner.react","Image.react","Keys","React","ScrollableArea.react","ShimButton.react","asset","getObjectValues"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();a=b("BusinessObjectConstantNames").ASSET_TYPE;c=b("React").PropTypes;var l=i._("No items found");d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){return d.props.bookmarkedAssets.length===0?null:d.$8(i._("Bookmarked"),d.props.bookmarkedAssets,null,b("AdsAssetSectionType").BOOKMARKED,!1)},d.$5=function(){return d.props.assetSections.length>0||d.props.searchedAssets&&d.props.searchedAssets.length>0||d.props.searchQuery&&d.props.searchState!==b("AdsLoadState_LEGACY").LOADED?null:b("React").createElement(b("CenteredContainer.react"),{className:"_1nmf",horizontal:!0,vertical:!0},d.props.labelNoItemsFound||l)},d.$2=function(){return d.$8(d.props.unownedAssetsHeader,d.props.unownedAssets,null,b("AdsAssetSectionType").UNOWNED,!1)},d.$3=function(){return d.props.assetSections.map(function(a){return d.$8(a.name,a.assets,a.businessID,b("AdsAssetSectionType").OWNED,a.businessID===d.props.shownBusinessID)})},d.$8=function(a,c,e,f,g){if(c.length===0)return null;return d.props.hideBusinessAssets&&(!d.props.showPersonalAssetsInRoot||e!==b("BusinessAssetGrouping.brands").NULL_BIZ_ID)?d.$9(a,e,c.length):b("React").createElement("div",{key:a+e},d.$10(a,c.length),b("React").createElement("div",null,c.map(function(a){return d.$11(a,e,f)})))},d.$9=function(a,b,c){d.props.renderSectionOption||j(0,6199);return d.props.renderSectionOption(a,b,c)},d.$10=function(a,c){if(a===b("BusinessAssetGrouping.brands").DEFAULT_NON_BIZ_NAME&&!d.props.showNonBizGroupTitle)return null;var e=null,f=a,h=d.props.assetSections.length-1;d.props.hideBusinessAssets&&h&&!d.props.searchQuery?f=i._({"S":"{asset count} {asset name}, {business count} BUSINESS","P":"{asset count} {asset name}, {business count} BUSINESSES"},[i._param("asset count",c),i._param("asset name",b("AssetName.brands").getName(d.props.assetType,c,!0)),i._param("business count",h),i._enum(h===1?"S":"P",{S:"BUSINESS",P:"BUSINESSES"})]):d.props.shownBusinessID&&!d.props.searchQuery?f=i._("{asset count} {asset name}",[i._param("asset count",c),i._param("asset name",b("AssetName.brands").getName(d.props.assetType,c,!0))]):(a===b("BusinessAssetGrouping.brands").DEFAULT_NON_BIZ_NAME?e=b("React").createElement(b("Image.react"),{className:"_4vh-",src:g("89489")}):e=b("React").createElement(b("Image.react"),{className:"_4vh-",src:g("90055")}),c&&d.props.showSectionAssetCount&&(f=i._("{business name} ({asset count})",[i._param("business name",a),i._param("asset count",c)])));return b("React").createElement("div",{className:"_1nme"+(d.props.compactLayout?" _4vhy":"")},e,f)},d.$11=function(a,b,c){return d.props.renderAsset(a,b,c)},d.$7=function(){return!d.props.searchBarVisible?null:b("React").createElement(b("AdsFilterWidgets.react"),{className:"_4qlo"+(d.props.compactLayout?"":" _1nmd")+(d.props.compactLayout?" _1t28":""),hasSelector:!1,placeholder:d.props.searchBarPlaceholder,value:d.props.searchQuery,onKeyDown:d.$12,onTextChange:d.props.onSearch})},d.$12=function(a){a.keyCode===b("Keys").TAB&&!a.shiftKey&&a.preventDefault()},d.$4=function(){__p&&__p();if(!b("CurrentUser").isEmployee()||!d.props.searchQuery)return null;var a=null;switch(d.props.searchState){case b("AdsLoadState_LEGACY").NOT_LOADED:a=null;break;case b("AdsLoadState_LEGACY").LOADING:a=b("React").createElement(b("CenteredContainer.react"),{className:"_1nmf",vertical:!0},b("React").createElement(b("FDSSpinner.react"),null));break;case b("AdsLoadState_LEGACY").LOADED:case b("AdsLoadState_LEGACY").ERROR:d.props.searchedAssets&&d.props.searchedAssets.length>0?a=d.props.searchedAssets.map(function(a){return d.$11(a,null,b("AdsAssetSectionType").SEARCH)}):a=b("React").createElement(b("CenteredContainer.react"),{className:"_1nmf",vertical:!0},d.props.labelNoItemsFound||l);break}if(a){var c=0;d.props.searchedAssets&&(c=d.props.searchedAssets.length);return b("React").createElement("div",null,d.$10(i._("Search By ID (employees only)"),c),a)}else return null},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=b("React").createElement("div",null,this.$1(),this.$2(),this.$3(),this.$4(),this.$5());return b("React").createElement("div",{className:this.props.showBottomBorder?"_4vhx":""},this.$6(),this.$7(),this.props.listTitle,this.props.useScrollableArea?b("React").createElement(b("ScrollableArea.react"),{height:this.props.maxListHeight},a):b("React").createElement("div",{className:"_3x14",style:{maxHeight:this.props.maxListHeight||"auto"}},a))};d.$6=function(){if(!this.props.showBackButton)return null;var a=this.props.assetSections.find(function(a){return a.businessID===this.props.shownBusinessID},this);if(!a)return;return b("React").createElement("div",{className:"_2gxl"},b("React").createElement(b("ShimButton.react"),{className:"_2gxm",onClick:this.props.onBack},b("React").createElement(b("AdsFBIconDownsized.react"),{className:"_2gxn",src:g("404534")})),a.name)};return c}(b("React").Component);d.propTypes={assetSections:c.arrayOf(c.shape({name:c.string.isRequired,businessID:c.string.isRequired,assets:c.array.isRequired})).isRequired,assetType:c.oneOf(b("getObjectValues")(a)).isRequired,bookmarkedAssets:c.array.isRequired,compactLayout:c.bool,hideBusinessAssets:c.bool,labelNoItemsFound:c.node,listTitle:c.node,maxListHeight:c.number,renderAsset:c.func.isRequired,renderSectionOption:c.func,searchedAssets:c.array,searchBarVisible:c.bool.isRequired,searchState:c.string.isRequired,searchQuery:c.string,shownBusinessID:c.string,showBackButton:c.bool,showBottomBorder:c.bool,showNonBizGroupTitle:c.bool,showPersonalAssetsInRoot:c.bool,showSectionAssetCount:c.bool,unownedAssets:c.array.isRequired,unownedAssetsHeader:c.node.isRequired,useScrollableArea:c.bool,onSearch:c.func.isRequired,onBack:c.func};d.defaultProps={compactLayout:!1,hideBusinessAssets:!1,searchBarVisible:!0,showBackButton:!1,showNonBizGroupTitle:!0,showSectionAssetCount:!1,showBottomBorder:!0,useScrollableArea:!1};e.exports=d}),null);
__d("AdsPageAssetSelectorFlowTypes",["ix","asset"],(function(a,b,c,d,e,f,g){"use strict";a=Object.freeze({LARGE:32,SMALL:16});b={INSTAGRAM_LARGE:g("687373"),INSTAGRAM_SMALL:g("547773"),PAGE_LARGE:g("490492"),PAGE_SMALL:g("490486")};e.exports={AdsAssetSelectorItemIconSize:a,DefaultIcon:b}}),null);
__d("AdsAssetSelectorItemIcon.react",["cx","AdsPageAssetSelectorFlowTypes","FlexLayout.react","Image.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("AdsPageAssetSelectorFlowTypes").AdsAssetSelectorItemIconSize;function a(a){var c=a.defaultIcon,d=a.iconURI;a=a.size;var e=a===h.LARGE;return d==null||d===""?b("React").createElement(b("FlexLayout.react"),{align:"center",className:"_768_"+(e?" _763f":"")+(e?"":" _763g"),justify:"center"},b("React").createElement(b("Image.react"),{src:c})):b("React").createElement(b("Image.react"),{className:"_768_",height:a,src:d,width:a})}e.exports=a}),null);
__d("BusinessPageSectionOption.react",["cx","React","ShimButton.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").Component;c=b("React").PropTypes;d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(){c.props.revealBusiness(c.props.businessID)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return b("React").createElement(b("ShimButton.react"),{className:"_5ghu _alf","data-testid":"page-selector-business-item",onClick:this.$1},b("React").createElement("span",{className:"_1b_h"},b("React").createElement("div",{className:"_5ghv"}),this.props.businessName),b("React").createElement("div",{className:"_3kin"},this.props.pageCount),b("React").createElement("div",{className:"_3kio"}))};return c}(a);d.propTypes={businessID:c.string.isRequired,businessName:c.string.isRequired,revealBusiness:c.func.isRequired,pageCount:c.number};e.exports=d}),null);
__d("PageSelectorItem.react",["cx","fbt","ix","AdsAssetSectionType","AdsWhatsAppStrings","FDSSimplePopover.react","Image.react","ImageBlock.react","Keys","React","Tooltip"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=b("React").Component;c=b("React").PropTypes;var j=function(a){var c=a.requireWhatsAppBusinessNumber?b("AdsWhatsAppStrings").getPageNotConnectedPopoverWhatsAppBusinessLabel():b("AdsWhatsAppStrings").getPageNotConnectedPopoverWhatsAppNumberLabel();return b("React").createElement(b("FDSSimplePopover.react"),{content:c,contentWidthUseSparingly:288},b("React").createElement("span",{className:"_4c70 _2yw2"}),b("AdsWhatsAppStrings").pageNotConnectedToWhatsAppSubtitle(a.requireWhatsAppBusinessNumber))};d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$4=function(a){(a.keyCode===b("Keys").RETURN||a.keyCode===b("Keys").BACKSPACE)&&d.$3()},d.$3=function(){d.props.onPageSelected(d.props.pageID,d.props.businessID,d.props.sectionType)},d.$1=function(a){a.preventDefault(),a.stopPropagation(),d.props.onPageRemoved(d.props.pageID,d.props.sectionType)},d.$2=function(a){a.preventDefault(),a.stopPropagation(),d.props.onPageBookmarked(d.props.pageID)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props.sectionType===b("AdsAssetSectionType").BOOKMARKED||this.props.sectionType===b("AdsAssetSectionType").UNOWNED,c=!this.props.isBookmarked&&this.props.sectionType===b("AdsAssetSectionType").OWNED&&this.props.showBookmark,d=null;a?d=b("React").createElement("div",babelHelpers["extends"]({className:"_1wcw"},b("Tooltip").propsFor(h._("Remove Page from this list")),{"data-tooltip-position":"right",onClick:this.$1,role:"button",tabIndex:"0"})):c?d=b("React").createElement("div",babelHelpers["extends"]({className:"_50a_"},b("Tooltip").propsFor(h._("Bookmark this Page")),{"data-tooltip-position":"right",onClick:this.$2,role:"button",tabIndex:"0"})):this.props.isSelected&&(d=b("React").createElement("div",{className:"_55fc"}));a=null;this.props.showPageID&&(a=b("React").createElement("div",{className:"_4c70"},this.props.pageID));c=null;this.props.showWhatsAppStatus&&this.props.requireWhatsAppBusinessNumber&&!this.props.hasWhatsAppBusinessNumber?c=b("React").createElement(j,{requireWhatsAppBusinessNumber:!0}):this.props.showWhatsAppStatus&&!this.props.requireWhatsAppBusinessNumber&&!this.props.hasWhatsAppNumber&&!this.props.hasWhatsAppBusinessNumber&&(c=b("React").createElement(j,{requireWhatsAppBusinessNumber:!1}));return b("React").createElement(b("ImageBlock.react"),{"aria-checked":this.props.isSelected,className:(this.props.compactLayout?"":"_2sl3")+(this.props.compactLayout?" _5dsl":"")+(this.props.hoverStyle==="dark-blue"?" _alf":"")+(this.props.hoverStyle==="light-gray"?" _2z3h":"")+(this.props.isSelected?" _2246":"")+(this.props.isRecentlyBookmarked?" _50b0":""),role:"menuitem",onClick:this.$3,onKeyDown:this.$4},b("React").createElement(b("Image.react"),{className:"_4-rj",height:30,src:this.props.imageSrc!=null&&this.props.imageSrc!==""?this.props.imageSrc:i("22120"),width:30}),b("React").createElement("div",{className:"_1wcv","data-testid":"page-selector-overlay-item"},b("React").createElement("div",babelHelpers["extends"]({className:"_2sl4"+(this.props.showPageID?"":" _4c71")},b("Tooltip").propsFor(this.props.name),{"data-testid":"page-selector-overlay-item-content","data-tooltip-display":"overflow"}),this.props.name),a,d,c))};return c}(a);d.propTypes={businessID:c.string,compactLayout:c.bool.isRequired,hasWhatsAppBusinessNumber:c.bool,hasWhatsAppNumber:c.bool,hoverStyle:c.oneOf(["dark-blue","light-gray"]),imageSrc:c.string,isBookmarked:c.bool.isRequired,isRecentlyBookmarked:c.bool.isRequired,isSelected:c.bool.isRequired,name:c.string.isRequired,pageID:c.string.isRequired,requireWhatsAppBusinessNumber:c.bool,sectionType:c.oneOf(Object.keys(b("AdsAssetSectionType"))).isRequired,showBookmark:c.bool.isRequired,showPageID:c.bool.isRequired,showWhatsAppStatus:c.bool,onPageBookmarked:c.func.isRequired,onPageRemoved:c.func.isRequired,onPageSelected:c.func.isRequired};d.defaultProps={hoverStyle:"dark-blue"};e.exports=d}),null);
__d("AdsPageAssetSelector.react",["cx","fbt","AdsAssetSectionType","AdsAssetSelector.react","AdsLoadState_LEGACY","AdsPageUtils","ApiPagePaths","BusinessAssetGrouping.brands","BusinessObjectConstantNames","BusinessPageSectionOption.react","PageSelectorItem.react","React","areEqual","getByPath","sumOfArray"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("BusinessObjectConstantNames").ASSET_TYPE;a=b("React").PropTypes;var j=[],k=h._("Pages You Don't Own (Employees Only)");c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={recentlyBookmarkedPageIDs:null},d.$6=function(a,c,e){c=c==null||c===""?d.$10(a):c;var f=d.props.selectedPageID===a.id&&d.props.selectedSectionType===e&&d.props.selectedBusinessID===c||d.props.selectedPageID===a.id&&(d.props.selectedBusinessID==null||d.props.selectedBusinessID==="")&&c===b("BusinessAssetGrouping.brands").NULL_BIZ_ID,g=d.props.bookmarkedPages.some(function(b){return b.id===a.id}),h=b("AdsPageUtils").getPageUIName(a),i=!!(e===b("AdsAssetSectionType").BOOKMARKED&&d.state&&d.state.recentlyBookmarkedPageIDs&&d.state.recentlyBookmarkedPageIDs.has(a.id));return b("React").createElement(b("PageSelectorItem.react"),{businessID:c,compactLayout:!!d.props.compactLayout,hasWhatsAppBusinessNumber:a.has_whatsapp_business_number,hasWhatsAppNumber:a.has_whatsapp_number,hoverStyle:d.props.listItemHoverStyle,imageSrc:b("AdsPageUtils").getPageIconURI(a),isBookmarked:g,isRecentlyBookmarked:i,isSelected:f,key:a.id+":"+c,name:h||"",pageID:a.id,requireWhatsAppBusinessNumber:!!d.props.requireWhatsAppBusinessNumber,sectionType:e,showBookmark:!!d.props.showBookmarks,showPageID:!!d.props.showPageIDs,showWhatsAppStatus:!!d.props.showWhatsAppStatus,onPageBookmarked:d.props.onPageBookmarked,onPageRemoved:d.props.onPageRemoved,onPageSelected:d.props.onPageSelected})},d.$7=function(a,c,e){return b("React").createElement(b("BusinessPageSectionOption.react"),{businessID:c,businessName:a,key:a+c,pageCount:e,revealBusiness:d.$12})},d.$12=function(a){d.props.onBusinessSelected&&d.props.onBusinessSelected(a)},d.$13=function(a){return d.props.sortPages===!0?(a.name||"").toLowerCase():null},d.$9=function(){d.props.onBusinessSelected&&d.props.onBusinessSelected(null)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){var c=new Set();if(!b("areEqual")(this.props.bookmarkedPages,a.bookmarkedPages)){var d=new Set(this.props.bookmarkedPages.map(function(a){return a.id}));a.bookmarkedPages.forEach(function(a){d.has(a.id)||c.add(a.id)});this.setState({recentlyBookmarkedPageIDs:c})}};d.render=function(){var a=this.$1(),c=this.props.shownBusinessID&&b("BusinessAssetGrouping.brands").businessIDHasAssets(this.props.shownBusinessID,a)?this.props.shownBusinessID:null;return b("React").createElement("div",{className:"_8g0"+(c?" showBusiness":"")},b("React").createElement("div",{className:"_8g2"},this.$2(c,a)),b("React").createElement("div",{className:"_8g2"},this.$3(this.props,c,a)))};d.$2=function(a,c){var d=null;this.props.filteredBusinessID!=null&&this.props.filteredBusinessID!==""?d=this.$4(c,this.props.filteredBusinessID):d=this.$5(c);c=null;var e=b("sumOfArray")(d.map(function(a){return a.assets.length}));this.props.showPageCount===!0&&(c=b("React").createElement("div",{className:"_2z3f"},h._({"PAGE":"{page count} PAGE","PAGES":"{page count} PAGES"},[h._param("page count",e),h._enum(e===1?"PAGE":"PAGES",{PAGE:"PAGE",PAGES:"PAGES"})])));return b("React").createElement(b("AdsAssetSelector.react"),{assetSections:d,assetType:i.PAGE,bookmarkedAssets:this.props.bookmarkedPages,compactLayout:this.props.compactLayout,hideBusinessAssets:this.props.showBusinessPages!==!0&&this.props.searchQuery==="",labelNoItemsFound:this.props.labelNoItemsFound,listTitle:c,maxListHeight:this.props.maxListHeight,renderAsset:this.$6,renderSectionOption:this.$7,searchBarPlaceholder:h._("Search Pages"),searchBarVisible:this.props.searchBarVisible,searchedAssets:this.props.searchedPages,searchQuery:this.props.searchQuery,searchState:this.props.searchState,showBottomBorder:this.props.showBottomBorder,shownBusinessID:a,showNonBizGroupTitle:this.props.showNonBizGroupTitle,showPersonalAssetsInRoot:this.props.showPersonalPagesInRoot,showSectionAssetCount:this.props.showSectionPageCount,unownedAssets:this.$8(),unownedAssetsHeader:k,onSearch:this.props.onSearch})};d.$3=function(a,c,d){d=this.$4(d,c);return b("React").createElement(b("AdsAssetSelector.react"),{assetSections:d,assetType:i.PAGE,bookmarkedAssets:a.bookmarkedPages,compactLayout:a.compactLayout,labelNoItemsFound:this.props.labelNoItemsFound,listTitle:null,maxListHeight:a.maxListHeight,renderAsset:this.$6,renderSectionOption:this.$7,searchBarPlaceholder:h._("Search Pages"),searchBarVisible:a.searchBarVisible,searchedAssets:a.searchedPages,searchQuery:a.searchQuery,searchState:a.searchState,showBackButton:!0,showBottomBorder:a.showBottomBorder,shownBusinessID:c,showNonBizGroupTitle:a.showNonBizGroupTitle,showSectionAssetCount:a.showSectionPageCount,unownedAssets:this.$8(),unownedAssetsHeader:k,onBack:this.$9,onSearch:a.onSearch})};d.$10=function(a){return a.business?a.business.id:b("BusinessAssetGrouping.brands").NULL_BIZ_ID};d.$11=function(a,c){var d=b("AdsPageUtils").getPageUIName(c),e=b("AdsPageUtils").getPageLink(c);c=b("getByPath")(c,b("ApiPagePaths").ID);return a==null||a===""||d!=null&&d!==""&&d.toLowerCase().includes(a.toLowerCase())||c!=null&&c!==""&&c.includes(a)||e!=null&&e!==""&&e.toLowerCase().includes(a.toLowerCase())};d.$1=function(){var a=this,c=this.props.pages.filter(function(b){return a.$11(a.props.searchQuery,b)}),d=this.props.currentUserID;c=b("BusinessAssetGrouping.brands").groupAssets(c,function(a){return(a.userpermissions&&a.userpermissions.data?a.userpermissions.data:[]).filter(function(a){return d==null||d===""||a.user&&a.user.id===d})},function(b){return a.props.groupByProject===!0?b.businessprojects?b.businessprojects.data:[]:[]},this.$13,null,b("BusinessAssetGrouping.brands").DEFAULT_NON_BIZ_NAME,!1,!0);return c};d.$5=function(a){var b=[];a.groupedAssets.forEach(function(a){a.assets.length>0&&b.push({name:a.name,assets:a.assets,businessID:a.bizID}),a.projects.forEach(function(c){c.assets.length>0&&b.push({name:c.name,assets:c.assets,businessID:a.bizID})})});return b};d.$4=function(a,b){return this.$5(a).filter(function(a){return a.businessID===b})};d.$8=function(){var a=this;return!this.props.unownedPages?j:this.props.unownedPages.filter(function(b){return a.$11(a.props.searchQuery,b)})};return c}(b("React").Component);c.propTypes={bookmarkedPages:a.array.isRequired,compactLayout:a.bool,currentUserID:a.string,filteredBusinessID:a.string,groupByProject:a.bool,labelNoItemsFound:a.string,listItemHoverStyle:a.oneOf(["dark-blue","light-gray"]),maxListHeight:a.number,pages:a.array.isRequired,requireWhatsAppBusinessNumber:a.bool,searchedPages:a.array,searchBarVisible:a.bool.isRequired,searchState:a.oneOf(Object.keys(b("AdsLoadState_LEGACY"))).isRequired,searchQuery:a.string,selectedPageID:a.string,selectedBusinessID:a.string,selectedSectionType:a.string,showBookmarks:a.bool,showBottomBorder:a.bool,showBusinessPages:a.bool,showNonBizGroupTitle:a.bool,showPageCount:a.bool,showPersonalPagesInRoot:a.bool,showSectionPageCount:a.bool,showPageIDs:a.bool,showWhatsAppStatus:a.bool,shownBusinessID:a.string,sortPages:a.bool,unownedPages:a.array,onBusinessSelected:a.func,onPageSelected:a.func.isRequired,onPageRemoved:a.func.isRequired,onPageBookmarked:a.func.isRequired,onSearch:a.func.isRequired};c.defaultProps={compactLayout:!1,groupByProject:!0,listItemHoverStyle:"dark-blue",requireWhatsAppBusinessNumber:!0,showBookmarks:!0,showBusinessPages:!0,showNonBizGroupTitle:!1,showPageCount:!0,showPersonalPagesInRoot:!0,showSectionPageCount:!0,showPageIDs:!1,showWhatsAppStatus:!1,sortPages:!0};e.exports=c}),null);
__d("AdsPageSelectorLoggerEvents",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({CLICK_HELP_CENTER_LINK:"page_selector_click_help_center_link",OPEN_DROPDOWN:"page_selector_open_dropdown",SELECT_PAGE:"page_selector_select_page"});e.exports=a}),null);
__d("AdsPageSearchableSelector.react",["ix","fbt","AdsAssetSelectorItemIcon.react","AdsInterfacesLogEvents","AdsInterfacesLogger","AdsPageAssetSelectorFlowTypes","AdsPageSelectorLoggerEvents","FDSButton.react","FDSLink.react","React","StaticSearchSource","SUIBusinessTheme","SUIGlyphIcon.react","SUISearchableSelector.react","asset"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("AdsInterfacesLogEvents").EventCategory,j=b("AdsPageAssetSelectorFlowTypes").AdsAssetSelectorItemIconSize,k=b("AdsPageAssetSelectorFlowTypes").DefaultIcon,l=366;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(a,c){return b("React").createElement("span",{"data-testid":"page-selector-overlay-item"},b("React").createElement(b("AdsAssetSelectorItemIcon.react"),{defaultIcon:k.PAGE_LARGE,iconURI:a.getAuxiliaryData().iconURI,size:j.LARGE}))};d.$2=function(a){var c=this.props.defaultLabel,d;a!=null&&(c=a.getTitle(),d=b("React").createElement(b("AdsAssetSelectorItemIcon.react"),{defaultIcon:k.PAGE_SMALL,iconURI:a.getAuxiliaryData().iconURI,size:j.SMALL}));return b("React").createElement(b("FDSButton.react"),{"aria-haspopup":!0,icon:d,iconAfter:b("React").createElement(b("SUIGlyphIcon.react"),{srcDefault:g("481887"),srcDisabled:g("514925")}),isDisabled:this.props.isDisabled,label:c,size:this.props.buttonSize})};d.$3=function(){return h._("Can't find a Page? {help center link}",[h._param("help center link",b("React").createElement(b("FDSLink.react"),{href:"/business/help/125897810822573",target:"_blank",onClick:this.$4},h._("Learn more"),"."))])};d.render=function(){return b("React").createElement(b("SUISearchableSelector.react"),{areCategoriesCollapsible:!0,button:this.$2(this.props.selectedPage),categoryHeader:this.props.businessHeader,dropdownWidth:l,footer:this.$3(),getLeftContentForEntry:this.$1,getRightContentForEntry:this.props.getRightContentForEntry,hasCategories:!0,height:"tall",initiallyExpandedCategories:[this.props.selectedBusinessID],maxWidth:this.props.buttonMaxWidth,scrollToSelectionOnFirstRender:!0,searchPlaceholder:h._("Search by Page name or ID"),searchSource:new(b("StaticSearchSource"))(this.props.pageEntries),shouldShowSubtitleInSelector:!1,theme:b("SUIBusinessTheme"),value:this.props.selectedPage,onChange:this.props.onPageSelected,onOpened:this.props.onButtonClick,onQueryChange:this.props.onSearchQueryChange})};d.$4=function(){b("AdsInterfacesLogger").log({eventName:b("AdsPageSelectorLoggerEvents").CLICK_HELP_CENTER_LINK,eventCategory:i.USER_ACTION})};return c}(b("React").Component);a.defaultProps={buttonMaxWidth:266};e.exports=a}),null);
__d("AdsPageSelectorAuxData",["immutable"],(function(a,b,c,d,e,f){"use strict";a=b("immutable").Record({iconURI:void 0,isPageAdmin:void 0,businessID:void 0,hasWhatsAppBusinessNumber:void 0,hasWhatsAppNumber:void 0,pageToken:void 0});c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a);e.exports=c}),null);
__d("AdsPageAssetSelectorV2.react",["cx","fbt","AdsAssetSectionType","AdsPageSearchableSelector.react","AdsPageSelectorAuxData","AdsPageUtils","AdsSimplePopover.react","AdsWhatsAppStrings","BusinessAssetGrouping.brands","FDSText.react","React","SearchableEntry"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$6=function(a){if(!d.$2(a.getAuxiliaryData().hasWhatsAppBusinessNumber,a.getAuxiliaryData().hasWhatsAppNumber))return null;a=d.props.requireWhatsAppBusinessNumber===!0?b("AdsWhatsAppStrings").getPageNotConnectedPopoverWhatsAppBusinessLabel():b("AdsWhatsAppStrings").getPageNotConnectedPopoverWhatsAppNumberLabel();return b("React").createElement("div",{className:"_76zz"},b("React").createElement(b("AdsSimplePopover.react"),{content:a,display:"inline",tipID:"unknown"}))},d.$7=function(a){d.props.onPageSelected(a.getUniqueID(),a.getType(),b("AdsAssetSectionType").OWNED)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$1=function(a){return!this.$2(a.has_whatsapp_business_number,a.has_whatsapp_number)?h._("ID: {page id}",[h._param("page id",a.id)]):b("AdsWhatsAppStrings").pageNotConnectedToWhatsAppSubtitle(this.props.requireWhatsAppBusinessNumber===!0)};d.$2=function(a,b){return this.props.showWhatsAppStatus&&!a&&(this.props.requireWhatsAppBusinessNumber===!0||!b)};d.$3=function(a){var c=this.props.currentUserID;return b("BusinessAssetGrouping.brands").groupAssets(a,function(a){return((a=(a=a.userpermissions)==null?void 0:a.data)!=null?a:[]).filter(function(a){return c==null||c===""||((a=a.user)==null?void 0:a.id)===c})},function(a){return[]},null,null,b("BusinessAssetGrouping.brands").DEFAULT_NON_BIZ_NAME,!1,!0).groupedAssets};d.$4=function(a){var b=this;a=this.$3(a);a=a.reduce(function(a,c){return a.concat(c.assets.reduce(function(a,d){a.push(b.$5(d,c.bizID));return a},[]))},[]);return a};d.render=function(){var a=this.props,c=a.pages,d=a.selectedBusinessID;a=a.selectedPage;a=a?this.$5(a,d):null;var e=this.$4(c);return b("React").createElement("div",{"data-testid":"page-selector-overlay"},b("React").createElement(b("AdsPageSearchableSelector.react"),{businessHeader:b("React").createElement(i,{groupedPages:this.$3(c)}),buttonMaxWidth:this.props.buttonMaxWidth,buttonSize:this.props.buttonSize,defaultLabel:this.props.defaultLabel,getRightContentForEntry:this.$6,isDisabled:this.props.isDisabled,pageEntries:e,requireWhatsAppBusinessNumber:this.props.requireWhatsAppBusinessNumber,selectedBusinessID:d,selectedPage:a,onButtonClick:this.props.onButtonClick,onPageSelected:this.$7,onSearchQueryChange:this.props.onSearchQueryChange}))};d.$5=function(a,c){return new(b("SearchableEntry"))({auxiliaryData:new(b("AdsPageSelectorAuxData"))({iconURI:b("AdsPageUtils").getPageIconURI(a),isPageAdmin:b("AdsPageUtils").isAdmin(a),businessID:c,hasWhatsAppBusinessNumber:a.has_whatsapp_business_number,hasWhatsAppNumber:a.has_whatsapp_number,pageToken:a.page_token}),subtitle:this.$1(a),title:b("AdsPageUtils").getPageUIName(a)||"",keywordString:a.id,uniqueID:a.id,type:c})};return c}(b("React").Component);function i(a){var c=a.children;if(c==null)return b("React").createElement("div",null);a=a.groupedPages.find(function(a){return a.bizID===c});return a==null?b("React").createElement("div",null):b("React").createElement("div",{"data-testid":"page-selector-business-item"},b("React").createElement(b("FDSText.react"),{display:"block",size:"body2",weight:"bold"},a.name),b("React").createElement(b("FDSText.react"),{color:"secondary",display:"block",size:"body3",weight:"normal"},h._({"*":"{number} Pages","_1":"1 Page"},[h._plural((a=a.assets)==null?void 0:a.length,"number")])))}e.exports=a}),null);
__d("AdsPageDropdownSelectorKeyboardNavigation",["csx","DOMQuery","Event","Focus","Keys","KeyStatus","VirtualCursorStatus","wrapIndex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("KeyStatus").isKeyDown,i=b("VirtualCursorStatus").isVirtualCursorTriggered;a=function(){__p&&__p();function a(a){__p&&__p();var c=this;this.$4=function(){h()||i()?c.$6(0):b("Focus").setWithoutOutline(c.$1.getRoot())};this.$5=function(a,d){switch(b("Event").getKeyCode(d)){case b("Keys").UP:d.preventDefault();d.stopPropagation();c.$6(c.$3-1);break;case b("Keys").DOWN:d.preventDefault();d.stopPropagation();c.$6(c.$3+1);break}};this.$1=a;this.$3=-1}var c=a.prototype;c.enable=function(){this.$2=[this.$1.subscribe("aftershow",this.$4),this.$1.subscribe("key",this.$5)]};c.disable=function(){this.$2&&(this.$2.forEach(function(a){return a.unsubscribe()}),this.$2=[])};c.$6=function(a){var c=b("DOMQuery").scry(this.$1.getRoot(),"._5dsl");if(!c.length)return;this.$3=b("wrapIndex")(a,c.length);b("Focus").set(c[this.$3])};return a}();e.exports=a}),null);
__d("AdsPageDropdownSelector.react",["cx","ix","AdsAssetSectionType","AdsInteractions","AdsInterfacesLogEvents","AdsInterfacesLogger","AdsLoadState_LEGACY","AdsPageAssetSelector.react","AdsPageAssetSelectorV2.react","AdsPageDropdownSelectorKeyboardNavigation","AdsPageSelectorLoggerEvents","AdsUseExistingPostModalOnRowSelectDataAction","ApiPagePaths","BizSiteIdentifier.brands","BusinessAssetGrouping.brands","ContextualLayer.react","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","FDSDropdownButton.react","Image.react","LayerHideOnBlur","LayerHideOnEscape","LayerRefocusOnHide","LayerTabIsolation","React","emptyFunction","getByPath","getObjectValues","gkx","joinClasses","killswitch","mapObject"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("AdsInterfacesLogEvents").EventCategory,j=300,k=12,l={AdsPageDropdownSelectorKeyboardNavigation:b("AdsPageDropdownSelectorKeyboardNavigation"),ContextualLayerAutoFlip:b("ContextualLayerAutoFlip"),ContextualLayerUpdateOnScroll:b("ContextualLayerUpdateOnScroll"),LayerHideOnBlur:b("LayerHideOnBlur"),LayerHideOnEscape:b("LayerHideOnEscape"),LayerRefocusOnHide:b("LayerRefocusOnHide"),LayerTabIsolation:b("LayerTabIsolation")};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=!1,d.$4=function(){return d.$2},d.$5=function(a){d.$2=a},d.$18=function(a){d.setState({shownBusinessID:a})},d.$10=function(a,b,c){d.setState({selectedActorID:a,selectedBusinessID:b,shownBusinessID:b},d.$19)},d.$11=function(a){d.setState({searchQuery:a})},d.$9=function(){b("AdsInteractions").singleFrameInteraction("ad_open_page_selector"),d.setState(function(a){return{showDialog:!a.showDialog}},d.props.onClick),b("AdsInterfacesLogger").log({eventName:b("AdsPageSelectorLoggerEvents").OPEN_DROPDOWN,eventCategory:i.USER_ACTION})},d.$6=function(a){window.setTimeout(function(){d.$1&&d.setState({showDialog:a})},0)},d.$19=function(){var a=d.state.selectedActorID;if(a==null)return;var c=d.state.searchQuery;b("AdsInterfacesLogger").log({data:{search_string:c===""?null:c},eventName:b("AdsPageSelectorLoggerEvents").SELECT_PAGE,eventCategory:i.USER_ACTION});d.setState({searchQuery:"",showDialog:!1});d.props.onChange(a);b("gkx")("677839")&&b("AdsUseExistingPostModalOnRowSelectDataAction").dispatch({selectedPost:null},{line:"502",module:"AdsPageDropdownSelector.react.js"})},d.state=babelHelpers["extends"]({showDialog:d.props.showDialogOnInit,searchQuery:""},d.$3(d.props)),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){this.setState(this.$3(a))};d.componentDidMount=function(){this.$1=!0};d.componentWillUnmount=function(){this.$1=!1};d.renderLayers=function(){return!this.state.showDialog?null:b("React").createElement(b("ContextualLayer.react"),{alignment:this.props.alignment,behaviors:l,contextRef:this.$4,position:"below",shown:!0,onToggle:this.$6},this.$7())};d.render=function(){var a=this.state,c=a.selectedActorID;a=a.selectedBusinessID;return b("gkx")("721415")?b("React").createElement("span",{"data-testid":"page-selector"},b("React").createElement(b("AdsPageAssetSelectorV2.react"),{buttonMaxWidth:this.props.maxwidth,buttonSize:this.props.size,currentUserID:this.props.currentUserID,defaultLabel:this.props.defaultLabel,isDisabled:this.props.disabled,pages:this.$8(),requireWhatsAppBusinessNumber:this.props.requireWhatsAppBusinessNumber,selectedBusinessID:a,selectedPage:c!=null?this.props.pages[c]:null,showWhatsAppStatus:this.props.showWhatsAppStatus,onButtonClick:this.$9,onPageSelected:this.$10,onSearchQueryChange:this.$11})):b("React").createElement("span",{"data-testid":"page-selector"},b("React").createElement("span",{className:this.props.className},b("React").createElement(b("FDSDropdownButton.react"),{icon:this.$12(),isDisabled:this.props.disabled,label:this.props.showPageName?this.$13():"",maxWidth:this.props.maxwidth,ref:this.$5,size:this.props.size,use:this.props.suppressed?"flat":"default",onClick:this.$9})),this.renderLayers())};d.$12=function(){return!!this.$14()&&!!this.props.showPageProfileImage?b("React").createElement(b("Image.react"),{height:this.props.popoverHeight,src:this.$15()||h("22120"),width:this.props.popoverWidth}):null};d.$3=function(a){var b=a.selectedBusinessID;a.selectedBusinessID==null&&a.selectedActorID!=null&&(b=this.$16(a.selectedActorID));var c=this.$17(b)?b:null;return{selectedBusinessID:b,shownBusinessID:c,selectedActorID:a.selectedActorID}};d.$7=function(){var a=this.$8();return b("React").createElement("div",{className:b("joinClasses")("_21wq _70b",this.props.selectorClassName),"data-testid":"page-selector-overlay"},b("React").createElement(b("AdsPageAssetSelector.react"),{bookmarkedPages:[],compactLayout:!0,currentUserID:this.props.currentUserID,groupByProject:this.props.groupByProject,labelNoItemsFound:this.props.labelNoItemsFound,listItemHoverStyle:"dark-blue",maxListHeight:j,onBusinessSelected:this.$18,onPageBookmarked:b("emptyFunction"),onPageRemoved:b("emptyFunction"),onPageSelected:this.$10,onSearch:this.$11,pages:a,requireWhatsAppBusinessNumber:this.props.requireWhatsAppBusinessNumber,searchBarVisible:a.length>=k,searchedPages:[],searchQuery:this.state.searchQuery,searchState:b("AdsLoadState_LEGACY").NOT_LOADED,selectedBusinessID:this.state.selectedBusinessID,selectedPageID:this.props.selectedActorID,selectedSectionType:b("AdsAssetSectionType").OWNED,showBookmarks:!1,showBottomBorder:!1,showBusinessPages:this.props.showBusinessPages,shownBusinessID:this.props.disableAnimation?null:this.state.shownBusinessID,showNonBizGroupTitle:this.props.showNonBizGroupTitle,showPageCount:!1,showPersonalPagesInRoot:this.props.showPersonalPagesInRoot||!1,showSectionPageCount:!0,showWhatsAppStatus:this.props.showWhatsAppStatus||!1,sortPages:!1,unownedPages:[]}))};d.$16=function(a){__p&&__p();if(a==null)return null;var c=null,d=b("BizSiteIdentifier.brands").getBusinessID();a=this.props.pages[a];if(a){if(b("getByPath")(a,["userpermissions","data"]))for(var e=a.userpermissions.data.length-1;e>=0;e--){c=b("getByPath")(a.userpermissions.data[e],["business","id"]);if(c&&d===c)break}!c&&!b("killswitch")("BUSINESS_USE_PAGE_ASSET_BUSINESS_INFO_TO_GROUP")&&b("getByPath")(a,["business"])&&(c=b("getByPath")(a,["business","id"]))}return c?c:b("BusinessAssetGrouping.brands").NULL_BIZ_ID};d.$17=function(a){__p&&__p();if(a===b("BusinessAssetGrouping.brands").NULL_BIZ_ID)return!0;var c=!1;b("mapObject")(this.props.pages,function(d,e){__p&&__p();if(d){if(b("getByPath")(d,["userpermissions","data"]))for(var e=d.userpermissions.data.length-1;e>=0;e--){var f=b("getByPath")(d.userpermissions.data[e],["business","id"]);if(f&&a===f){c=!0;return}}if(!b("killswitch")("BUSINESS_USE_PAGE_ASSET_BUSINESS_INFO_TO_GROUP")&&b("getByPath")(d,["business"])){f=b("getByPath")(d,["business","id"]);if(f&&a===f){c=!0;return}}}});return c};d.$14=function(){return this.state.selectedActorID==null?null:this.props.pages[this.state.selectedActorID]};d.$15=function(){var a=this.$14();if(!a)return null;if(a.picture&&typeof a.picture==="object")return b("getByPath")(a,b("ApiPagePaths").PICTURE.DATA.URL)||b("getByPath")(a,b("ApiPagePaths").PICTURE.path);else if(a.picture&&typeof a.picture==="string")return a.picture;return null};d.$13=function(){var a=this.$14();return a?a.name:this.props.defaultLabel};d.$8=function(){return b("getObjectValues")(this.props.pages).filter(Boolean)};return c}(b("React").Component);a.defaultProps={alignment:"right",currentUserID:null,disableAnimation:!1,disabled:!1,groupByProject:!1,maxwidth:260,popoverHeight:16,popoverWidth:16,requireWhatsAppBusinessNumber:!0,showBusinessPages:!0,showDialogOnInit:!1,showNonBizGroupTitle:!0,showPageName:!1,showPageProfileImage:!0,showWhatsAppStatus:!1,size:"large"};e.exports=a}),null);
__d("BOFSellerLogger",["BanzaiLogger","Event"],(function(a,b,c,d,e,f){"use strict";var g="BOFSellerLoggerConfig";a={log:function(a,c,d){d.event=a,d.seller_profile_id=c,b("BanzaiLogger").log(g,d)},initClickListener:function(a,c,d,e){var f=this;b("Event").listen(a,"click",function(){return f.log(c,d,e)})}};e.exports=a}),null);
__d("SUIToggleButtonGroupUniform.fds",["cssVar"],(function(a,b,c,d,e,f,g){"use strict";a={disabled:{backgroundColor:"#F5F6F7",borderColor:"#DADDE1",color:"#BEC3C9"},normal:{backgroundColor:"#F5F6F7",borderColor:"#DADDE1",color:"#444950"},selected:{backgroundColor:"#DADDE1",borderColor:"#DADDE1",color:"#444950"}};e.exports=a}),null);
__d("FDSToggleButtonGroup.react",["React","SUIButtonUniform.fds","SUIToggleButtonGroup.react","SUIToggleButtonGroupUniform.fds","makeFDSStandardComponent","makeSUIFDSPrivateTheme"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("makeSUIFDSPrivateTheme")("FDSToggleButtonGroup",{SUIButton:b("SUIButtonUniform.fds"),SUIToggleButtonGroup:b("SUIToggleButtonGroupUniform.fds")});a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props;return b("React").createElement(b("SUIToggleButtonGroup.react"),{children:a.children,"data-testid":a["data-testid"],disabled:a.isDisabled,margin:a.margin,onChange:a.onChange,theme:g,use:h(a.use),value:a.value})};return c}(b("React").Component);a.defaultProps={isDisabled:!1,use:"default"};function h(a){return a==="primary"?"confirm":a}e.exports=b("makeFDSStandardComponent")("FDSToggleButtonGroup",a)}),null);
__d("AutoPager.react",["DOM","Event","OnVisible","Parent","React","ReactDOM","SubscriptionsHandler","throttle"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.getViewportListener=function(){d.onEnterViewportListener||(d.onEnterViewportListener=new(b("OnVisible"))(b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d)),function(){return d.props.onVisible()},!1,d.props.onEnterBuffer,!1,d.scrollableArea));return d.onEnterViewportListener},d.onScroll=function(){d.getViewportListener().reset()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){if(this.props.scrollableAreaClass){this.scrollableArea=b("Parent").byClass(b("ReactDOM").findDOMNode(this),this.props.scrollableAreaClass);var a=b("DOM").find(this.scrollableArea,".uiScrollableAreaWrap")}else a=window;this.subscriptions=new(b("SubscriptionsHandler"))();this.subscriptions.addSubscriptions(b("Event").listen(a,"scroll",b("throttle")(this.onScroll,100)))};d.componentWillUnmount=function(){this.getViewportListener().remove(),this.subscriptions.release()};d.render=function(){return b("React").createElement("div",{className:this.props.className},this.props.children)};return c}(b("React").Component);e.exports=a}),null);
__d("FormatNumberUtil.atlas",["NumberFormatConfig","intlNumUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={_getDecimals:function(a,c,d){__p&&__p();if(!c&&!d){var e=a.toString();e=e.split(b("NumberFormatConfig").decimalSeparator);return e.length===2?e[1].length:0}if(a===0)return c;e=Math.floor(a*Math.pow(10,d));a=d;d=10;while(a>c&&e>1)if(e%d===0)d*=10,--a;else break;return a},formatWithVariablePrecision:function(a,c,d,e){return e?b("intlNumUtils").formatNumberWithThousandDelimiters(a,g._getDecimals(a,c,d)):b("intlNumUtils").formatNumber(a,g._getDecimals(a,c,d))}};e.exports=g}),null);
__d("AsyncUploadQueue",["AsyncUploadBase"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b){b=a.call(this,b)||this;b._pending=[];b._waiting=[];return b}var c=b.prototype;c.enqueue=function(a,b,c){return this._add(this._waiting.push.bind(this._waiting),a,b,c)};c.prepend=function(a,b,c){return this._add(this._waiting.unshift.bind(this._waiting),a,b,c)};c._add=function(a,b,c,d){d=babelHelpers["extends"]({},this._data,d);b=this._createFileUpload(b,c,d);a(b);this._processQueue();return b};c.dequeue=function(a){this._abort(a)};return b}(b("AsyncUploadBase"));e.exports=a}),null);
__d("Waiter",[],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this.$2=0,this.$3=!1,this.$1=a}var b=a.prototype;b.wait=function(a){__p&&__p();var b=this,c=!1;this.$4();return function(){if(c)return;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];a&&a.apply(this,e);b.$5();c=!0}};b.go=function(){this.$3=!0;this.$6();return this};b.$4=function(){this.$2++};b.$6=function(){!this.$2&&this.$3&&this.$1()};b.$5=function(){this.$2--,this.$6()};return a}();e.exports=a}),null);
__d("ComputerPanelActionState",["keyMirror"],(function(a,b,c,d,e,f){a=b("keyMirror")({NEUTRAL:null,DROP:null});e.exports=a}),null);
__d("DragDropFilePicker",["ArbiterMixin","DragDropTarget","FilePickerEvent","FileSelectionContainer","SelectionSource","createArrayFromMixed","mixin"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){__p&&__p();var e;e=a.call(this)||this;e.$DragDropFilePicker1=new(b("DragDropTarget"))(c);d.onDocumentDragEnterCallback&&e.$DragDropFilePicker1.setOnDocumentDragEnterCallback(d.onDocumentDragEnterCallback);d.onDocumentDragLeaveCallback&&e.$DragDropFilePicker1.setOnDocumentDragLeaveCallback(d.onDocumentDragLeaveCallback);d.onDragEnterCallback&&e.$DragDropFilePicker1.setOnDragEnterCallback(d.onDragEnterCallback);d.onDragLeaveCallback&&e.$DragDropFilePicker1.setOnDragLeaveCallback(d.onDragLeaveCallback);e.$DragDropFilePicker1.setOnFilesDropCallback(function(a){a=b("createArrayFromMixed")(a).filter(function(a){return!d.isFileValid||d.isFileValid(a)}).map(function(a){return new(b("FileSelectionContainer"))(a)});a.length>0?e.inform(b("FilePickerEvent").SELECTED,{sender:babelHelpers.assertThisInitialized(e),source:b("SelectionSource").FILE,selections:a}):d.onDocumentDragLeaveCallback.call(null)});e.$DragDropFilePicker1.enable();return e}var d=c.prototype;d.disable=function(){this.$DragDropFilePicker1.disable()};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("PUWUploaders",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({HTML5:"html5",FLASH:"flash"})}),null);
__d("OmnipickerHTML5FilePickerFactory",["fbt","HTML5FilePicker","PUWApplications","PUWMethods","PUWUploaders"],(function(a,b,c,d,e,f,g){a={create:function(a){return new(b("HTML5FilePicker"))(a,{accept:"image/*",fallbackFunction:function(){},multiple:!0,qn:"todo",waterfallApp:b("PUWApplications").WEB_OMNIPICKER,waterfallUploader:b("PUWUploaders").HTML5,waterfallMethod:b("PUWMethods").FILE_SELECTOR,title:g._("Choose files to upload")})}};e.exports=a}),null);
__d("OmnipickerDispatcher",["Dispatcher_DEPRECATED"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("Dispatcher_DEPRECATED"))()}),null);
__d("OmnipickerActions",["OmnipickerDispatcher","clamp","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({APP_INITIALIZED:null,FILE_PICKER_SELECT_STARTED:null,FILE_PICKER_SELECTED:null,FILE_PICKER_SELECT_CANCELED:null,EXISTING_PHOTOS_FETCHED:null,PANEL_INITIALIZED:null,PHOTO_SELECTED_OPTIMISTICALLY:null,PHOTO_SOURCE_SELECTED:null,RESIZE_FAILED:null,RESIZE_STARTED:null,RESIZE_SUCCEEDED:null,SELECTION_CHANGED:null,UPLOAD_CANCELED:null,UPLOAD_FAILED:null,UPLOAD_FINISHED:null,UPLOAD_PROGRESSED:null,UPLOAD_QUEUED:null,UPLOAD_STARTED:null});a={types:g,appInitialized:function(a,c,d,e){b("OmnipickerDispatcher").dispatch({type:g.APP_INITIALIZED,appID:a,logger:c,initialSource:d,singleSelection:e})},panelInitialized:function(a,c){b("OmnipickerDispatcher").dispatch({type:g.PANEL_INITIALIZED,appID:a,source:c})},photoSourceSelected:function(a,c){b("OmnipickerDispatcher").dispatch({type:g.PHOTO_SOURCE_SELECTED,appID:a,source:c})},filePickerSelectStarted:function(a,c,d){b("OmnipickerDispatcher").dispatch({type:g.FILE_PICKER_SELECT_STARTED,appID:a,method:c,ref:d})},filePickerSelected:function(a,c,d){b("OmnipickerDispatcher").dispatch({type:g.FILE_PICKER_SELECTED,appID:a,method:c,ref:d})},filePickerSelectCancelled:function(a,c,d){b("OmnipickerDispatcher").dispatch({type:g.FILE_PICKER_SELECT_CANCELED,appID:a,method:c,ref:d})},resizeFailed:function(a,c,d,e){b("OmnipickerDispatcher").dispatch({type:g.RESIZE_FAILED,appID:a,dt:c,bytes:d,errorCode:e})},resizeStarted:function(a){b("OmnipickerDispatcher").dispatch({type:g.RESIZE_STARTED,appID:a})},resizeSucceeded:function(a,c,d,e,f){b("OmnipickerDispatcher").dispatch({type:g.RESIZE_SUCCEEDED,appID:a,dt:c,bytes:d,originalSize:e,customTags:f})},uploadQueued:function(a,c,d){b("OmnipickerDispatcher").dispatch({type:g.UPLOAD_QUEUED,appID:a,source:c,ids:d.map(function(a){return a.getSelectionContainerID()}),volume:d.length})},selectionChanged:function(a,c,d,e){b("OmnipickerDispatcher").dispatch({type:g.SELECTION_CHANGED,appID:a,source:c,id:d,checked:e})},uploadStart:function(a,c,d,e){b("OmnipickerDispatcher").dispatch({type:g.UPLOAD_STARTED,appID:a,source:c,id:d,bytes:e})},uploadProgress:function(a,c,d,e){e=b("clamp")(e.bytesTransferred/e.file.size*100,0,100);b("OmnipickerDispatcher").dispatch({type:g.UPLOAD_PROGRESSED,appID:a,source:c,id:d,progress:e})},uploadDone:function(a,c,d,e,f,h){b("OmnipickerDispatcher").dispatch({type:g.UPLOAD_FINISHED,appID:a,source:c,id:d,src:e,fbid:f,retriesNeeded:h})},uploadFailed:function(a,c,d,e,f){b("OmnipickerDispatcher").dispatch({type:g.UPLOAD_FAILED,appID:a,source:c,id:d,retriesNeeded:e,errorCode:f})},existingPhotosFetched:function(a,c,d){b("OmnipickerDispatcher").dispatch({type:g.EXISTING_PHOTOS_FETCHED,appID:a,photos:d.map(function(a){return{source:c,id:a.id,src:a.image.uri}})})},optimisticSelect:function(a,c,d){b("OmnipickerDispatcher").dispatch({type:g.PHOTO_SELECTED_OPTIMISTICALLY,appID:a,source:c,id:d})},cancelUpload:function(a,c,d){b("OmnipickerDispatcher").dispatch({type:g.UPLOAD_CANCELED,appID:a,source:c,id:d})}};e.exports=a}),null);
__d("OmnipickerUploadController",["OmnipickerActions","SelectionSource"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.registerOmnipicker=function(a){this.$1[a]={}};c.registerAdapter=function(a,c,d){__p&&__p();this.$1[a][d]=c;d=b("SelectionSource").toPhotoSourceType(d);c.subscribe("maxReached",function(){});c.subscribe("resize_start",this.$2.bind(this,a));c.subscribe("resize_done",this.$3.bind(this,a));c.subscribe("resize_hires_start",function(){});c.subscribe("upload_start",this.$4.bind(this,a,d));c.subscribe("upload_progress",this.$5.bind(this,a,d));c.subscribe("upload_done",this.$6.bind(this,a,d));c.subscribe("upload_failed",this.$7.bind(this,a,d));c.subscribe("finished",function(){})};c.uploadSelections=function(a,c,d,e){__p&&__p();if(!d.every(function(a){return a.getSource()==c}))throw new Error("Selections' source must be "+c);var f=this.$1[a][c],g=b("SelectionSource").toPhotoSourceType(c);if(!f){d.forEach(function(c){var d=c.getExistingImageID();c=c.getSrc();b("OmnipickerActions").uploadDone(a,g,d,c,d,0)});return}d[0].hasPlaceholderUI()||b("OmnipickerActions").uploadQueued(a,g,d);f.uploadSelections(d,e)};c.cancelUpload=function(a,c,d){b("OmnipickerActions").cancelUpload(a,c,d)};c.$2=function(a,c,d){b("OmnipickerActions").resizeStarted(a)};c.$3=function(a,c,d){c=d.scubaData.scuba_ints;var e=c.timeResizing||c.dt,f=c.resizedSize;d.error?b("OmnipickerActions").resizeFailed(a,e,f,d.error.message):b("OmnipickerActions").resizeSucceeded(a,e,f,c.originalSize,{skipped_resizing:d.scubaData.scuba_tags.skippedResizing})};c.$4=function(a,c,d,e){b("OmnipickerActions").uploadStart(a,c,e.uploadID,e.size)};c.$5=function(a,c,d,e){b("OmnipickerActions").uploadProgress(a,c,e.uploadID,e)};c.$6=function(a,c,d,e){b("OmnipickerActions").uploadDone(a,c,e.uploadID,e.response.src,e.response.fbid,e.retriesNeeded)};c.$7=function(a,c,d,e){b("OmnipickerActions").uploadFailed(a,c,e.uploadID,e.retriesNeeded,e.response_error)};return a}();e.exports=new a()}),null);
__d("OmnipickerUploadSession",["FilePickerEvent","OmnipickerActions","OmnipickerUploadController","PhotoSourceTypes","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.registerOmnipicker=function(a){this.$1[a]={pickersData:[]}};c.addPicker=function(a,c,d,e){__p&&__p();var f=new(b("SubscriptionsHandler"))();f.addSubscriptions(c.subscribe(b("FilePickerEvent").SELECT_START,function(c,f){b("OmnipickerActions").filePickerSelectStarted(a,e,d)}),c.subscribe(b("FilePickerEvent").SELECTED,function(c,f){if(f.selections&&f.selections.length>0){b("OmnipickerActions").filePickerSelected(a,e,d);c=f.selections[0].getSource();b("OmnipickerUploadController").uploadSelections(a,c,f.selections)}}),c.subscribe(b("FilePickerEvent").SELECT_CANCELED,function(c,f){b("OmnipickerActions").filePickerSelectCancelled(a,e,d)}));this.$1[a].pickersData.push({picker:c,subscriptions:f})};c.removePicker=function(a,b){var c=this.$1[a].pickersData;c.forEach(function(a,d){a.picker===b&&(a.subscriptions.release(),c.splice(d,1))})};c.cancelUpload=function(a,c,d){if(c!==b("PhotoSourceTypes").COMPUTER)throw new Error("Can only cancel "+b("PhotoSourceTypes").COMPUTER+" uploads. Actual source: "+c);b("OmnipickerUploadController").cancelUpload(a,c,d)};return a}();e.exports=new a()}),null);
__d("HTML5FilePickerButton.react",["fbt","OmnipickerHTML5FilePickerFactory","OmnipickerUploadSession","PhotoSourceTypes","PUWMethods","React","ReactDOM","XUIButton.react"],(function(a,b,c,d,e,f,g){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){this.picker=b("OmnipickerHTML5FilePickerFactory").create(b("ReactDOM").findDOMNode(this.refs.fileButton)),b("OmnipickerUploadSession").addPicker(this.props.appID,this.picker,b("PhotoSourceTypes").COMPUTER,b("PUWMethods").FILE_SELECTOR)};d.componentWillUnmount=function(){b("OmnipickerUploadSession").removePicker(this.props.appID,this.picker)};d.render=function(){var a=g._("Select Files");return b("React").createElement(b("XUIButton.react"),{ref:"fileButton",href:"#",size:"xlarge",label:a})};return c}(b("React").Component);c.propTypes={appID:a.string.isRequired};e.exports=c}),null);
__d("DragDropInstructions.react",["cx","fbt","ComputerPanelActionState","HTML5FilePickerButton.react","React"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.renderInstructions=function(){switch(d.props.actionState){case b("ComputerPanelActionState").DROP:return b("React").createElement("div",null,b("React").createElement("div",{className:"_39ld"},b("React").createElement("div",{className:"_4zwj"})),b("React").createElement("div",{className:"_4zwc"},h._("Drop photos here")));case b("ComputerPanelActionState").NEUTRAL:return b("React").createElement("div",null,b("React").createElement("div",null,b("React").createElement("div",{className:"_39ld"},b("React").createElement("div",{className:"_4zwd"})),b("React").createElement("div",{className:"_4zwc"},h._("Drag photos here"))),b("React").createElement("div",{className:"_4zwi"},b("React").createElement("span",{className:"_4zwe"}),h._("or"),b("React").createElement("span",{className:"_4zwe"})),b("React").createElement("div",{className:"_4zwf"},b("React").createElement(b("HTML5FilePickerButton.react"),{appID:d.props.appID})))}},d.renderOverlay=function(){return b("React").createElement("div",{className:"_4zwg"},b("React").createElement("div",{className:"_4zwh"},d.renderInstructions()))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return this.props.isOverlay?this.renderOverlay():this.renderInstructions()};return c}(b("React").Component);c.propTypes={actionState:a.oneOf(Object.keys(b("ComputerPanelActionState"))).isRequired,appID:a.string.isRequired,isOverlay:a.bool};e.exports=c}),null);
__d("EmptyPanel.react",["cx","ComputerPanelActionState","DragDropInstructions.react","React"],(function(a,b,c,d,e,f,g){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a="_2gyt"+(this.props.actionState===b("ComputerPanelActionState").NEUTRAL?" _2gyu":"")+(this.props.actionState===b("ComputerPanelActionState").DROP?" _2gyw":"");return b("React").createElement("div",{className:a},b("React").createElement("div",{className:"_2gyv"},b("React").createElement(b("DragDropInstructions.react"),{actionState:this.props.actionState,appID:this.props.appID})))};return c}(b("React").Component);c.propTypes={actionState:a.oneOf(Object.keys(b("ComputerPanelActionState"))).isRequired,appID:a.string.isRequired};e.exports=c}),null);
__d("HTML5UploadAdapter",["ArbiterMixin","AsyncUploadQueue","JpegResizer","JpegResizerConfig","PhotosMimeType","PhotosUploadWaterfall","PhotosUploadWaterfallErrorCodes","PhotosUploadWaterfallMixin","QE2Logger","SphericalImage","SphericalPhotoConstants","SphericalPhotoTypedConfig","SphericalPhotoUploadHelper","performanceNow","promiseDone","URI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("SphericalPhotoConstants").QE_WWW_COMPOSER_UNIVERSE,h=b("SphericalPhotoUploadHelper").shouldRecompress360,i=b("SphericalPhotoUploadHelper").shouldResize360;function a(a){this._config=babelHelpers["extends"]({maxRetries:0,retryTimeout:250,uri:null,qn:null,postParams:{}},a),this._uploads={},this._numProcessing=0,this._activeUploadCount=0,this._uploadQueue=new(b("AsyncUploadQueue"))(this._config.uri),this._uploadQueue.setAllowCrossOrigin(!0),this._uploadQueue.setLimit(a.maxParallel),this._uploadQueue.subscribe("start",this._handleStart.bind(this)),this._uploadQueue.subscribe("failure",this._handleFailure.bind(this)),this._uploadQueue.subscribe("success",this._handleSuccess.bind(this)),this._uploadQueue.subscribe("progress",this._handleProgress.bind(this)),this._uploadQueue.subscribe("success_after_abort",this._handleCanceledPhotoUploadedAnyway.bind(this)),b("JpegResizer").isSupported()&&(this._jpegResizer=new(b("JpegResizer"))(a.maxParallel),Object.prototype.hasOwnProperty.call(a,"useHighQuality")&&this._jpegResizer.setHighQuality(a.useHighQuality),this._jpegResizer.setUndershoot(b("JpegResizerConfig").undershoot).setEncodeQuality(b("JpegResizerConfig").quality)),this._uploadQueue.setPreprocessHandler(this._resizeUpload.bind(this))}Object.assign(a,{isSupported:function(){return b("AsyncUploadQueue").isSupported()&&b("JpegResizer").isSupported()},MAX_WIDTH:2048,MAX_HEIGHT:2048});Object.assign(a.prototype,b("ArbiterMixin"),b("PhotosUploadWaterfallMixin"),{getUploaderApp:function(){return b("PhotosUploadWaterfall").APP_HTML5},getWaterfallID:function(){return this._config.qn},getWaterfallSource:function(){return this._config.ref},uploadFiles:function(a,c){var d=this,e=function(a,b){a.sphericalImage=b,d._enqueueUpload(a,babelHelpers["extends"]({},d._config.postParams,c))},f=function(a){var c=b("performanceNow")(),f=function(f){e(a,f),d.logWaterfallStep(b("PhotosUploadWaterfall").DONE_SPHERICAL_CHECK,{scuba_ints:{dt:b("performanceNow")()-c},projection_type:f.getProjectionType()})},g=function(f){e(a),d.logWaterfallStep(b("PhotosUploadWaterfall").FAIL_SPHERICAL_CHECK,{code:b("PhotosUploadWaterfallErrorCodes").SPHERICAL_CHECK_FAILED,scuba_ints:{dt:b("performanceNow")()-c}})};b("promiseDone")(b("SphericalImage").createFromBlob(a).then(f)["catch"](g))};a.forEach(f)},uploadSelections:function(a,b){a=a.map(function(a){var b=a.getFile();b.uploadID=a.getSelectionContainerID();return b});this.uploadFiles(a,b)},setHiRes:function(a){Object.prototype.hasOwnProperty.call(this._config,"useHighQuality")&&(this._jpegResizer&&this._jpegResizer.setHighQuality(a))},setNumSelected:function(a){},markDeleted:function(a){},addPostParam:function(a,b){this._config.postParams=this._config.postParams||{},this._config.postParams[a]=b},cancelIndividualUpload:function(a){a=this._getUpload(a);a&&(this._uploadQueue.dequeue(a),this._removeUpload(a))},cancelAllUploads:function(){for(var a in this._uploads){var b=this._getUpload(a);this._uploadQueue.dequeue(b);this._removeUpload(b)}},getActiveUploadCount:function(){return this._activeUploadCount},_getUpload:function(a){if(a&&this._uploads[a])return this._uploads[a];else return null},_removeUpload:function(a){if(!this._uploads[a.getFile().uploadID])return;delete this._uploads[a.getFile().uploadID];a.isWaiting()||this._activeUploadCount--},_handleStart:function(a,b){this._activeUploadCount++,this.inform("upload_start",{uploadID:b.getFile().uploadID,retry:!!b.getFile()._retryCount,file:b.getFile(),size:b.getFile().size})},_handleFailure:function(a,c){a=Math.pow(2,c.getFile()._retryCount);this._removeUpload(c);c.getFile()._retryCount++<this._config.maxRetries?(setTimeout(this._enqueueUpload.bind(this,c.getFile(),babelHelpers["extends"]({},this._config.postParams,{retry:c.getFile()._retryCount})),this._config.retryTimeout*a),this.logWaterfallStep(b("PhotosUploadWaterfall").RETRY_UPLOAD,{code:c.getResponse().getError()}),this.inform("upload_retry",{uploadID:c.getFile().uploadID,file:c.getFile(),response:c.getResponse(),retry:c.getFile()._retryCount})):this.inform("upload_failed",{uploadID:c.getFile().uploadID,file:c.getFile(),response:c.getResponse()});return!1},_handleSuccess:function(a,b){this._removeUpload(b);a=b.getResponse();a=a.payload;a.metadata&&(a=a.metadata);this.inform("upload_done",{uploadID:b.getFile().uploadID,response:a[0],hiRes:!0,retriesNeeded:b.getFile()._retryCount,lastModified:b.getFile().lastModified})},_handleProgress:function(a,b){this.inform("upload_progress",{file:b.getFile(),uploadID:b.getFile().uploadID,bytesTransferred:b.getProgressEvent().loaded})},_resizeUpload:function(a,c){__p&&__p();var d=this,e=a.getFile();if(!b("PhotosMimeType").isJpeg(e.type))return c(a);this.inform("resize_start",{uploadID:e.uploadID,file:e});var f=b("performanceNow")(),j=function(g,h,i,j,k){g&&d.logWaterfallStep(b("PhotosUploadWaterfall").CLIENT_ERROR,{code:b("PhotosUploadWaterfall").CERROR_RESIZING_FAILED,meta:{message:g.message}});i=g||i;d.inform("resize_done",{uploadID:e.uploadID,scubaData:{scuba_tags:{skippedResizing:+i},scuba_ints:{timeResizing:b("performanceNow")()-f,originalSize:e.size,resizedSize:h&&h.size}},error:g});i||(h.uploadID=e.uploadID,h.name=e.name,a.setFile(h),a.getAdditionalData().set("js_resized",!0).set("original_width",j).set("original_height",k));c(a)};if(e.sphericalImage&&e.sphericalImage.isSpherical()){var k=e.sphericalImage,l=k.getSize(),m=b("SphericalPhotoTypedConfig").upload_size_limit,n=k.getProjectionType(),o=i(n,l,m);b("QE2Logger").logExposureForUser(g);var p=!1;b("SphericalPhotoTypedConfig").should_recompress&&(p=h(n,k.getBufferLength(),b("SphericalPhotoTypedConfig").upload_bytes_limit));this._jpegResizer&&l&&(o||p)?!o?this._jpegResizer.resize360Blob(e,j,function(){},Math.max(l.x,l.y)-1):this._jpegResizer.resize360Blob(e,j,function(){},m):j(!1,e,!0)}else this._jpegResizer?this._jpegResizer.resizeBlob(e,j):j(!1,e,!0)},_handleCanceledPhotoUploadedAnyway:function(a,b){this.inform("canceled_photo_uploaded",b.payload[0].fbid)},_enqueueUpload:function(a,b){b=babelHelpers["extends"]({},b,{uploader:"html5"}),a._retryCount=a._retryCount||0,this._uploads[a.uploadID]=a._retryCount?this._uploadQueue.prepend(a.fileName,a,b):this._uploadQueue.enqueue(a.fileName,a,b)}});e.exports=a}),null);
__d("OmnipickerPanelMixin.react",["PhotoSourceTypes","React"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c={propTypes:{appID:a.string,photoData:a.object,sourceType:a.oneOf(Object.keys(b("PhotoSourceTypes"))),selectionSource:a.string.isRequired}};e.exports=c}),null);
__d("OmnipickerPhotoUploadState",["keyMirror"],(function(a,b,c,d,e,f){a=b("keyMirror")({NOT_STARTED:null,UPLOADING:null,DONE:null,FAILED:null});e.exports=a}),null);
__d("OmnipickerPhoto.react",["cx","fbt","Event","Image.react","OmnipickerActions","OmnipickerPhotoUploadState","OmnipickerUploadSession","PhotoSourceTypes","ProgressBar.react","React","ShimButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;var i=2e4;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={canCancel:!1},d.onDragStart=function(a){b("Event").kill(a)},d.onMouseDown=function(){},d.onMouseUp=function(){var a=!0;!d.props.checked&&d.props.onPhotoSelected&&(a=d.props.onPhotoSelected.call(null,d.props.id));a&&b("OmnipickerActions").selectionChanged(d.props.appID,d.props.photoSourceType,d.props.id,!d.props.checked)},d.getImage=function(){return!d.props.src?null:b("React").createElement(b("Image.react"),{src:d.props.src,className:"_2dh3"})},d.getSelection=function(){return!d.props.checked?null:b("React").createElement("div",{className:"_2dh3 _1cyy"})},d.getCancelOverlay=function(){return d.props.uploadState!==b("OmnipickerPhotoUploadState").UPLOADING||!d.state.canCancel?null:b("React").createElement("div",{className:"_5goe"},b("React").createElement(b("ShimButton.react"),{className:"_5gof _1cu0",onClick:d.onCancel},h._("Cancel Upload")))},d.getFailedOverlay=function(){return d.props.uploadState!==b("OmnipickerPhotoUploadState").FAILED?null:b("React").createElement("div",{className:"_5goe"},b("React").createElement("div",{className:"_5gof"},h._("Upload Failed")))},d.getProgressBar=function(){if(!d.props.showUploadProgress||d.props.uploadState!==b("OmnipickerPhotoUploadState").UPLOADING)return null;var a=null;d.props.progress<100?a=b("React").createElement(b("ProgressBar.react"),{value:d.props.progress,min:0,max:100}):a=b("React").createElement("div",{className:"_1t2c"});return b("React").createElement("div",{className:"_1cyx"},a)},d.onCancel=function(){b("OmnipickerUploadSession").cancelUpload(d.props.appID,d.props.photoSourceType,d.props.id)},d.setCancelTimeout=function(){d.cancelTimeout=setTimeout(function(){d.setState({canCancel:!0})},i)},d.clearCancelTimeout=function(){d.cancelTimeout&&(clearTimeout(d.cancelTimeout),d.cancelTimeout=null)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.props.supportsCancel&&this.props.uploadState===b("OmnipickerPhotoUploadState").UPLOADING&&this.setCancelTimeout()};d.UNSAFE_componentWillReceiveProps=function(a){if(this.props.supportsCancel){var c=this.props.uploadState!==a.uploadState||this.props.progress!==a.progress;c&&(this.clearCancelTimeout(),a.uploadState===b("OmnipickerPhotoUploadState").UPLOADING&&this.setCancelTimeout())}};d.componentWillUnmount=function(){this.clearCancelTimeout()};d.render=function(){return b("React").createElement("div",{className:"_47pv",onDragStart:this.onDragStart,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},this.getImage(),this.getSelection(),this.getCancelOverlay(),this.getFailedOverlay(),this.getProgressBar())};return c}(b("React").Component);c.propTypes={appID:a.string.isRequired,checked:a.bool,id:a.string.isRequired,onPhotoSelected:a.func,photoSourceType:a.oneOf(Object.keys(b("PhotoSourceTypes"))).isRequired,progress:a.number,showUploadProgress:a.bool,src:a.string,supportsCancel:a.bool,uploadState:a.oneOf([b("OmnipickerPhotoUploadState").NOT_STARTED,b("OmnipickerPhotoUploadState").UPLOADING,b("OmnipickerPhotoUploadState").DONE,b("OmnipickerPhotoUploadState").FAILED]).isRequired};c.defaultProps={checked:!1,progress:0,showUploadProgress:!0,supportsCancel:!1};e.exports=c}),null);
__d("OmnipickerPhotoGrid.react",["cx","AutoPager.react","OmnipickerPhoto.react","PhotoSourceTypes","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;var h=300;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.getPhotos=function(){return Object.keys(d.props.photos).map(function(a){a=d.props.photos[a];return b("React").createElement(b("OmnipickerPhoto.react"),{appID:d.props.appID,checked:a.checked,id:a.id,key:a.id,onPhotoSelected:d.props.onPhotoSelected,photoSourceType:d.props.photoSourceType,progress:a.progress,showUploadProgress:d.props.showUploadProgress,src:a.src,supportsCancel:d.props.supportsCancel,uploadState:a.uploadState})})},d.getAutoPager=function(){return!d.props.onScrollPositionThresholdReached?null:b("React").createElement(b("AutoPager.react"),{className:"_4qgs",onEnterBuffer:h,onVisible:d.props.onScrollPositionThresholdReached,scrollableAreaClass:"_xhf"})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:"_xhf"},b("React").createElement("div",{className:"uiScrollableAreaWrap _1-nf"},this.getPhotos(),this.getAutoPager()))};return c}(b("React").Component);c.propTypes={appID:a.string.isRequired,onPhotoSelected:a.func,onScrollPositionThresholdReached:a.func,photos:a.object.isRequired,photoSourceType:a.oneOf(Object.keys(b("PhotoSourceTypes"))).isRequired,showUploadProgress:a.bool,supportsCancel:a.bool};c.defaultProps={showUploadProgress:!0,supportsCancel:!1};e.exports=c}),null);
__d("PhotoPanel.react",["cx","fbt","ComputerPanelActionState","DragDropInstructions.react","HTML5FilePickerButton.react","OmnipickerPhotoGrid.react","PhotoSourceTypes","React","ReactDOM","Scroll"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={photoCount:0},d.renderInstructions=function(){return b("React").createElement("div",{className:"_1-nd"},b("React").createElement("div",null,b("React").createElement("div",{className:"_4zwc"},h._("Drag more photos"))),b("React").createElement("div",{className:"_4zwi"},b("React").createElement("span",{className:"_4zwe"}),h._("or"),b("React").createElement("span",{className:"_4zwe"})),b("React").createElement("div",{className:"_4zwf"},b("React").createElement(b("HTML5FilePickerButton.react"),{appID:d.props.appID})))},d.renderDragAndDropInstructions=function(){if(d.props.actionState!==b("ComputerPanelActionState").NEUTRAL)return b("React").createElement(b("DragDropInstructions.react"),{actionState:d.props.actionState,appID:d.props.appID,isOverlay:!0})},d.renderPhotoGrid=function(){return b("React").createElement(b("OmnipickerPhotoGrid.react"),{appID:d.props.appID,photos:d.props.photoData,photoSourceType:b("PhotoSourceTypes").COMPUTER,supportsCancel:!0})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){a=Object.keys(a.photoData).length;this.setState({photoCount:a})};d.componentDidUpdate=function(a,c){if(this.state.photoCount>c.photoCount){a=b("ReactDOM").findDOMNode(this.refs.pickerBox);b("Scroll").setTop(a,a.scrollHeight)}};d.render=function(){return b("React").createElement("div",null,b("React").createElement("div",{className:"_1x-l"},b("React").createElement("div",{className:"_1-ne _1-nf",ref:"pickerBox"},this.renderPhotoGrid(),this.renderInstructions())),this.renderDragAndDropInstructions())};return c}(b("React").Component);c.propTypes={actionState:a.oneOf(Object.keys(b("ComputerPanelActionState"))).isRequired,appID:a.string.isRequired,photoData:a.object.isRequired};e.exports=c}),null);
__d("ComputerPanel.react",["ComputerPanelActionState","DragDropFilePicker","EmptyPanel.react","FilePickerEvent","HTML5UploadAdapter","OmnipickerConfig","OmnipickerPanelMixin.react","OmnipickerUploadSession","PhotoPanel.react","PhotosMimeType","PhotoSourceTypes","PUWMethods","PUWUploaders","React","SelectionSource"],(function(a,b,c,d,e,f){__p&&__p();a=b("React").createClass({displayName:"ComputerPanel",mixins:[b("OmnipickerPanelMixin.react")],statics:{getAdapter:function(a,c){var d=b("OmnipickerConfig").FILE_UPLOAD_URI;c&&c.fileUploadURI&&(d=c.fileUploadURI);return new(b("HTML5UploadAdapter"))({uri:d,maxRetries:b("OmnipickerConfig").HTML5_UPLOADER_MAX_RETRIES,maxParallel:b("OmnipickerConfig").HTML5_UPLOADER_MAX_PARALLEL,postParams:{},qn:a.getWaterfallID(),waterfallApp:a.getWaterfallAppName(),waterfallUploader:b("PUWUploaders").HTML5})}},getDefaultProps:function(){return{selectionSource:b("SelectionSource").FILE,sourceType:b("PhotoSourceTypes").COMPUTER}},getInitialState:function(){return{actionState:b("ComputerPanelActionState").NEUTRAL}},componentDidMount:function(){var a=this;this.picker=new(b("DragDropFilePicker"))(document.documentElement,{onDocumentDragEnterCallback:function(){a.setState({actionState:b("ComputerPanelActionState").DROP})},onDocumentDragLeaveCallback:function(){a.setState({actionState:b("ComputerPanelActionState").NEUTRAL})},isFileValid:function(a){return b("PhotosMimeType").isImage(a.type)}});b("OmnipickerUploadSession").addPicker(this.props.appID,this.picker,b("PhotoSourceTypes").COMPUTER,b("PUWMethods").DRAGDROP);this.picker.subscribe(b("FilePickerEvent").SELECTED,this.onFilesDropped)},componentWillUnmount:function(){this.picker.disable(),b("OmnipickerUploadSession").removePicker(this.props.appID,this.picker)},onFilesDropped:function(a){this.setState({actionState:b("ComputerPanelActionState").NEUTRAL})},renderEmptyPanel:function(){return b("React").createElement(b("EmptyPanel.react"),{actionState:this.state.actionState,appID:this.props.appID})},renderPhotoPanel:function(){return b("React").createElement(b("PhotoPanel.react"),{actionState:this.state.actionState,appID:this.props.appID,photoData:this.props.photoData})},render:function(){var a=Object.keys(this.props.photoData).length;a=a===0?this.renderEmptyPanel():this.renderPhotoPanel();return b("React").createElement("div",null,a)}});e.exports=a}),null);
__d("OmnipickerLoggerStore",["invariant","FluxStore","OmnipickerActions","OmnipickerDispatcher","PUWSteps"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("OmnipickerActions").types;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.$OmnipickerLoggerStore1={};return b}var d=c.prototype;d.__onDispatch=function(a){__p&&__p();if(a.type===h.APP_INITIALIZED){a.logger||g(0,4888,a.appID);this.$OmnipickerLoggerStore1[a.appID]=a.logger;return}var c=this.$OmnipickerLoggerStore1[a.appID];c||g(0,4889,a.appID);switch(a.type){case h.FILE_PICKER_SELECT_STARTED:case h.FILE_PICKER_SELECTED:case h.FILE_PICKER_SELECT_CANCELED:this.$OmnipickerLoggerStore2(a,c);break;case h.RESIZE_STARTED:c.logStep(b("PUWSteps").CLIENT_UPLOAD_BEGIN);c.logStep(b("PUWSteps").CLIENT_PROCESS_BEGIN);break;case h.RESIZE_SUCCEEDED:c.logStep(b("PUWSteps").CLIENT_PROCESS_SUCCESS,{dt:a.dt,bytes:a.bytes,media_data_size:a.originalSize,custom_tags:a.customTags});break;case h.RESIZE_FAILED:c.logStep(b("PUWSteps").CLIENT_PROCESS_FAIL,{dt:a.dt,bytes:a.bytes,error_code:a.errorCode});break;case h.UPLOAD_STARTED:c.logStep(b("PUWSteps").CLIENT_TRANSFER_BEGIN,{bytes:a.bytes,ref:a.source});break;case h.UPLOAD_FINISHED:c.logStep(b("PUWSteps").CLIENT_TRANSFER_SUCCESS,{auto_retry_count:a.retriesNeeded,ref:a.source});c.logStep(b("PUWSteps").CLIENT_UPLOAD_SUCCESS,{fbid:a.fbid,ref:a.source});break;case h.UPLOAD_FAILED:c.logStep(b("PUWSteps").CLIENT_UPLOAD_FAIL,{auto_retry_count:a.retriesNeeded,error_code:a.errorCode,ref:a.source});break;case h.UPLOAD_QUEUED:c.logStep(b("PUWSteps").CLIENT_TRANSFER_BATCH_BEGIN,{ref:a.source,volume:a.volume});break;default:}};d.$OmnipickerLoggerStore2=function(a,c){__p&&__p();var d;switch(a.type){case h.FILE_PICKER_SELECT_STARTED:d=b("PUWSteps").CLIENT_SELECT_BEGIN;break;case h.FILE_PICKER_SELECTED:d=b("PUWSteps").CLIENT_SELECT_SUCCESS;break;case h.FILE_PICKER_SELECT_CANCELED:d=b("PUWSteps").CLIENT_SELECT_CANCEL;break;default:g(0,4890,a.type)}var e=a.method;a=a.ref;c.logStep(d,{method:e,ref:a})};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a(b("OmnipickerDispatcher"))}),null);
__d("OmnipickerPanelList.react",["cx","ix","Image.react","OmnipickerActions","PhotoSourceTypes","React"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.UNSAFE_componentWillMount=function(){var a=this;b("React").Children.forEach(this.props.children,function(c){if(!c)return;var d=a.props.appID;b("OmnipickerActions").panelInitialized(d,c.props.sourceType)})};d.render=function(){var a=this,c=null;this.props.doneSelecting&&(c=b("React").createElement("div",{className:"_5e8d"},b("React").createElement("div",{className:"_5e8e"},b("React").createElement(b("Image.react"),{className:"_5e8o",src:h("95719")}))));var d;this.props.children.length?d=this.props.children.find(function(b){return!b?!1:b.props.sourceType===a.props.selectedSourceType}):d=this.props.children;d=b("React").cloneElement(d,{photoData:this.props.photoData,appID:this.props.appID});return b("React").createElement("div",null,c,b("React").createElement("div",{className:"_5gfy"},d))};return c}(b("React").Component);c.propTypes={appID:a.string,photoData:a.object,doneSelecting:a.bool,selectedSourceType:a.oneOf(Object.keys(b("PhotoSourceTypes")))};e.exports=c}),null);
__d("OmnipickerPhotoSourceStore",["FluxStore","OmnipickerActions","OmnipickerDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("OmnipickerActions").types;a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b){b=a.call(this,b)||this;b.$OmnipickerPhotoSourceStore1={};return b}var c=b.prototype;c.__onDispatch=function(a){switch(a.type){case g.APP_INITIALIZED:this.$OmnipickerPhotoSourceStore1[a.appID]={currentSource:a.initialSource};break;case g.PHOTO_SOURCE_SELECTED:this.$OmnipickerPhotoSourceStore1[a.appID].currentSource=a.source;this.__emitChange();break;default:return}};c.getCurrentSource=function(a){return this.$OmnipickerPhotoSourceStore1[a].currentSource};return b}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a(b("OmnipickerDispatcher"))}),null);
__d("OmnipickerPhotoStore",["invariant","FluxStore","OmnipickerActions","OmnipickerDispatcher","OmnipickerPhotoUploadState"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("OmnipickerActions").types;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.$OmnipickerPhotoStore1={};return b}var d=c.prototype;d.__onDispatch=function(a){__p&&__p();a.appID||g(0,3178,a.type);var b=this.$OmnipickerPhotoStore1[a.appID];if(b){b=b.deletedPhotos;if(b&&b[a.id])return}switch(a.type){case h.APP_INITIALIZED:this.$OmnipickerPhotoStore2(a);return;case h.PANEL_INITIALIZED:this.$OmnipickerPhotoStore3(a);return;case h.EXISTING_PHOTOS_FETCHED:this.$OmnipickerPhotoStore4(a);break;case h.PHOTO_SELECTED_OPTIMISTICALLY:this.$OmnipickerPhotoStore5(a);break;case h.SELECTION_CHANGED:this.$OmnipickerPhotoStore6(a);break;case h.UPLOAD_CANCELED:this.$OmnipickerPhotoStore7(a);break;case h.UPLOAD_FAILED:this.$OmnipickerPhotoStore8(a);break;case h.UPLOAD_FINISHED:this.$OmnipickerPhotoStore9(a);break;case h.UPLOAD_PROGRESSED:this.$OmnipickerPhotoStore10(a);break;case h.UPLOAD_QUEUED:this.$OmnipickerPhotoStore11(a);break;case h.UPLOAD_STARTED:this.$OmnipickerPhotoStore12(a);break;default:return}this.__emitChange()};d.getState=function(a){a=this.$OmnipickerPhotoStore1[a];return{numPhotosSelected:this.$OmnipickerPhotoStore13(a).length,photosOptimisticallyUploading:a.photosOptimisticallyUploading,photosWaitingForUpload:a.photosWaitingForUpload,photoData:a.photos}};d.getSelectedPhotos=function(a){a=this.$OmnipickerPhotoStore1[a];return this.$OmnipickerPhotoStore13(a,a.uploadOrder).filter(function(a){return a.fbid!==""})};d.$OmnipickerPhotoStore13=function(a,b){var c=this,d=b||a.photos,e=[];Object.keys(a.photos).forEach(function(b){var f=Array.isArray(d[b])?d[b]:Object.keys(d[b]);f.forEach(function(d){d=c.$OmnipickerPhotoStore14(a,b,d);d.checked&&(d&&e.push(d))})});return e};d.$OmnipickerPhotoStore14=function(a,b,c){a=a.photos;a[b]||g(0,3179,b);a=a[b][c];a||g(0,3180,b,c);return a};d.$OmnipickerPhotoStore15=function(a){this.$OmnipickerPhotoStore16(a,["source","id"]);return this.$OmnipickerPhotoStore14(this.$OmnipickerPhotoStore1[a.appID],a.source,a.id)};d.$OmnipickerPhotoStore17=function(a,b){Object.prototype.hasOwnProperty.call(a,b)||g(0,3181,a.type,b),a[b]!==void 0&&a[b]!==null||g(0,3182,a.type,b)};d.$OmnipickerPhotoStore16=function(a,b){var c=this;b.push("appID");b.forEach(function(b){return c.$OmnipickerPhotoStore17(a,b)})};d.$OmnipickerPhotoStore18=function(a,c,d){var e=a.photos;e[c]||g(0,3183,c);e[c][d]&&g(0,3184,c,d);a.uploadOrder[c].push(d);return e[c][d]={id:d,checked:!1,fbid:"",progress:0,src:"",uploadState:b("OmnipickerPhotoUploadState").NOT_STARTED}};d.$OmnipickerPhotoStore19=function(a,b){a.photosWaitingForUpload[b.id]=!0};d.$OmnipickerPhotoStore20=function(a){a=this.$OmnipickerPhotoStore13(a);a.forEach(function(a){return a.checked=!1})};d.$OmnipickerPhotoStore2=function(a){var b=a.appID;this.$OmnipickerPhotoStore1[b]&&g(0,3185,b);this.$OmnipickerPhotoStore1[b]={deletedPhotos:{},photos:{},photosWaitingForUpload:{},photosOptimisticallyUploading:{},uploadOrder:{},singleSelection:a.singleSelection||!1}};d.$OmnipickerPhotoStore5=function(a){var b=this.$OmnipickerPhotoStore1[a.appID];b.photosOptimisticallyUploading[a.id]=!0;b.singleSelection&&this.$OmnipickerPhotoStore20(b);b=this.$OmnipickerPhotoStore15(a);b.checked=!0};d.$OmnipickerPhotoStore6=function(a){this.$OmnipickerPhotoStore16(a,["checked"]);var b=this.$OmnipickerPhotoStore1[a.appID];b.singleSelection&&a.checked&&this.$OmnipickerPhotoStore20(b);b=this.$OmnipickerPhotoStore15(a);b.checked=a.checked};d.$OmnipickerPhotoStore3=function(a){this.$OmnipickerPhotoStore16(a,["source"]);var b=this.$OmnipickerPhotoStore1[a.appID];b.photos[a.source]={};b.uploadOrder[a.source]=[]};d.$OmnipickerPhotoStore21=function(a,c,d,e){if(e===b("OmnipickerPhotoUploadState").FAILED||a.photosOptimisticallyUploading[d])return;a.singleSelection&&this.$OmnipickerPhotoStore20(a);c.checked=!0};d.$OmnipickerPhotoStore22=function(a,b,c,d){b.uploadState=d,delete a.photosWaitingForUpload[c],delete a.photosOptimisticallyUploading[c]};d.$OmnipickerPhotoStore23=function(a,b,c){b=b.id;delete a.photos[c][b];delete a.photosWaitingForUpload[b];delete a.photosOptimisticallyUploading[b];var d=a.uploadOrder[c].indexOf(b);a.uploadOrder[c].splice(d,1);a.deletedPhotos[b]=!0};d.$OmnipickerPhotoStore4=function(a){var b=this;this.$OmnipickerPhotoStore17(a,"photos");var c=this.$OmnipickerPhotoStore1[a.appID];a.photos.forEach(function(a){var d=a.source,e=a.id;a=a.src;d=b.$OmnipickerPhotoStore18(c,d,e);d.src=a})};d.$OmnipickerPhotoStore7=function(a){var b=this.$OmnipickerPhotoStore15(a);this.$OmnipickerPhotoStore23(this.$OmnipickerPhotoStore1[a.appID],b,a.source)};d.$OmnipickerPhotoStore8=function(a){var c=this.$OmnipickerPhotoStore1[a.appID];this.$OmnipickerPhotoStore22(c,this.$OmnipickerPhotoStore15(a),a.id,b("OmnipickerPhotoUploadState").FAILED)};d.$OmnipickerPhotoStore9=function(a){this.$OmnipickerPhotoStore16(a,["src","fbid"]);var c=a.appID,d=a.id,e=a.src,f=a.fbid;c=this.$OmnipickerPhotoStore1[c];a=this.$OmnipickerPhotoStore15(a);var g=b("OmnipickerPhotoUploadState").DONE;this.$OmnipickerPhotoStore21(c,a,d,g);this.$OmnipickerPhotoStore22(c,a,d,g);a.src=e;a.fbid=f};d.$OmnipickerPhotoStore10=function(a){this.$OmnipickerPhotoStore17(a,"progress");a=this.$OmnipickerPhotoStore15(a);a.progress=100};d.$OmnipickerPhotoStore12=function(a){a=this.$OmnipickerPhotoStore15(a);a.uploadState=b("OmnipickerPhotoUploadState").UPLOADING};d.$OmnipickerPhotoStore11=function(a){var b=this;this.$OmnipickerPhotoStore16(a,["source","ids"]);var c=a.source,d=this.$OmnipickerPhotoStore1[a.appID];a=a.ids;a.forEach(function(a){return b.$OmnipickerPhotoStore19(d,b.$OmnipickerPhotoStore18(d,c,a))})};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a(b("OmnipickerDispatcher"))}),null);
__d("Omnipicker.react",["invariant","ClientIDs","OmnipickerActions","OmnipickerPanelList.react","OmnipickerPhotoSourceStore","OmnipickerPhotoStore","OmnipickerUploadController","OmnipickerUploadSession","React","SubscriptionsHandler","Waiter","nullthrows","OmnipickerLoggerStore"],(function(a,b,c,d,e,f,g){__p&&__p();b("OmnipickerLoggerStore");b("OmnipickerPhotoSourceStore");b("OmnipickerPhotoStore");a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={appID:null,photoData:{},sourceType:null},d.handlePhotosChangeEvent=function(){var a=b("OmnipickerPhotoStore").getState(b("nullthrows")(d.state.appID)),c=Object.keys(a.photosWaitingForUpload).length,e=Object.keys(a.photosOptimisticallyUploading).length;e>0?d.$3||(d.$3=b("nullthrows")(d.$2).wait()):d.$3&&(d.$3(babelHelpers.assertThisInitialized(d)),d.$3=null);d.setState({photoData:a.photoData});d.props.onPhotosChange&&d.props.onPhotosChange(a.numPhotosSelected,c)},d.handleSourceChangeEvent=function(){d.setState(function(a){a=a.appID;return{sourceType:b("OmnipickerPhotoSourceStore").getCurrentSource(b("nullthrows")(a))}})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){__p&&__p();var a=this,c="Omnipicker_ID_"+b("ClientIDs").getNewClientID();b("OmnipickerUploadController").registerOmnipicker(c);b("OmnipickerUploadSession").registerOmnipicker(c);var d=[];b("React").Children.forEach(this.props.children,function(a){a.type===b("OmnipickerPanelList.react")&&d.push(b("React").cloneElement(a,{appID:c}))});d.length===1||g(0,1800);var e=d[0],f=null;b("React").Children.forEach(e.props.children,function(d){if(!d)return;(!f||d.props.isSelected)&&(f=d.props.sourceType);d.type.getAdapter&&b("OmnipickerUploadController").registerAdapter(c,d.type.getAdapter(a.props.logger,d.props.config),d.props.selectionSource)});!f&&g(0,1801);this.setState({appID:c,sourceType:f});b("OmnipickerActions").appInitialized(c,this.props.logger,f,this.props.singleSelection)};d.componentDidMount=function(){var a=this;this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(b("OmnipickerPhotoStore").addListener(this.handlePhotosChangeEvent),b("OmnipickerPhotoSourceStore").addListener(this.handleSourceChangeEvent));this.state.appID||g(0,12521);var c=this.state.appID;this.$2=new(b("Waiter"))(function(){a.props.onDoneSelecting(b("OmnipickerPhotoStore").getSelectedPhotos(c),b("nullthrows")(a.state.sourceType))})};d.componentWillUnmount=function(){this.$1&&this.$1.release()};d.componentDidUpdate=function(){this.props.doneSelecting&&b("nullthrows")(this.$2).go()};d.render=function(){var a=this,c=b("nullthrows")(this.state.sourceType),d=b("React").Children.map(this.props.children,function(d){var e={selectedSourceType:c,appID:a.state.appID};d.type===b("OmnipickerPanelList.react")&&Object.assign(e,{photoData:a.state.photoData[c]||{},doneSelecting:a.props.doneSelecting});return b("React").cloneElement(d,e)});return b("React").createElement("div",null,d)};return c}(b("React").Component);a.defaultProps={doneSelecting:!1};e.exports=a}),null);
__d("OmnipickerSelector.react",["cx","OmnipickerActions","PhotoSourceTypes","React","ShimButton.react","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.onClick=function(){b("OmnipickerActions").photoSourceSelected(d.props.appID,d.props.sourceType)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").createElement("li",{className:"_1ys7"},b("React").createElement(b("ShimButton.react"),{className:"_1ys8"+(this.props.isSelected?" selected":""),onClick:this.onClick},b("React").createElement("div",{className:"_1ys9"},b("React").createElement("span",{className:b("joinClasses")("_1ysb",this.props.iconClass)}),b("React").createElement("span",{className:"_1ysc"},this.props.children))))};return c}(b("React").Component);c.propTypes={appID:a.string.isRequired,iconClass:a.string.isRequired,isSelected:a.bool.isRequired,sourceType:a.oneOf(Object.keys(b("PhotoSourceTypes"))).isRequired};e.exports=c}),null);
__d("OmnipickerComputerSelector.react",["cx","fbt","OmnipickerSelector.react","PhotoSourceTypes","React"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(b("OmnipickerSelector.react"),babelHelpers["extends"]({iconClass:"_5o68"},this.props),this.props.labelText)};return c}(b("React").Component);c.propTypes={labelText:a.string};c.defaultProps={sourceType:b("PhotoSourceTypes").COMPUTER,labelText:h._("Computer")};e.exports=c}),null);
__d("OmnipickerDialog.react",["cx","fbt","Event","Keys","Link.react","OmnipickerConfig","React","SubscriptionsHandler","XUICloseButton.react","XUIDialog.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={doneSelecting:!1,numPhotosSelected:0,numPhotosUploading:0,uploadProgress:0},d.getButtonLabel=function(){var a=d.state.numPhotosSelected;if(a===1)return h._("Use Photo");return a>1?h._("Use Photos ({number})",[h._param("number",a)]):h._("Use Photos")},d.handleUsePhotos=function(){d.setState({doneSelecting:!0})},d.handleKeyDownEvent=function(a){b("Event").getKeyCode(a)===b("Keys").ESC&&d.props.onCancel()},d.handlePhotosChange=function(a,b){d.setState({numPhotosSelected:a,numPhotosUploading:b})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1=new(b("SubscriptionsHandler"))(),this.$1.addSubscriptions(b("Event").listen(document,"keydown",this.handleKeyDownEvent))};d.componentWillUnmount=function(){this.$1.release()};d.render=function(){var a=this.state.doneSelecting||this.state.numPhotosSelected<1||this.state.numPhotosUploading>0,c=null;b("OmnipickerConfig").FEEDBACK_GROUP_PATH&&(c=b("React").createElement("div",{className:"_2srv"},b("React").createElement(b("Link.react"),{href:b("OmnipickerConfig").FEEDBACK_GROUP_PATH,target:"_blank"},"Omnipicker Feedback Group")));var d=b("React").Children.only(this.props.children);d=b("React").cloneElement(d,{onPhotosChange:this.handlePhotosChange,doneSelecting:this.state.doneSelecting});return b("React").createElement(b("XUIDialog.react"),{shown:!0,layerHideOnBlur:!1,width:b("OmnipickerConfig").DIALOG_WIDTH,key:"dialog"},b("React").createElement(b("XUIDialogTitle.react"),{showCloseButton:!1},b("React").createElement("span",null,this.props.title),b("React").createElement(b("XUICloseButton.react"),{className:"_51-t",label:h._("Close"),onClick:this.props.onCancel})),d,b("React").createElement("div",{className:"_3bnc"},b("React").createElement(b("XUIDialogFooter.react"),{className:"_3bnd",leftContent:c},b("React").createElement(b("XUIDialogButton.react"),{action:"button",label:h._("Cancel"),onClick:this.props.onCancel,size:"xlarge"}),b("React").createElement(b("XUIDialogButton.react"),{className:"_3bne",use:"confirm",action:"confirm",size:"xlarge",disabled:a,label:this.getButtonLabel(),onClick:this.handleUsePhotos}))))};return c}(b("React").Component);c.propTypes={onCancel:a.func.isRequired,title:a.string.isRequired};e.exports=c}),null);
__d("OmnipickerDialogRenderer",["DOM","ReactDOM"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$1=a,this.$2=a.props.$2,this.$2||(this.$2=b("DOM").create("div"),b("DOM").appendContent(document.body,this.$2))}var c=a.prototype;c.show=function(){this.$2||(this.$2=b("DOM").create("div"),b("DOM").appendContent(document.body,this.$2)),b("ReactDOM").render(this.$1,this.$2)};c.hide=function(){b("ReactDOM").unmountComponentAtNode(this.$2),b("DOM").remove(this.$2),this.$2=null};c.isShowing=function(){return!!this.$2};return a}();e.exports=a}),null);
__d("ExistingPhotoSelectionContainer",["BaseSelectionContainer"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b,c,d){var e;e=a.call(this)||this;e.$ExistingPhotoSelectionContainer1=b;e.$ExistingPhotoSelectionContainer2=c;e.$ExistingPhotoSelectionContainer3=d;return e}var c=b.prototype;c.getExistingImageID=function(){return this.$ExistingPhotoSelectionContainer1};c.getSrc=function(){return this.$ExistingPhotoSelectionContainer2};c.getSource=function(){return this.$ExistingPhotoSelectionContainer3};c.hasPlaceholderUI=function(){return!0};return b}(b("BaseSelectionContainer"));e.exports=a}),null);
__d("ExistingPhotoPicker",["ArbiterMixin","ExistingPhotoSelectionContainer","FilePickerEvent","mixin"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this)||this;c.$ExistingPhotoPicker1=b;return c}var d=c.prototype;d.begin=function(){this.inform(b("FilePickerEvent").BEGIN)};d.select=function(a,c){this.inform(b("FilePickerEvent").SELECTED,{sender:this,selections:[new(b("ExistingPhotoSelectionContainer"))(a,c,this.$ExistingPhotoPicker1)]})};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("OmnipickerExistingPhotosPanelMixin.react",["cx","invariant","ExistingPhotoPicker","OmnipickerActions","OmnipickerPanelMixin.react","OmnipickerPhotoGrid.react","OmnipickerUploadSession","PhotoStore","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c={mixins:[b("OmnipickerPanelMixin.react")],propTypes:{initBatchSize:a.number,pageBatchSize:a.number,puwMethod:a.string.isRequired,setID:a.string.isRequired},UNSAFE_componentWillMount:function(){typeof this.getViewState==="function"||h(0,2424),this.picker=new(b("ExistingPhotoPicker"))(this.props.selectionSource),b("OmnipickerUploadSession").addPicker(this.props.appID,this.picker,this.props.sourceType,this.props.puwMethod)},componentDidMount:function(){this.getViewState().initViewState(),this.picker.begin()},componentWillUnmount:function(){this.getViewState().destroy(),b("OmnipickerUploadSession").removePicker(this.props.appID,this.picker)},render:function(){return b("React").createElement("div",null,this.getThrobber(),this.getPhotoGrid())},onViewStateChanged:function(a){var c=this;b("OmnipickerActions").existingPhotosFetched(this.props.appID,this.props.sourceType,a.media.filter(function(a){return!c.props.photoData[a.id]}))},onPhotoSelected:function(a){this.picker.select(a,this.props.photoData[a].src);return!1},getPhotoGrid:function(){var a=this;if(!b("PhotoStore").hasBeenCreated(this.props.setID))return null;var c=null;(!b("PhotoStore").hasBeenCreated(this.props.setID)||b("PhotoStore").hasNextPage(this.props.setID))&&(c=function(){a.getViewState().fetchMore()});return b("React").createElement(b("OmnipickerPhotoGrid.react"),{appID:this.props.appID,onPhotoSelected:this.onPhotoSelected,onScrollPositionThresholdReached:c,photos:this.props.photoData,photoSourceType:this.props.sourceType,showUploadProgress:!1})},getThrobber:function(){return b("PhotoStore").hasBeenCreated(this.props.setID)?null:b("React").createElement("div",{className:"_j0-"})}};e.exports=c}),null);
__d("ScrollablePhotoViewStateCore",["SubscriptionsHandler","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this.$1=a.photoStore,this.$2=a.viewer,this.$3=a.setToken,this.$4=a.updateCallback,this.$5=a.subscribeUpdatePhotos,this.$6=a.fetchInitData,this.$7=a.initBatchSize,this.$8=a.pageBatchSize,this.$9=new(b("SubscriptionsHandler"))()}var c=a.prototype;c.initViewState=function(){this.$9.addSubscriptions(this.$5(this.updateData.bind(this)));if(this.$1.hasBeenCreated(this.$3)){var a=this.$1.getAvailableRange(this.$3).length;(a>=this.$7||!this.$1.hasNextPage(this.$3))&&this.syncState();return}this.$6(this.$3)};c.hasNextPage=function(){return this.$1.hasBeenCreated(this.$3)&&this.$1.hasNextPage(this.$3)};c.fetchToIndex=function(a){var c=this.$1.getEndIndex(this.$3);a=a-c;if(a<=0)return;this.$1.getItemsAfterIndex(this.$3,c,a,b("emptyFunction"))};c.fetchMore=function(a){if(!this.hasNextPage())return;this.$1.getItemsAfterIndex(this.$3,this.$1.getEndIndex(this.$3),this.$8,a||b("emptyFunction"))};c.destroy=function(){this.$9.release()};c.updateData=function(a){var b=this;if(a.set_id!=this.$3)return;a=a.query_results&&a.query_results.result_type;a=="init"?this.$1.executePostCreate(this.$3,function(){b.syncState()}):this.syncState()};return a}();e.exports=a}),null);
__d("fetchInitPhotoViewState",["AsyncRequest"],(function(a,b,c,d,e,f){function a(a,c){new(b("AsyncRequest"))(a).setData({set:c}).send()}e.exports=a}),null);
__d("subscribeToArbiterUpdatePhotos",["Arbiter"],(function(a,b,c,d,e,f){function a(a){return b("Arbiter").subscribe("update-photos",function(b,c){a(c)})}e.exports=a}),null);
__d("OmnipickerExistingPhotosViewState",["PhotoStore","ScrollablePhotoViewStateCore","fetchInitPhotoViewState","subscribeToArbiterUpdatePhotos"],(function(a,b,c,d,e,f){__p&&__p();function g(a,c){b("fetchInitPhotoViewState")(a,c)}a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d,e,f,h,i){h=a.call(this,{fetchInitData:g.bind(null,h),initBatchSize:e,pageBatchSize:f,photoStore:b("PhotoStore"),setToken:d,subscribeUpdatePhotos:b("subscribeToArbiterUpdatePhotos"),updateCallback:i,viewer:c})||this;h.$OmnipickerExistingPhotosViewState1=e;h.$OmnipickerExistingPhotosViewState2=d;h.$OmnipickerExistingPhotosViewState3=i;return h}var d=c.prototype;d.syncState=function(){this.$OmnipickerExistingPhotosViewState3({media:b("PhotoStore").getItemsInAvailableRange(this.$OmnipickerExistingPhotosViewState2),hasNextPage:b("PhotoStore").hasNextPage(this.$OmnipickerExistingPhotosViewState2)})};return c}(b("ScrollablePhotoViewStateCore"));e.exports=a}),null);
__d("XPagesManagerPostedPhotosController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/content_tab/posted_photos/",{set:{type:"String",required:!0},size:{type:"Int",required:!0}})}),null);
__d("OmnipickerPagePostedPhotosPanel.react",["ActorURI","OmnipickerConfig","OmnipickerExistingPhotosPanelMixin.react","OmnipickerExistingPhotosViewState","PhotoSourceTypes","PUWMethods","React","SelectionSource","XPagesManagerPostedPhotosController"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c=b("React").createClass({displayName:"OmnipickerPagePostedPhotosPanel",mixins:[b("OmnipickerExistingPhotosPanelMixin.react")],_viewState:null,propTypes:{pageID:a.string.isRequired},getDefaultProps:function(){return{initBatchSize:20,pageBatchSize:16,puwMethod:b("PUWMethods").RECENT_PHOTOS,selectionSource:b("SelectionSource").PAGES_POSTED_PHOTOS,setID:b("OmnipickerConfig").POSTED_PHOTOS_SET_ID,sourceType:b("PhotoSourceTypes").PAGES_POSTED_PHOTOS}},UNSAFE_componentWillMount:function(){var a=b("ActorURI").create(b("XPagesManagerPostedPhotosController").getURIBuilder().setString("set",this.props.setID).setInt("size",this.props.initBatchSize).getURI(),this.props.pageID);this._viewState=new(b("OmnipickerExistingPhotosViewState"))(this,this.props.setID,this.props.initBatchSize,this.props.pageBatchSize,a,this.onViewStateChanged)},getViewState:function(){return this._viewState}});e.exports=c}),null);
__d("OmnipickerPagePostedPhotosSelector.react",["cx","fbt","OmnipickerSelector.react","PhotoSourceTypes","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(b("OmnipickerSelector.react"),babelHelpers["extends"]({iconClass:"_2_y4"},this.props),this.props.labelText)};return c}(b("React").Component);c.propTypes={labelText:a.node};c.defaultProps={sourceType:b("PhotoSourceTypes").PAGES_POSTED_PHOTOS,labelText:h._("Page Photos")};e.exports=c}),null);
__d("OmnipickerSelectorList.react",["cx","PhotoSourceTypes","React"],(function(a,b,c,d,e,f,g){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this,c=b("React").Children.map(this.props.children,function(c){if(!c)return;return b("React").cloneElement(c,{isSelected:c.props.sourceType===a.props.selectedSourceType,appID:a.props.appID})});return b("React").createElement("div",{className:"_1n6_"},b("React").createElement("ul",null,c))};return c}(b("React").Component);c.propTypes={appID:a.string,selectedSourceType:a.oneOf(Object.keys(b("PhotoSourceTypes")))};e.exports=c}),null);
__d("OmnipickerWaterfallLogger",["PhotosUploadWaterfallXMixin"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,b){this.$1=a,this.$2=b}var c=a.prototype;c.getWaterfallAppName=function(){return this.$1};c.getWaterfallID=function(){return this.$2};c.logStep=function(a,c,d){return b("PhotosUploadWaterfallXMixin").logStep.call(this,a,c,d)};c.logPUWStep=function(a,c,d,e,f,g,h){return b("PhotosUploadWaterfallXMixin").logPUWStep.call(this,a,c,d,e,f,g,h)};return a}();e.exports=a}),null);
__d("ProductVideoChunkedUploader",["AdsVideoUploadEvents","AdsVideoUploadSession","AdsVideoUploadUtil","URI","VideoUploader","VideoUploadProgressBar"],(function(a,b,c,d,e,f){__p&&__p();var g="/v2.4",h="graph-video";a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){var d=c.config,e=new(b("URI"))(g+"/"+c.target_id+"/videos?access_token="+c.access_token).setSubdomain(h).toString();e={start_uri:e,receive_uri:e,post_uri:e,chunk_start_uri:e,chunk_receive_uri:e,chunk_post_uri:e,min_size:d.minSize,min_width:d.minWidth,min_height:d.minHeight,min_length:d.minLength,max_size:d.maxSize,max_length:d.maxLength,extensions:d.extensions,logging_delay:d.loggingDelay,max_transport_retries:d.maxTransportRetries,transport_retry_interval_base:d.transportRetryIntervalBase,max_server_retries:d.maxServerRetries,server_retry_interval_base:d.serverRetryIntervalBase,source:c.source,target_id:c.target_id,target_type:c.target_type};d=a.call(this,e)||this;d.$ProductVideoChunkedUploader1="";return d}var d=c.prototype;d.getUploadTime=function(){var a=this.__getSession();return a!=null?a.getUploadTime():null};d.getEncodingTime=function(){var a=this.__getSession();return a!=null?a.getEncodingTime():null};d.abort=function(){this.cancel()};d.upload=function(c){var d=c.getFile();d=b("AdsVideoUploadUtil").getVideoTitle(d);this.$ProductVideoChunkedUploader1=d?d:"";a.prototype.upload.call(this,c)};d.__getVideoUploadSession=function(a){return new(b("AdsVideoUploadSession"))(a)};d.getVideoTitle=function(){return this.$ProductVideoChunkedUploader1};d.__createSession=function(a){return new(b("AdsVideoUploadSession"))(a)};d.__getEventsWhichShouldListenFromSession=function(){var c=a.prototype.__getEventsWhichShouldListenFromSession.call(this);c.push(b("AdsVideoUploadEvents").ENCODING_SUCCESS,b("AdsVideoUploadEvents").ENCODING_ERROR);return c};d.__getEventsForWhichSessionShouldBeSetToNull=function(){return["upload-failed",b("AdsVideoUploadEvents").ENCODING_SUCCESS,b("AdsVideoUploadEvents").ENCODING_ERROR]};d.__delegateEvent=function(c,d){var e=null;if(c==="upload-progressed"){var f=b("VideoUploadProgressBar").computeProgress(d.start_offset,d.sent_bytes,d.file_size,0,0);e=f/100}else c==="upload-finished"?this.post({}):c==="post-finished"?e=d.video_id:c==="post-failed"&&(c="upload-failed");a.prototype.__delegateEvent.call(this,c,e)};return c}(b("VideoUploader"));e.exports=a}),null);
__d("PageContentTabProductUploadVideoButton.react",["cx","fbt","AdsVideoUploadConfig","AdsVideoUploadEvents","AsyncRequest","FileInput.react","GraphAPI","Link.react","ProductVideoChunkedUploader","React","VideoUploadFile","VideoUploadTargetType","XUIGrayText.react","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=1e3;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={videoUploaders:[],lastEncodingStatusCheckTimes:[]},d.$1=function(){__p&&__p();var a=d.refs.fileInput.getFileInput().getInput();a=b("VideoUploadFile").fromFileInput(a);var c=new(b("ProductVideoChunkedUploader"))({config:b("AdsVideoUploadConfig"),source:"product_edit_tool",target_id:d.props.productCatalogID,target_type:b("VideoUploadTargetType").PRODUCT_CATALOG,access_token:d.props.pageContentTabAccessToken}),e=d.state.videoUploaders.length;c.subscribe("upload-failed",d.$2.bind(babelHelpers.assertThisInitialized(d),e));c.subscribe(b("AdsVideoUploadEvents").UPLOAD_ERROR,d.$2.bind(babelHelpers.assertThisInitialized(d),e));c.subscribe("post-failed",d.$2.bind(babelHelpers.assertThisInitialized(d),e));c.subscribe("post-finished",d.$3.bind(babelHelpers.assertThisInitialized(d),e));d.props.onVideoSelected(e);c.upload(a);a=d.state.videoUploaders;a[e]=c;d.setState({videoUploaders:a})},d.$2=function(a){d.props.onVideoUploadError(a)},d.$3=function(a){d.$4(a)},d.$5=function(a){var c=d.$6(a),e=d.state.lastEncodingStatusCheckTimes;e[a]=Date.now();d.setState({lastEncodingStatusCheckTimes:e});new(b("AsyncRequest"))().setURI("/ajax/video/encode/feedback/ping/").setData({video_id:c}).setHandler(d.$7.bind(babelHelpers.assertThisInitialized(d),a)).send()},d.$8=function(a,b){var c=d.$6(a);b=b.data;if(b)for(var e=0;e<b.length;e++)if(b[e].is_preferred){d.props.onVideoUploadFinished(a,c,b[e].uri);return}},d.$6=function(a){return d.state.videoUploaders[a].getUploadSession().getVideoID()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").createElement(b("FileInput.react"),{name:"video",ref:"fileInput",onChange:this.$1},b("React").createElement(b("Link.react"),{className:"_25dc"},b("React").createElement("div",{className:"_25dd _25de"},b("React").createElement(b("XUIGrayText.react"),{className:"_25df",size:"meta1",display:"block"},h._("Add Videos")))))};d.$4=function(a){var b=this.state.lastEncodingStatusCheckTimes[a]+i;b=Math.max(0,b-Date.now());setTimeout(this.$5.bind(this,a),b)};d.$7=function(a,c){var d=this.$6(a);c=c.payload;c&&(c.is_ready?b("promiseDone")(b("GraphAPI")("2.3",e.id).object("video",d).edge("thumbnails").get({access_token:this.props.pageContentTabAccessToken}),this.$8.bind(this,a)):c.error?this.$2(a):this.$4(a))};return c}(b("React").Component);c.propTypes={onVideoSelected:a.func.isRequired,onVideoUploadError:a.func.isRequired,onVideoUploadFinished:a.func.isRequired,pageContentTabAccessToken:a.string.isRequired,productCatalogID:a.string.isRequired};e.exports=c}),null);
__d("XPagesManagerProductPhotoUploadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/upload/file/product/photo/",{waterfall_id:{type:"String"}})}),null);
__d("PageProductPhotoEditButton.react",["cx","fbt","ActorURI","Arbiter","AsyncRequest","BOFSellerLogger","BOFSellerLoggerEvent","PhotoEditorTargetType","React","ReactComposerPhotoActions","Tooltip","XComposerPhotoUploader","XPagesManagerProductPhotoUploadController","XStickerPhotoEditorController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){b("Arbiter").subscribe("PageProductPhotoEditor/newImage"+this.props.composerID,this.$2.bind(this))};d.render=function(){var a=h._("Edit Photo");return b("React").createElement("button",babelHelpers["extends"]({className:"_k4v",onClick:this.$3.bind(this)},b("Tooltip").propsFor(a)),b("React").createElement("div",{className:"_k4w"}))};d.$3=function(){__p&&__p();var a=this;if(this.$1)return;b("BOFSellerLogger").log(b("BOFSellerLoggerEvent").ACTN_EDIT_PHOTO_CLICK,this.props.pageID,{target_class:"Photo",target_id:this.props.photoID});var c,d;this.props.photoID==parseInt(this.props.photoID,10)?(c=parseInt(this.props.photoID,10),d=""):(c=0,d=this.props.photoID);c=b("ActorURI").create(b("XStickerPhotoEditorController").getURIBuilder().setString("grid_id",this.props.composerID).setEnum("target_type",b("PhotoEditorTargetType").PAGE_PRODUCT_COMPOSER).setInt("photo_fbid",c).setString("encrypted_photo_id",d).getURI(),this.props.pageID);this.$1=new(b("AsyncRequest"))(c).setFinallyHandler(function(){a.$1=null}).send();b("ReactComposerPhotoActions").startPhotoEdit(this.props.composerID,null)};d.$2=function(a,c){var d=this;a=b("ActorURI").create(b("XPagesManagerProductPhotoUploadController").getURIBuilder().getURI(),this.props.pageID);var e=c.encryptedID||c.fbid;a=new(b("XComposerPhotoUploader"))({uploadEndpoint:a,onUploadSuccess:function(a,b){d.props.onPhotoEdited(e,b.response.payload[0])}});a.getAsyncUploadRequest([c.blob]).send()};return c}(b("React").Component);c.propTypes={composerID:a.string.isRequired,onPhotoEdited:a.func.isRequired,pageID:a.string.isRequired,photoID:a.string.isRequired};e.exports=c}),null);
__d("PageContentTabProductPhotoUploader.react",["cx","fbt","invariant","ActorURI","AudienceManagerEngagementVideoSelectionError.react","ComputerPanel.react","Image.react","Link.react","Omnipicker.react","OmnipickerComputerSelector.react","OmnipickerDialog.react","OmnipickerDialogRenderer","OmnipickerPagePostedPhotosPanel.react","OmnipickerPagePostedPhotosSelector.react","OmnipickerPanelList.react","OmnipickerSelectorList.react","OmnipickerWaterfallLogger","PageContentTabProductUploadVideoButton.react","PageProductPhotoEditButton.react","PUWApplications","PUWSteps","React","WaterfallIDGenerator","XPagesManagerProductPhotoUploadController","XUICloseButton.react","XUIError.react","XUIGrayText.react","XUISpinner.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"PageContentTabProductPhotoUploader",_waterfallLogger:null,propTypes:{className:a.string,maxPhotosCount:a.number,pageID:a.string.isRequired,onPhotoEdited:a.func,onPhotosSelected:a.func.isRequired,onPhotoRemoved:a.func.isRequired,photos:a.array.isRequired,photoEditingEnabled:a.bool.isRequired,productCatalogID:a.string,pageContentTabAccessToken:a.string,videos:a.array,onVideoSelected:a.func,onVideoUploadFinished:a.func,onVideoUploadError:a.func,onVideoRemoved:a.func,showVideoUploadButton:a.bool,singleSelection:a.bool,xuiError:a.any},getInitialState:function(){var a={fileUploadURI:b("ActorURI").create(b("XPagesManagerProductPhotoUploadController").getURIBuilder().getURI(),this.props.pageID)};this._waterfallLogger=new(b("OmnipickerWaterfallLogger"))(b("PUWApplications").WEB_PRODUCT_PHOTO_OMNIPICKER,b("WaterfallIDGenerator").generate());return{dialogRenderer:new(b("OmnipickerDialogRenderer"))(b("React").createElement(b("OmnipickerDialog.react"),{onCancel:this.onPickerCancel,title:h._("Select Photo")},b("React").createElement(b("Omnipicker.react"),{logger:this._waterfallLogger,onDoneSelecting:this.onPickerAddPhotos,singleSelection:this.props.singleSelection},b("React").createElement(b("OmnipickerSelectorList.react"),null,b("React").createElement(b("OmnipickerComputerSelector.react"),null),b("React").createElement(b("OmnipickerPagePostedPhotosSelector.react"),null)),b("React").createElement(b("OmnipickerPanelList.react"),null,b("React").createElement(b("ComputerPanel.react"),{config:a}),b("React").createElement(b("OmnipickerPagePostedPhotosPanel.react"),{pageID:this.props.pageID})))))}},onPickerCancel:function(){this.state.dialogRenderer.hide(),this._waterfallLogger.logStep(b("PUWSteps").CLIENT_FLOW_CANCEL)},onPickerAddPhotos:function(a){this.state.dialogRenderer.hide(),this.props.onPhotosSelected(a)},render:function(){var a=null,c=null,d=this.props.photos.length;this.props.videos&&(d+=this.props.videos.length);(!this.props.maxPhotosCount||d<this.props.maxPhotosCount)&&(a=this._renderAddPhotoLink(),c=this._renderAddVideoLink());return b("React").createElement("div",{className:this.props.className},this._renderUploadedMedia(),a,c)},_renderUploadedPhoto:function(a){var c=this,d=null;this.props.photoEditingEnabled&&(d=b("React").createElement(b("PageProductPhotoEditButton.react"),{composerID:this._waterfallLogger.getWaterfallID(),onPhotoEdited:this.props.onPhotoEdited,pageID:this.props.pageID,photoID:a.fbid}));return b("React").createElement("div",{key:a.fbid,className:"_5m94"},b("React").createElement(b("XUICloseButton.react"),{className:"_5m95",size:"medium",shade:"light",onClick:function(b){return c.props.onPhotoRemoved(a)}}),b("React").createElement(b("Image.react"),{className:"_19tc",src:a.src}),d,b("React").createElement("div",{className:"_19td"}))},_renderUploadedVideo:function(a){var c=this,d=null;!a.ready&&!a.error&&(d=b("React").createElement(b("XUISpinner.react"),{className:"_37cg",size:"large"}));var e=null;a.error&&(e=b("React").createElement("div",{className:"_37ch"},b("React").createElement(b("AudienceManagerEngagementVideoSelectionError.react"),{mainLabel:h._("Upload failed")})));return b("React").createElement("div",{key:a.fbid,className:"_5m94"},b("React").createElement(b("XUICloseButton.react"),{className:"_5m95",size:"medium",shade:"light",onClick:function(){c.props.onVideoRemoved||i(0,1178),c.props.onVideoRemoved(a)}}),b("React").createElement(b("Image.react"),{className:"_19tc",src:a.src}),d,e,b("React").createElement("div",{className:"_37cj"}),b("React").createElement("div",{className:"_37cm"},b("React").createElement("div",{className:"_37cn"})),b("React").createElement("div",{className:"_19td"}))},_renderUploadedMedia:function(){var a=this.props.videos&&this.props.onVideoRemoved?this.props.videos.map(this._renderUploadedVideo):[],b=this.props.photos.map(this._renderUploadedPhoto);return a.concat(b)},_renderAddPhotoLink:function(){return b("React").createElement(b("Link.react"),{className:"_3ff7",ref:"uploadButton",onClick:this._onPickerLaunch},b("React").createElement(b("XUIError.react"),{xuiError:this.props.xuiError},b("React").createElement("div",{className:"_22to _19tc"},b("React").createElement(b("XUIGrayText.react"),{className:"_3ff8",size:"meta1",display:"block"},h._("Add Photos")))))},_renderAddVideoLink:function(){return!this.props.showVideoUploadButton||!this.props.onVideoSelected||!this.props.onVideoUploadFinished||!this.props.onVideoUploadError||!this.props.productCatalogID||!this.props.pageContentTabAccessToken?null:b("React").createElement(b("PageContentTabProductUploadVideoButton.react"),{productCatalogID:this.props.productCatalogID,onVideoSelected:this.props.onVideoSelected,onVideoUploadFinished:this.props.onVideoUploadFinished,onVideoUploadError:this.props.onVideoUploadError,pageContentTabAccessToken:this.props.pageContentTabAccessToken})},_onPickerLaunch:function(){this._waterfallLogger.logStep(b("PUWSteps").CLIENT_FLOW_BEGIN),this.state.dialogRenderer.show()}});e.exports=c}),null);
__d("AnyTokenSearchSource",["AbstractSearchSource","SearchableEntry"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this)||this;c.$AnyTokenSearchSource1=b||c.$AnyTokenSearchSource1;return c}var d=c.prototype;d.$AnyTokenSearchSource1=function(a){return new(b("SearchableEntry"))({uniqueID:a,title:a})};d.searchImpl=function(a,b,c){c=[];a&&a.length&&c.push(this.$AnyTokenSearchSource1(a));b(c,a)};return c}(b("AbstractSearchSource"));e.exports=a}),null);