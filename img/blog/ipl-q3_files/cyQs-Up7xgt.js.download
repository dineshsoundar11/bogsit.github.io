if (self.CavalryLogger) { CavalryLogger.start_js(["hu8uv"]); }

__d("PagePostFooterInsightsMessageAudienceGender",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MEN:"men",WOMEN:"women",PEOPLE:"people"})}),null);
__d("PagePostFooterInsightsMessageType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REACH:"reach",TOP_REGION_BY_VIEW_TIME:"top_region_by_view_time",WATCH_TIME:"watch_time",TOP_AUDIENCE_BY_VIEW_TIME:"top_audience_by_view_time",CONSUMPTION_RATE:"consumption_rate",ENGAGEMENT_RATE:"engagement_rate",LINK_CLICKS:"link_clicks",HIGHLIGHTED_SHARES:"highlighted_shares"})}),null);
__d("PagesPostFooter",["ix","cx","fbt","AsyncDialog","AsyncRequest","BoostedComponentQEs","BoostedComponentQEUtils","ComposerTargetType","HubbleApiWrapper","HubbleContext","HubbleDrillDownMixin","HubblePostDrillDown","HubblePostMetricConfig","Image.react","InsightsBackgroundBar.react","InsightsFormatters","Link.react","PageInsightsPostDataType","PageInsightsReachOverlapTooltip.react","PagePostFooterInsightsMessageAudienceGender","PagePostFooterInsightsMessageType","PagesPublishingTypedLogger","React","SpectrumIntegerScale","VideoAssetContext","VideoAssetInsightsSource","VideoPostTopShares.react","XVideoAssetInsightsDialogController","asset","d3-old/scale/ordinal","fbglyph","idx","intlNumUtils","intlSummarizeNumber"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=b("React").PropTypes;var j={all:"all","13-17":"age_13_17","18-24":"age_18_24","25-34":"age_25_34","35-44":"age_35_44","45-54":"age_45_54","55-64":"age_55_64","65+":"age_over_65"};c=b("React").createClass({displayName:"PagesPostFooterBar",mixins:[b("HubbleDrillDownMixin")],propTypes:{drilldown:a.element,is_long_locale:a.bool,message:a.object,page_id:a.string.isRequired,post_feed_object_id:a.string.isRequired,should_linkify_footer:a.bool,story_id:a.string,event_id:a.string,action_context:a.object,is_on_creator_studio:a.bool,insights_qe_log_event:a.string},getDefaultProps:function(){return{drilldown:b("React").createElement(b("HubblePostDrillDown"),null)}},getInitialState:function(){return{showDrilldown:!1,defaultInsightsValues:{}}},handlePost:function(a){__p&&__p();a=a.posts.shift();if(!a)return;if(a.type===b("PageInsightsPostDataType").VIDEO||a.type===b("PageInsightsPostDataType").SHARED_VIDEO){if(this.props.message){var c=this.props.message;if(this.props.message.type===b("PagePostFooterInsightsMessageType").CONSUMPTION_RATE||this.props.message.type===b("PagePostFooterInsightsMessageType").ENGAGEMENT_RATE){var d=c.content.gender;c.content.gender!=="all"&&(d=c.content.gender==="M"?"male":"female");this.setState({defaultInsightsValues:{age:j[c.content.age],gender:d}})}else this.setState({defaultInsightsValues:{age:"all",gender:"all"}});d=b("XVideoAssetInsightsDialogController").getURIBuilder().setFBID("video_asset_id",this.props.story_id).setFBID("page_id",this.props.page_id).setEnum("source",b("VideoAssetInsightsSource").PAGES_POST_REACH_BAR).setEnum("context",b("VideoAssetContext").VIDEO_POST).setEnum("source_footer_message_type",c.type).setEnum("initial_card",c.initial_card).setEnum("initial_tab",c.initial_tab).setBool("is_on_creator_studio",this.props.is_on_creator_studio).setStringToStringMap("default_insights_values",this.state.defaultInsightsValues).getURI();b("AsyncDialog").send(new(b("AsyncRequest"))(d))}}else this.setState({drilldownProps:{postCreatedTime:a.created_time,postID:a.id,postIdentifier:a.identifier,postStatusType:a.status_type,postType:a.type,ref:"post_reach_bar"},showDrillDown:!0})},formatGender:function(a){if(a==="M")return"Men";else if(a==="F")return"Women";else return"People"},getGenderImage:function(a){switch(a){case"men":case"Men":return g("113377");case"women":case"Women":return g("113401");default:return g("113381")}},_onFooterBarClick:function(a){a.stopPropagation();if(!this.props.should_linkify_footer)return;new(b("PagesPublishingTypedLogger"))().setName(this.props.insights_qe_log_event).setTargetID(this.props.page_id).setTargetType(b("ComposerTargetType").PAGE).setPostingPageID(this.props.page_id).setExtraClientData(JSON.stringify({post_id:this.props.story_id})).log();this.props.story_id&&b("HubbleApiWrapper").getPostsByIDs({ids:this.props.page_id+"_"+this.props.story_id,page_id:this.props.page_id},this.handlePost)},_renderMetricsBar:function(a,c,d){a=Math.max(a-c,d);d=b("d3-old/scale/ordinal")().range(b("HubblePostMetricConfig").types.reach.colors);var e=b("SpectrumIntegerScale")().domain([0,a+c]),f=(this.props.is_long_locale?"":"__jg")+(this.props.is_long_locale?" _3pua":"")+" _3-8t";return c!==0?b("React").createElement("div",{className:f},b("React").createElement(b("InsightsBackgroundBar.react"),{colors:d,label:!1,scale:e,"short":!0,titles:b("HubblePostMetricConfig").splits.acquisition.titles,values:[a,c]})):null},render:function(){__p&&__p();var a=null,c=null,d=null,e=null;if(this.props.message){var f=this.props.message;switch(f.type){case b("PagePostFooterInsightsMessageType").REACH:var h=f.content.total_reach,j=f.content.paid_reach,k=f.content.organic_reach;j>0&&(c=this._renderMetricsBar(h,j,k));a=g("113365");k=b("React").createElement("div",null);b("HubbleContext").get("canSeeOrganicViralChange")&&j>0&&(k=b("React").createElement("div",{style:{marginLeft:4,marginTop:1}},b("React").createElement(b("PageInsightsReachOverlapTooltip.react"),null)));d=b("React").createElement("div",{style:{display:"inline-flex"}},b("React").createElement("span",{className:"_2dco"},i._("{reach number} reached",[i._param("reach number",b("React").createElement("span",{className:"_2dcn"},i._({"*":"{reach number} people","_1":"1 person"},[i._plural(h,"reach number",b("intlNumUtils").formatNumberWithThousandDelimiters(h))])))])),k);break;case b("PagePostFooterInsightsMessageType").TOP_REGION_BY_VIEW_TIME:j=f.content.top_region;a=g("113782");d=b("React").createElement("span",{className:"_2dco"},i._("Your video is popular in {region name}",[i._param("region name",b("React").createElement("span",{className:"_2dcn"},j))]));break;case b("PagePostFooterInsightsMessageType").WATCH_TIME:h=f.content.watch_time;a=g("113033");d=b("React").createElement("span",{className:"_2dco"},i._("People have watched this video for a total of {watch time in minute}",[i._param("watch time in minute",b("React").createElement("span",{className:"_2dcn"},i._({"*":"{watch time} minutes","_1":"1 minute"},[i._plural(h,"watch time",b("intlSummarizeNumber")(h))])))]));break;case b("PagePostFooterInsightsMessageType").TOP_AUDIENCE_BY_VIEW_TIME:k=f.content.gender;j=f.content.age_range;a=this.getGenderImage(k);d=b("React").createElement("span",{className:"_2dco"},i._("Your video is popular with {gender_and_age}",[i._param("gender_and_age",b("React").createElement("span",{className:"_2dcn"},i._({"men":{"between the ages":"men between the ages {age range}","ages":"men ages {age range}"},"women":{"between the ages":"women between the ages {age range}","ages":"women ages {age range}"},"people":{"between the ages":"people between the ages {age range}","ages":"people ages {age range}"}},[i._enum(k,{men:"men",women:"women",people:"people"}),i._enum(f.content.is_age_a_window===!0?"between the ages":"ages",{"between the ages":"between the ages",ages:"ages"}),i._param("age range",j)])))]));break;case b("PagePostFooterInsightsMessageType").CONSUMPTION_RATE:h=f.content.consumption_rate;k=f.content.age;j=this.formatGender(f.content.gender);k==="all"&&j==="People"?(a=g("507225"),d=b("React").createElement("span",{className:"_2dco"},i._("{=[percentage] of your audience} viewed this video",[i._param("=[percentage] of your audience",b("React").createElement("span",{className:"_2dcn"},i._("{percentage} of your audience",[i._param("percentage",b("InsightsFormatters").percentageFormatter(h))])))]))):k==="all"?(a=this.getGenderImage(j),d=b("React").createElement("span",{className:"_2dco"},i._("{=} have the highest view rate for this video",[i._param("=",b("React").createElement("span",{className:"_2dcn"},i._({"Men":"Men","Women":"Women"},[i._enum(j,{Men:"Men",Women:"Women"})])))]))):(a=this.getGenderImage(j),d=b("React").createElement("span",{className:"_2dco"},i._("{=ages [age range]} have the highest view rate for this video",[i._param("=ages [age range]",b("React").createElement("span",{className:"_2dcn"},i._({"People":"People ages {age range}","Men":"Men ages {age range}","Women":"Women ages {age range}"},[i._enum(j,{People:"People",Men:"Men",Women:"Women"}),i._param("age range",k)])))])));break;case b("PagePostFooterInsightsMessageType").ENGAGEMENT_RATE:h=f.content.engagement_rate;j=f.content.age;k=this.formatGender(f.content.gender);j==="all"&&k==="People"?(a=g("114131"),d=b("React").createElement("span",{className:"_2dco"},i._("{=[percentage] of your audience} engaged with this video",[i._param("=[percentage] of your audience",b("React").createElement("span",{className:"_2dcn"},i._("{percentage} of your audience",[i._param("percentage",b("InsightsFormatters").percentageFormatter(h))])))]))):j==="all"?(a=this.getGenderImage(k),d=b("React").createElement("span",{className:"_2dco"},i._("{=} have the highest engagement rate for this video",[i._param("=",b("React").createElement("span",{className:"_2dcn"},i._({"Men":"Men","Women":"Women"},[i._enum(k,{Men:"Men",Women:"Women"})])))]))):k==="People"?(a=this.getGenderImage(k),d=b("React").createElement("span",{className:"_2dco"},i._("{=People ages[age range]} have the highest engagement rate for this video",[i._param("=People ages[age range]",b("React").createElement("span",{className:"_2dcn"},i._("People ages {age range}",[i._param("age range",j)])))]))):(a=this.getGenderImage(k),d=b("React").createElement("span",{className:"_2dco"},i._("{=ages[top engagement age]} have the highest engagement rate for this video",[i._param("=ages[top engagement age]",b("React").createElement("span",{className:"_2dcn"},i._({"People":"People ages {top engagement age}","Men":"Men ages {top engagement age}","Women":"Women ages {top engagement age}"},[i._enum(k,{People:"People",Men:"Men",Women:"Women"}),i._param("top engagement age",j)])))])));break;case b("PagePostFooterInsightsMessageType").LINK_CLICKS:h=f.content.link_clicks;a=g("647974");d=b("React").createElement("span",{className:"_2dcn"},i._("{number of link clicks} link clicks",[i._param("number of link clicks",b("intlNumUtils").formatNumberWithThousandDelimiters(h))]));break;case b("PagePostFooterInsightsMessageType").HIGHLIGHTED_SHARES:k=f.content.top_sharer;j=f.content.views_on_shared_video;h=f.content.is_verified;a=g("484394");d=b("React").createElement("span",{className:"_2dco"},h?b("React").createElement("div",{className:"_56_f _5dzy _5dz_ _3twv badge"}):null,i._({"*":"{=[top_sharer]'s share} contributed {views on shared video} views to this post","_1":"{=[top_sharer]'s share} contributed 1 views to this post"},[i._param("=[top_sharer]'s share",b("React").createElement("span",{className:"_2dcn"},i._("{top_sharer}'s share",[i._param("top_sharer",k)]))),i._plural(j,"views on shared video",b("intlNumUtils").formatNumberWithThousandDelimiters(j))]));break;default:return null}}this.props.should_linkify_footer&&(d=b("React").createElement(b("Link.react"),null,d));e=b("React").createElement("div",{className:"_fk8"},b("React").createElement("span",null,b("React").createElement(b("Image.react"),{src:a})),b("React").createElement("span",{className:"_2dc6"},d));return b("React").createElement("div",{onClick:this._onFooterBarClick,role:"presentation"},b("React").createElement("div",{className:"__ji"},e),c)}});e.exports=c}),null);