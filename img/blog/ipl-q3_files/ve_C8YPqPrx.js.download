if (self.CavalryLogger) { CavalryLogger.start_js(["B6Zqf"]); }

__d("AdsImageLoadNextPageDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsImageAction.LOAD_NEXT_PAGE");e.exports=a}),null);
__d("AdsInstagramAccountPageLinkAccountDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"AdsInstagramAccounts.PAGE.LINK_ACCOUNT");e.exports=a}),null);
__d("AdsShutterstockEndReachedDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"SHUTTERSTOCK.END_REACHED");e.exports=a}),null);
__d("AdsShutterstockEndReachedDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"SHUTTERSTOCK.END_REACHED"}}),null);
__d("AdsShutterstockSearchResultsErrorDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"SHUTTERSTOCK.SEARCH_RESULTS_ERROR");e.exports=a}),null);
__d("AdsShutterstockSearchResultsErrorDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"SHUTTERSTOCK.SEARCH_RESULTS_ERROR"}}),null);
__d("AdsShutterstockSearchResultsLoadedDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"SHUTTERSTOCK.SEARCH_RESULTS_LOADED");e.exports=a}),null);
__d("AdsShutterstockSearchResultsLoadedDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"SHUTTERSTOCK.SEARCH_RESULTS_LOADED"}}),null);
__d("AdsShutterstockSearchTextChangedDataAction",["Laminar"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[]},function(){return[]},"SHUTTERSTOCK.SEARCH_TEXT_CHANGED");e.exports=a}),null);
__d("AdsShutterstockSearchTextChangedDataActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"SHUTTERSTOCK.SEARCH_TEXT_CHANGED"}}),null);
__d("AdsImageSecondaryActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({X:null});e.exports=a}),null);
__d("AdsMediaPanelMessage.react",["cx","Image.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=b("joinClasses")("_3suv",a.className);return b("React").createElement("div",{className:c,style:a.style},b("React").createElement("div",{className:"_5y4t"},b("React").createElement(b("Image.react"),{src:a.icon}),b("React").createElement("div",{className:"_5y4u"},b("React").createElement("div",null,a.title),b("React").createElement("div",null,a.subtitle))))}e.exports=a}),null);
__d("AdsMediaPanelPageLinkInstagramAccountUnit.react",["cx","fbt","ix","ActionList.react","AdsCCCardComponent.react","AdsCCCategory","AdsCCCategoryConfig","AdsCCContentComponent.react","AdsCCLogContext.react","AdsCCSingleCardComponent.react","AdsContentCardMigrationUtils","AdsImageLegacy","AdsInstagramAccountPageLinkAccountDataAction","AdsLoadState_LEGACY","AdsMediaLibrary.react","CenteredContainer.react","FDSSpinner.react","Grid.react","Image.react","Link.react","React","ScrollableArea.react","SUIBusinessTheme","SUIText.react","XPagesManagerSettingsController","XUIButton.react","XUITextInput.react","PageSettingsRef"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("AdsCCCategoryConfig").CardLayout,k=b("AdsContentCardMigrationUtils").getErrorHeader,l=b("Grid.react").GridItem;a=b("React").PropTypes;var m=30,n=32,o=36,p="https://instagram.com/accounts/password/reset/",q="https://www.facebook.com/business/help/898752960195806";c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={password:"",username:""},d.$9=function(a){d.setState({password:a.target.value})},d.$8=function(a){d.setState({username:a.target.value})},d.$10=function(){d.props.pageID!=null&&d.props.pageID!==""&&b("AdsInstagramAccountPageLinkAccountDataAction").dispatch({data:{pageID:d.props.pageID,password:d.state.password,username:d.state.username}},{line:"382",module:"AdsMediaPanelPageLinkInstagramAccountUnit.react.js"})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){if(this.props.instagramAccount&&this.props.instagramAccount.is_published)return this.$1();else if(this.props.instagramAccountLoadState===b("AdsLoadState_LEGACY").LOADING)return this.$2();else return this.$3()};d.$2=function(){return b("React").createElement(b("ScrollableArea.react"),{height:this.props.totalHeight},this.$4(),b("React").createElement(b("CenteredContainer.react"),{fullHeight:!0,horizontal:!0,vertical:!0},this.$5(),b("React").createElement(b("CenteredContainer.react"),{className:"_hrr",horizontal:!0,vertical:!0},b("React").createElement(b("FDSSpinner.react"),null))))};d.$3=function(){return b("React").createElement(b("ScrollableArea.react"),{height:this.props.totalHeight},this.$4(),b("React").createElement(b("CenteredContainer.react"),{fullHeight:!0,horizontal:!0,vertical:!0},this.$5(),this.props.pageID!=null&&this.props.pageID!==""?this.$6():null))};d.$1=function(){var a=this.$4()?this.props.totalHeight-n-o:this.props.totalHeight-n,c=this.props.instagramAccountLoadState===b("AdsLoadState_LEGACY").LOADING?b("React").createElement(b("FDSSpinner.react"),null):this.$7();return b("React").createElement("div",{style:{height:this.props.totalHeight}},this.$4(),b("React").createElement(b("AdsMediaLibrary.react"),babelHelpers["extends"]({},this.props,{height:a})),b("React").createElement("div",{className:"_hrs"},c))};d.$5=function(){var a=h._("Connect an Instagram Account"),c=null;this.props.instagramAccount?c=h._("Log into Instagram to select images for your Facebook ads. The Instagram account you add will represent your business in your Instagram ads. You can only connect one Instagram account to your Page."):c=b("React").createElement("div",null,h._("Log into an Instagram account to select Instagram images to use in your Facebook ads.")," ",b("React").createElement(b("Link.react"),{href:q,target:"_blank"},h._("Learn more")),".");return b("React").createElement(b("CenteredContainer.react"),{className:"_2pie",horizontal:!0},b("React").createElement(b("Image.react"),{src:i("22909")}),b("React").createElement("div",{className:"_hru"},a),b("React").createElement("div",{className:"_hrx"},c))};d.$6=function(){return b("React").createElement(b("Grid.react"),{className:"_3-8k",cols:2,spacing:"prl pts"},b("React").createElement(l,null,b("React").createElement(b("XUITextInput.react"),{className:"_hry",height:"tall",maxLength:m,placeholder:h._("Username"),value:this.state.username,onChange:this.$8})),b("React").createElement(l,null,b("React").createElement(b("XUITextInput.react"),{className:"_hry",height:"tall",placeholder:h._("Password"),type:"password",value:this.state.password,onChange:this.$9})),b("React").createElement(l,null,b("React").createElement(b("SUIText.react"),{className:"lfloat",size:"meta1",theme:b("SUIBusinessTheme")},b("React").createElement(b("Link.react"),{href:p,target:"_blank"},h._("Forgot password?")))),b("React").createElement(l,null,b("React").createElement(b("XUIButton.react"),{className:"rfloat",disabled:this.state.username===""||this.state.password==="",label:h._("Connect"),use:"confirm",onClick:this.$10})))};d.$7=function(){var a=this.props.instagramAccount?"@"+this.props.instagramAccount.username:"",c;if(this.props.pageID!=null&&this.props.pageID!==""){var d=b("XPagesManagerSettingsController").getURIBuilder().setString("page_token",this.props.pageID).setString("tab","instagram_ads").setString("ref",b("PageSettingsRef").INSTAGRAM_ADS).getURI();c=b("React").createElement(b("SUIText.react"),{size:"meta1",theme:b("SUIBusinessTheme")},b("React").createElement(b("Link.react"),{href:d,target:"_blank"},h._("Edit")))}return b("React").createElement(b("ActionList.react"),{className:"rfloat"},b("React").createElement(b("SUIText.react"),{shade:"dark",size:"meta1",theme:b("SUIBusinessTheme"),weight:"bold"},a),c)};d.$4=function(){var a=this.props.pageLinkOrUnlinkAccountError,c=a.length;if(c===0)return null;if(c===1)return b("React").createElement(b("AdsCCSingleCardComponent.react"),{category:b("AdsCCCategory").ERROR,layout:j.HORIZONTAL,messageID:"editorLoadingError",textData:[{data:{text:a[0]},type:"PARAGRAPH"}]});c=k(c);return b("React").createElement(b("AdsCCLogContext.react"),null,b("React").createElement(b("AdsCCCardComponent.react"),{category:b("AdsCCCategory").ERROR,headerData:{type:"TEXT",data:{text:c}},layout:j.HORIZONTAL,messageID:"pageLinkOrUnlinkAccountError_stack"},a.map(function(a,c){return b("React").createElement(b("AdsCCContentComponent.react"),{key:"pageLinkOrUnlinkAccountError_stack_"+c,messageID:"pageLinkOrUnlinkAccountError_stack_"+c,textData:[{data:{text:a},type:"PARAGRAPH"}]})})))};return c}(b("React").Component);c.propTypes={imageList:a.arrayOf(a.instanceOf(b("AdsImageLegacy"))).isRequired,instagramAccount:a.shape({id:a.string.isRequired,is_published:a.bool.isRequired,profile_pic:a.string.isRequired,username:a.string.isRequired}),instagramAccountLoadState:a.oneOf(Object.keys(b("AdsLoadState_LEGACY"))).isRequired,isClickEnabled:a.bool.isRequired,pageID:a.string,pageLinkOrUnlinkAccountError:a.arrayOf(a.string).isRequired,totalHeight:a.number.isRequired};c.defaultProps={imageList:[],instagramAccount:null,instagramAccountLoadState:b("AdsLoadState_LEGACY").NOT_LOADED,pageLinkOrUnlinkAccountError:[]};e.exports=c}),null);
__d("AdsMediaPanelViewFilterBar.react",["cx","fbt","AdsImageCollectionViews","Link.react","React","SimpleNUXMessage","XUIAmbientNUX.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){if(a.view===b("AdsImageCollectionViews").views.INSTAGRAM&&!d.props.instagramAccountLinked)return b("React").createElement(j,{key:a.view||"ALL",selectedFilter:d.props.viewFilter,showImageCount:!1,viewFilter:a,onViewFilterChoose:d.props.onViewFilterChoose});else return b("React").createElement(i,{key:a.view||"ALL",selectedFilter:d.props.viewFilter,showImageCount:!0,viewFilter:a,onViewFilterChoose:d.props.onViewFilterChoose})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a="_5y6l"+(this.props.useMediaPanelRedesign?" _2wrx":"");if(this.props.availableViewFilters.length===0)return b("React").createElement("div",{className:a});a="_5y6m"+(this.props.useMediaPanelRedesign?" _2wrx":"");return b("React").createElement("div",{className:a},this.props.availableViewFilters.map(this.$1))};return c}(b("React").Component);c.propTypes={availableViewFilters:a.array.isRequired,instagramAccountLinked:a.bool.isRequired,viewFilter:a.object.isRequired,onViewFilterChoose:a.func};var i=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){var a,b;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=b=c.call.apply(c,[this].concat(e))||this,b.$1=function(){b.props.onViewFilterChoose&&b.props.onViewFilterChoose(b.props.viewFilter)},a)||babelHelpers.assertThisInitialized(b)}var d=a.prototype;d.render=function(){var a=this.props.showImageCount?b("React").createElement("span",{className:"_5y6p"},this.props.viewFilter.count):null;return b("React").createElement(b("Link.react"),{className:"_5y6n"+(this.props.viewFilter.view===this.props.selectedFilter.view?" _5y6o":""),onClick:this.$1},b("React").createElement("span",null,b("React").createElement("span",null,this.props.viewFilter.text),a))};return a}(b("React").Component),j=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){var a,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(a=d=c.call.apply(c,[this].concat(f))||this,d.state={nuxShown:!b("SimpleNUXMessage").hasUserSeenMessage("1109521299111498")},d.renderLayers=function(){return b("React").createElement(b("XUIAmbientNUX.react"),{contextRef:d.$1,position:"above",shown:d.state.nuxShown,onCloseButtonClick:d.$2,key:"nux_above"},h._("Connect an Instagram account to use its photos in your ads."))},d.$1=function(){return d.refs.instagram_view_filter},d.$2=function(){b("SimpleNUXMessage").markMessageSeenByUser("1109521299111498"),d.setState({nuxShown:!1})},a)||babelHelpers.assertThisInitialized(d)}var d=a.prototype;d.render=function(){return b("React").createElement("span",null,b("React").createElement(i,babelHelpers["extends"]({},this.props,{ref:"instagram_view_filter"})),this.renderLayers())};return a}(b("React").Component);e.exports=c}),null);
__d("AdsMediaPanelViewFilters",["fbt","AdsImageCollectionViews"],(function(a,b,c,d,e,f,g){"use strict";a=[{view:b("AdsImageCollectionViews").views.LIBRARY,text:g._("Ad Images")},{view:b("AdsImageCollectionViews").views.INSTAGRAM,text:g._("Instagram Images")},{view:b("AdsImageCollectionViews").views.PAGE,text:g._("Page Images")},{view:b("AdsImageCollectionViews").views.SCRAPED,text:g._("Website Images")}];var h=0;a.forEach(function(a){h|=a.view});c={view:h,text:g._("All")};a.unshift(c);e.exports={filters:a,all:c}}),null);
__d("AdsShutterstockSearchLoader",["AdsGraphAPI"],(function(a,b,c,d,e,f){"use strict";var g=25;a={loadSearchResults:function(a,c){return c?c():b("AdsGraphAPI").get(e.id).search("adstockimage").get({limit:g,locale:"user",q:a})}};e.exports=a}),null);
__d("AdsShutterstockSearchDispatcher",["AdsImageLegacy","AdsShutterstockSearchLoader","AdsShutterstockSearchResultsErrorDataAction","AdsShutterstockSearchResultsLoadedDataAction","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={convertStockImages:function(a){return a.map(function(a){return new(b("AdsImageLegacy"))({previewHeight:a.preview.height,previewUrl:a.preview.url,previewWidth:a.preview.width,stockImageID:a.id,thumbHeight:a.thumbnail.height,thumbWidth:a.thumbnail.width,url:a.thumbnail.url})})},loadSearchResults:function(a,c){var d=this,e=Date.now();b("promiseDone")(b("AdsShutterstockSearchLoader").loadSearchResults(a,c),function(c){var f=Date.now();f=f-e;var g={images:d.convertStockImages(c.data),next:null};c.next&&(g.next=c.next.bind(c));b("AdsShutterstockSearchResultsLoadedDataAction").dispatch({data:{query:a,results:g,duration:f}},{line:"68",module:"AdsShutterstockSearchDispatcher.js"})},function(c){b("AdsShutterstockSearchResultsErrorDataAction").dispatch({data:{error:c,query:a}},{line:"77",module:"AdsShutterstockSearchDispatcher.js"})})}};e.exports=a}),null);
__d("AdsShutterstockSearchStore",["AdsDataAtom","AdsShutterstockSearchDispatcher","AdsShutterstockSearchResultsErrorDataActionFlux","AdsShutterstockSearchResultsLoadedDataActionFlux","FluxStore","LoadObject","gkx","immutable","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("gkx")("779516");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("AdsDataAtom"))||this;c.$AdsShutterstockSearchStoreClass1=new Map();c.$AdsShutterstockSearchStoreClass2=new Map();return c}var d=c.prototype;d.__getActionTypes=function(){return g?[b("AdsShutterstockSearchResultsErrorDataActionFlux").actionType,b("AdsShutterstockSearchResultsLoadedDataActionFlux").actionType]:null};d.__onDispatch=function(a){__p&&__p();a=a.action;switch(a.type){case b("AdsShutterstockSearchResultsLoadedDataActionFlux").actionType:var c=this.$AdsShutterstockSearchStoreClass1.get(a.data.query),d=null;c&&c.hasValue()?d=c.getValueEnforcing().images.concat(a.data.results.images):d=b("immutable").OrderedSet(a.data.results.images);this.$AdsShutterstockSearchStoreClass3(a.data.results.images);this.$AdsShutterstockSearchStoreClass1.set(a.data.query,c.setValue(babelHelpers["extends"]({},a.data.results,{images:d})).done());this.__emitChange();break;case b("AdsShutterstockSearchResultsErrorDataActionFlux").actionType:this.$AdsShutterstockSearchStoreClass1.set(a.data.query,this.$AdsShutterstockSearchStoreClass1.get(a.data.query).setError(a.data.error).done());this.__emitChange();break}};d.$AdsShutterstockSearchStoreClass3=function(a){var c=this;a.forEach(function(a){var d=b("nullthrows")(a.getStockImageID());c.$AdsShutterstockSearchStoreClass2.set(d,a)})};d.getSearchResults=function(a,c){var d=this.$AdsShutterstockSearchStoreClass1.get(a);if(!d)d=b("LoadObject").loading(),this.$AdsShutterstockSearchStoreClass1.set(a,d),b("AdsShutterstockSearchDispatcher").loadSearchResults(a);else if(d&&d.hasValue()&&!d.hasOperation()&&d.getValueEnforcing().images.size<=c){c=d.getValueEnforcing().next;c&&(d=d.loading(),this.$AdsShutterstockSearchStoreClass1.set(a,d),b("AdsShutterstockSearchDispatcher").loadSearchResults(a,c))}return d};d.getShutterstockImageByID=function(a){return this.$AdsShutterstockSearchStoreClass2.get(a)};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("AdsShutterstockViewStore",["AdsDataAtom","AdsShutterstockEndReachedDataActionFlux","AdsShutterstockSearchDoneDataActionFlux","AdsShutterstockSearchTextChangedDataActionFlux","FluxStore","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("gkx")("779516");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("AdsDataAtom"))||this;c.$AdsShutterstockViewStoreClass3=new Map();return c}var d=c.prototype;d.__getActionTypes=function(){return g?[b("AdsShutterstockEndReachedDataActionFlux").actionType,b("AdsShutterstockSearchDoneDataActionFlux").actionType,b("AdsShutterstockSearchTextChangedDataActionFlux").actionType]:null};d.__onDispatch=function(a){__p&&__p();a=a.action;switch(a.type){case b("AdsShutterstockSearchTextChangedDataActionFlux").actionType:this.$AdsShutterstockViewStoreClass1=a.data.searchText;this.__emitChange();break;case b("AdsShutterstockSearchDoneDataActionFlux").actionType:this.$AdsShutterstockViewStoreClass2=a.data.searchText;this.$AdsShutterstockViewStoreClass3.get(this.$AdsShutterstockViewStoreClass2)||this.$AdsShutterstockViewStoreClass3.set(this.$AdsShutterstockViewStoreClass2,1);this.__emitChange();break;case b("AdsShutterstockEndReachedDataActionFlux").actionType:var c=this.$AdsShutterstockViewStoreClass3.get(a.data.searchText);c!=null&&c>0?this.$AdsShutterstockViewStoreClass3.set(a.data.searchText,2):this.$AdsShutterstockViewStoreClass3.set(a.data.searchText,c+1);this.__emitChange();break}};d.getNumPagesForQuery=function(a){a=this.$AdsShutterstockViewStoreClass3.get(a);return a||0};d.getCurrentText=function(){return this.$AdsShutterstockViewStoreClass1};d.getDelayedText=function(){return this.$AdsShutterstockViewStoreClass2};d.isTyping=function(){var a=this.$AdsShutterstockViewStoreClass1!==null&&this.$AdsShutterstockViewStoreClass1!==void 0;return a&&this.$AdsShutterstockViewStoreClass1!==this.$AdsShutterstockViewStoreClass2};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("AdsShutterstockLibrary.react",["cx","fbt","ix","AdsFluxContainer","AdsMediaLibrary.react","AdsMediaPanelInfiniteScrollFooter.react","AdsMediaPanelMessage.react","AdsShutterstockEndReachedDataAction","AdsShutterstockSearchBar.react","AdsShutterstockSearchDoneDataAction","AdsShutterstockSearchStore","AdsShutterstockSearchTextChangedDataAction","AdsShutterstockUseGuidelines.react","AdsShutterstockViewStore","React","ShutterstockApiStatus","adsFormatErrorMessage","debounce","keyMirror","setImmediate"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=b("React").PropTypes;var j=25,k=b("keyMirror")({ERROR:null,HAS_MORE:null,LOADING_INITIAL:null,LOADING_MORE:null,NO_MORE_RESULTS:null,NO_REQUEST:null,NO_RESULTS:null}),l=b("debounce")(function(a){return b("AdsShutterstockSearchDoneDataAction").dispatch({data:{searchText:a}},{line:"55",module:"AdsShutterstockLibrary.react.js"})},200);c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$4=function(){var a=d.$2();a=a.state;a===k.HAS_MORE&&b("setImmediate")(function(){return b("AdsShutterstockEndReachedDataAction").dispatch({data:{searchText:d.state.query}},{line:"312",module:"AdsShutterstockLibrary.react.js"})})},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("AdsShutterstockSearchStore"),b("AdsShutterstockViewStore")]};c.calculateState=function(a,c){a=b("AdsShutterstockViewStore").getDelayedText()||c.defaultSearchText;c=b("AdsShutterstockViewStore").getNumPagesForQuery(a)||1;var d=null;a&&(d=b("AdsShutterstockSearchStore").getSearchResults(a,j*c));return{currentSearchText:b("AdsShutterstockViewStore").getCurrentText(),isTyping:b("AdsShutterstockViewStore").isTyping(),query:a,results:d}};var d=c.prototype;d.$1=function(a,c,d){return b("React").createElement(b("AdsMediaPanelMessage.react"),{icon:a,style:{height:this.props.imageContainerHeight},subtitle:c,title:d})};d.$2=function(){var a=this.state.results,b,c=[];!a?this.state.isTyping?b=k.LOADING_INITIAL:b=k.NO_REQUEST:a.hasError()?b=k.ERROR:!a.hasValue()?b=k.LOADING_INITIAL:!a.getValueEnforcing().next?(c=a.getValueEnforcing().images.toArray(),c.length===0?b=k.NO_RESULTS:b=k.NO_MORE_RESULTS):(c=a.getValueEnforcing().images.toArray(),a.hasOperation()?b=k.LOADING_MORE:b=k.HAS_MORE);return{state:b,imageList:c}};d.$3=function(){__p&&__p();var a=this.$2(),c=a.state;a=a.imageList;switch(c){case k.NO_REQUEST:return this.$1(i("22542"),h._("Any images you select will be saved in your image library."),h._("Search for professional images to use in your ads."));case k.NO_RESULTS:return this.$1(i("22544"),h._("Try using other keywords."),h._("There aren't any images that match what you searched."));case k.ERROR:return this.$1(i("22544"),null,h._("An error occurred while searching for stock images: {error message}",[h._param("error message",b("adsFormatErrorMessage")(this.state.results.error))]));default:var d=c===k.HAS_MORE||c===k.LOADING_MORE;d=b("React").createElement(b("AdsMediaPanelInfiniteScrollFooter.react"),{fetchingNextPage:d,imagesLoaded:c!==k.LOADING_INITIAL});c=c===k.LOADING_INITIAL||this.state.isTyping;return b("React").createElement(b("AdsMediaLibrary.react"),{disableTooSmallImages:this.props.disableTooSmallImages,height:this.props.imageContainerHeight,imageList:a,imageSpec:this.props.imageSpec,isClickEnabled:this.props.isClickEnabled,isLoadingInitial:c,scrollingAreaFooter:d,selectedImageList:this.props.selectedImageList,onEndReached:this.$4,onImageClick:this.props.onImageClick},b("React").createElement(b("AdsShutterstockUseGuidelines.react"),{className:"_3cl1",dialogPosition:"left"}))}};d.render=function(){return!b("ShutterstockApiStatus").available?b("React").createElement(b("AdsMediaPanelMessage.react"),{className:this.props.className,icon:i("22544"),style:{height:this.props.imageContainerHeight},subtitle:h._("Please try again later."),title:h._("Sorry, stock images aren't available right now.")}):b("React").createElement("div",{className:this.props.className},b("React").createElement(b("AdsShutterstockSearchBar.react"),{searchText:this.state.currentSearchText,onTextChange:this.$5}),this.$3())};d.$5=function(a){b("AdsShutterstockSearchTextChangedDataAction").dispatch({data:{searchText:a}},{line:"320",module:"AdsShutterstockLibrary.react.js"}),l(a)};return c}(b("React").PureComponent);c.defaultProps={disableTooSmallImages:!1,isClickEnabled:!0,selectedImageList:[]};c.propTypes={defaultSearchText:a.string,disableTooSmallImages:a.bool,imageContainerHeight:a.number.isRequired,imageSpec:a.shape({minWarningWidth:a.number.isRequired,minWarningHeight:a.number.isRequired}),isClickEnabled:a.bool.isRequired,selectedImageList:a.array.isRequired,onImageClick:a.func.isRequired};e.exports=b("AdsFluxContainer").create(c,{withProps:!0,name:e.id})}),null);
__d("AdsMediaPanel.react",["cx","fbt","ix","Promise","AdsArrowedCarouselEnhanced.react","AdsEditInlinePostWarning.react","AdsFluxContainer","AdsImageCollectionViews","AdsImageDimensionDataLoader","AdsImageLoadNextPageDataAction","AdsImageSecondaryActionTypes","AdsImageStore","AdsImageUploadRemoveErrorsDataAction","AdsImageValidation","AdsMediaLibrary.react","AdsMediaPanelFilters","AdsMediaPanelHeader.react","AdsMediaPanelImageBox.react","AdsMediaPanelInfiniteScrollFooter.react","AdsMediaPanelMessage.react","AdsMediaPanelPageLinkInstagramAccountUnit.react","AdsMediaPanelTabs","AdsMediaPanelViewFilterBar.react","AdsMediaPanelViewFilters","AdsShutterstockLibrary.react","BootloadedComponent.react","Event","FDSSpinner.react","JSResource","React","ReactDOM","SUIThemeContainer.react","emptyFunction","getViewportDimensions","joinClasses","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=49,k=25,l=84,m=144,n=215,o=332,p=658,q=523,r=100,s=60,t=60,u=50,v=0,w=12,x=0,y=0,z=100,A=80,B=(a={},a[b("AdsMediaPanelTabs").UPLOAD]={className:"_5xhy",title:h._("Upload Images"),renderer:"_renderUploadTab"},a[b("AdsMediaPanelTabs").LIBRARY]={className:"_5xh-",title:h._("Image Library"),renderer:"_renderLibraryTab"},a[b("AdsMediaPanelTabs").STOCK]={className:"_5xh_",title:h._("Stock Images"),renderer:"_renderStockTab"},a);c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={canFetchNextLibraryPage:!1,fetchingNextLibraryPage:!1,filterSet:null,multiImageRowHeight:0,selectedTab:d.props.initialSelectedTab||b("AdsMediaPanelTabs").LIBRARY,uploadedImages:[],viewFilter:b("AdsMediaPanelViewFilters").all},d.$8=function(a){d.setState({selectedTab:a}),d.props.onTabSwitch(a)},d.$14=function(a){__p&&__p();b("promiseDone")(b("Promise").all(a.map(function(a){return b("AdsImageDimensionDataLoader").getDimensionByURL(b("nullthrows")(a.getUrl())).then(function(b){var c=b.width;b=b.height;return a.clone({width:c,height:b})})})),function(a){d.props.uploadHandlers.onEnd&&d.props.uploadHandlers.onEnd(a);if(!a.length)return;var c=d.state.uploadedImages||[],e=d.$15(c,a);c=c.concat(e);d.setState({uploadedImages:c});d.props.maxSelectedImages===1&&d.setState({selectedTab:b("AdsMediaPanelTabs").LIBRARY,filterSet:null},function(){return d.scrollToImage(a[0])})})},d.$17=function(){d.state.canFetchNextLibraryPage&&!d.state.fetchingNextLibraryPage&&b("AdsImageLoadNextPageDataAction").dispatch({accountID:d.props.accountID},{line:"727",module:"AdsMediaPanel.react.js"})},d.$20=function(a){if(a.view===d.state.viewFilter.view)return;d.setState({viewFilter:a})},d.$19=function(a){d.setState({filterSet:a})},d.$21=function(a){d.props.imageCollection.addImagesToBack_UNSAFE([a],b("AdsImageCollectionViews").views.STOCK);var c=d.props.imageHandlers.onClick;c&&c.call(d.props.imageHandlers,a)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("AdsImageStore")]};c.calculateState=function(a,c){return babelHelpers["extends"]({},a,{canFetchNextLibraryPage:b("AdsImageStore").hasCursorForNextPage(c.accountID),fetchingNextLibraryPage:b("AdsImageStore").isFetchingNextPage(c.accountID)})};var d=c.prototype;d.UNSAFE_componentWillMount=function(){var a=this;this.$2(b("Event").listen(window,"resize",function(){return a.forceUpdate()}))};d.componentWillUnmount=function(){this.$3(),this.$2(null)};d.componentDidMount=function(){this.$4()};d.componentDidUpdate=function(){this.$4()};d.$5=function(){var a=this.props.useMediaPanelRedesign?l:m,c=0,d=0,e=0;this.props.useMediaPanelRedesign?(c=j+k,this.props.maxSelectedImages>1&&(c+=a),d=n+c,e=q):(d=n+j,e=o+j,c=p-e);a=b("getViewportDimensions")().height;a=a-r-c;return Math.max(d,Math.min(e,a))};d.$3=function(){var a=this;a.$1!=null&&a.$1.remove()};d.$2=function(a){var b=this;b.$1=a};d.$6=function(a){return this.props.tabKeys.indexOf(a)!==-1};d.$7=function(){var a=this,c=this.state.multiImageRowHeight===0?0:this.state.multiImageRowHeight/z,d=null;if(this.props.maxSelectedImages>1){var e=this.props.selectedImageList.map(function(d,e){return b("React").createElement(b("AdsMediaPanelImageBox.react"),{alt:h._("Selected Image {number} of {total}",[h._param("number",e+1),h._param("total",a.props.selectedImageList.length)]),buyingTypes:a.props.buyingTypes,className:"_16es",decoration:"removable",image:d,imageSpec:a.props.imageSpec,key:d.getUniqueIdentifier(),scaleImageFactor:c,useMediaPanelRedesign:a.props.useMediaPanelRedesign,onDecorationIconClick:a.props.imageHandlers.onSecondaryAction&&a.props.imageHandlers.onSecondaryAction.bind(null,d,b("AdsImageSecondaryActionTypes").X)})}),f="_16et _5xi2"+(this.props.useMediaPanelRedesign?" _2xcc":"")+" clearfix";d=b("React").createElement("div",{className:f,"data-testid":"selected-image-panel"},b("React").createElement("div",{className:"_16eu"},b("React").createElement("h2",{className:"_5xht"},h._("Selected Images")),b("React").createElement("span",{className:"_5xi4"},h._({"*":{"*":"({images} of {max-images})"}},[h._param("images",this.props.selectedImageList.length,[0]),h._param("max-images",this.props.maxSelectedImages,[0])]))),b("React").createElement("div",{className:"_3k2_",ref:"selectedImagesCarouselContainer"},b("React").createElement(b("AdsArrowedCarouselEnhanced.react"),{maxChangeAmount:6},e)))}return d};d.render=function(){B[b("AdsMediaPanelTabs").UPLOAD].title=h._({"*":"Upload Images","_1":"Upload Image"},[h._plural(this.props.maxSelectedImages)]);var a=this.props.tabKeys.map(function(a){return{tabKey:a,className:B[a].className,title:B[a].title}});a=b("React").createElement("div",{"data-testid":"image-library"},b("React").createElement(b("AdsMediaPanelHeader.react"),{selectedTab:this.state.selectedTab,tabConfigs:a,useMediaPanelRedesign:this.props.useMediaPanelRedesign,onTabSwitch:this.$8}),this.$9(),this.$10(),this.$7());if(this.props.theme)return b("React").createElement(b("SUIThemeContainer.react"),{theme:this.props.theme},a);else return a};d.$10=function(){return b("React").createElement(b("AdsEditInlinePostWarning.react"),{className:"_5zio",message:this.props.adEditWarningMessage})};d.$9=function(){var a=B[this.state.selectedTab],c=b("joinClasses")(a.className,"_5xhx _5xhw");switch(a.renderer){case"_renderUploadTab":return this.$11(this.state.selectedTab,c);case"_renderLibraryTab":return this.$12(this.state.selectedTab,c);case"_renderStockTab":return this.$13(this.state.selectedTab,c)}return null};d.$11=function(a,c){b("AdsImageUploadRemoveErrorsDataAction").dispatch({},{line:"559",module:"AdsMediaPanel.react.js"});var d=b("React").createElement("div",{className:"_2z5_"},b("React").createElement(b("FDSSpinner.react"),null));return b("React").createElement("div",{className:c,key:a},b("React").createElement(b("BootloadedComponent.react"),{accountId:this.props.accountID,allowMultiImage:this.props.allowMultiImage||this.props.maxSelectedImages>1,bootloadLoader:b("JSResource")("AdsUploadImageBox.react").__setRef("AdsMediaPanel.react"),bootloadPlaceholder:d,height:this.$5(),imageSpec:this.props.imageSpec,useMediaPanelRedesign:this.props.useMediaPanelRedesign,validateImageFormat:this.props.validateImageFormat,validateImageSize:this.props.validateImageSize,onUploadClick:this.props.uploadHandlers.onClick,onUploadEnd:this.$14,onUploadFail:this.props.uploadHandlers.onFail,onUploadStart:this.props.uploadHandlers.onStart,onUploadSuccess:this.props.uploadHandlers.onSuccess}))};d.$16=function(a){__p&&__p();var c=this.props,d=c.igSpecificImageSpec,e=c.imageSpec;c=this.state.uploadedImages;a=this.$15(c,a);var f=new Map();a.forEach(function(a,b){return f.set(a,b)});a=a.sort(function(a,c){var g=0,h=0;d&&(g+=b("AdsImageValidation").isWarningSize(a,d)?1:0,h+=b("AdsImageValidation").isWarningSize(c,d)?1:0);g+=e&&b("AdsImageValidation").isWarningSize(a,e)?1:0;h+=e&&b("AdsImageValidation").isWarningSize(c,e)?1:0;if(g>h)return-1;else if(g<h)return 1;else return b("nullthrows")(f.get(a))-b("nullthrows")(f.get(c))});return c?c.concat(a):a};d.$15=function(a,b){if(!a)return b;var c=new Set();a.forEach(function(a){return c.add(a.getUniqueIdentifier())});return b.filter(function(a){return!c.has(a.getUniqueIdentifier())})};d.$18=function(){return this.props.maxSelectedImages===1||this.props.selectedImageList.length<this.props.maxSelectedImages};d.$12=function(a,c){__p&&__p();var d=this,e=this.props.imageCollection,f=e.getImageCount(this.state.viewFilter.view),g=e.getImages(this.state.viewFilter.view);this.props.disableTooSmallImages&&(g=this.$16(g));this.props.filters!=null&&this.state.filterSet!=null&&(g=b("AdsMediaPanelFilters").applyImageFilters(g,this.state.filterSet));var k=this.$17,l=null;(this.state.fetchingNextLibraryPage||!this.state.canFetchNextLibraryPage)&&(l=b("React").createElement(b("AdsMediaPanelInfiniteScrollFooter.react"),{fetchingNextPage:this.state.fetchingNextLibraryPage,imagesLoaded:this.props.userImagesLoaded}));this.state.viewFilter.view===b("AdsImageCollectionViews").views.PAGE&&(l=b("React").createElement(b("AdsMediaPanelInfiniteScrollFooter.react"),{fetchingNextPage:this.props.pageFetchingNextPage,imagesLoaded:this.props.pageImagesLoaded}),k=this.props.pageOnEndReached);var m=null;this.props.useMediaPanelRedesign?m={containerPadding:x,maxImageHeight:z,minImageHeight:A,minImageWidth:v,marginPerImage:y}:m={containerPadding:s,maxImageHeight:t,minImageHeight:u,minImageWidth:v,marginPerImage:w};var n=this.$5()-j,o;if(this.state.viewFilter.view===b("AdsImageCollectionViews").views.INSTAGRAM)o=b("React").createElement(b("AdsMediaPanelPageLinkInstagramAccountUnit.react"),babelHelpers["extends"]({},this.props,{imageList:g,isClickEnabled:this.$18(),isLoadingInitial:!this.props.userImagesLoaded,photoArrangeConstraints:m,photoArrangeEnabled:!0,ref:"imageLib",scrollingAreaFooter:l,totalHeight:n,onEndReached:k,onImageClick:this.props.imageHandlers.onClick,onImageDoubleClick:this.props.imageHandlers.onDoubleClick}));else if(f>0||!this.props.userImagesLoaded)o=b("React").createElement(b("AdsMediaLibrary.react"),{buyingTypes:this.props.buyingTypes,disableTooSmallImages:this.props.disableTooSmallImages,height:n,igSpecificImageSpec:this.props.igSpecificImageSpec,imageList:g,imageSpec:this.props.imageSpec,isClickEnabled:this.$18(),isLoadingInitial:!this.props.userImagesLoaded,key:a,photoArrangeConstraints:m,photoArrangeEnabled:!0,ref:"imageLib",scrollingAreaFooter:l,selectedImageList:this.props.selectedImageList,useMediaPanelRedesign:this.props.useMediaPanelRedesign,onEndReached:k,onImageClick:this.props.imageHandlers.onClick,onImageDoubleClick:this.props.imageHandlers.onDoubleClick});else{f=this.$6(b("AdsMediaPanelTabs").STOCK)?h._("Upload images or try using professional stock images at no extra cost."):h._("Upload images to use them for your ads.");o=b("React").createElement(b("AdsMediaPanelMessage.react"),{className:c,icon:i("22542"),style:{height:String(n)+"px"},subtitle:f,title:h._("There aren't any images in your library.")})}g=b("AdsMediaPanelViewFilters").filters.map(function(a){return babelHelpers["extends"]({},a,{count:e.getImageCount(a.view)})}).filter(function(a){return a.view!==b("AdsImageCollectionViews").views.INSTAGRAM&&a.count!=null&&a.count>0||a.view===b("AdsImageCollectionViews").views.INSTAGRAM&&d.props.useInstagramImageCreative});a=this.props.filters!=null?b("React").createElement("div",{className:"_5y6m"+(this.props.useMediaPanelRedesign?" _2wrx":"")},b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("AdsMediaPanelFilterBar.react").__setRef("AdsMediaPanel.react"),bootloadPlaceholder:b("React").createElement(b("FDSSpinner.react"),null),filterSet:this.state.filterSet,mediaType:"image",onChange:this.$19})):null;return b("React").createElement("div",{className:c},b("React").createElement(b("AdsMediaPanelViewFilterBar.react"),{availableViewFilters:g,instagramAccountLinked:!!this.props.instagramAccount&&this.props.instagramAccount.is_published,useMediaPanelRedesign:this.props.useMediaPanelRedesign,viewFilter:this.state.viewFilter,onViewFilterChoose:this.$20}),a,o)};d.$13=function(a,c){return b("React").createElement(b("AdsShutterstockLibrary.react"),{className:c,defaultSearchText:this.props.defaultStockSearchText,disableTooSmallImages:this.props.disableTooSmallImages,imageContainerHeight:this.$5()-j,imageSpec:this.props.imageSpec,isClickEnabled:this.$18(),key:a,selectedImageList:this.props.selectedImageList,onImageClick:this.$21})};d.$4=function(){if(this.props.maxSelectedImages>1){var a=b("ReactDOM").findDOMNode(this.refs.selectedImagesCarouselContainer);this.setState({multiImageRowHeight:a.offsetHeight})}};d.scrollToImage=function(a){this.refs.imageLib.scrollToImage(a)};return c}(b("React").Component);c.defaultProps={adEditWarningMessage:null,allowMultiImage:!1,defaultStockSearchText:"",disableTooSmallImages:!1,imageHandlers:{onClick:b("emptyFunction"),onDoubleClick:b("emptyFunction"),onSecondaryAction:b("emptyFunction")},maxSelectedImages:1,onTabSwitch:b("emptyFunction"),pageFetchingNextPage:!1,pageImagesLoaded:!0,pageOnEndReached:b("emptyFunction"),selectedImageList:[],uploadHandlers:{},useMediaPanelRedesign:!1,userImagesLoaded:!0,validateImageFormat:!0,validateImageSize:!0};e.exports=b("AdsFluxContainer").create(c,{withProps:!0,name:e.id})}),null);
__d("AdsImageDialog.react",["cx","invariant","Promise","AdImageSpecsUtils","AdsImageCollection","AdsImageCollectionViews","AdsImageLegacy","AdsImageSecondaryActionTypes","AdsImageUploadStartDataAction","AdsImageUploadUploadSuccessDataAction","AdsMediaPanel.react","AdsMediaPanelTabs","AdsShutterstockImageByIDStore","BUIAdoptionDialogCancelButton.react","BUIAdoptionDialogConfirmButton.react","BUIAdoptionHorizontalLayout.react","LayerFadeOnHide","LayerHideOnEscape","LayerHideOnTransition","LayerRemoveOnHide","React","XUIDialog.react","XUIDialogFooter.react","deepFreezeValue","emptyFunction","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;var i=[b("AdsMediaPanelTabs").UPLOAD,b("AdsMediaPanelTabs").LIBRARY,b("AdsMediaPanelTabs").STOCK],j={LayerFadeOnHide:b("LayerFadeOnHide"),LayerHideOnEscape:b("LayerHideOnEscape"),LayerHideOnTransition:b("LayerHideOnTransition"),LayerRemoveOnHide:b("LayerRemoveOnHide")};c=[];b("deepFreezeValue")(c);var k=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(a){__p&&__p();var d;d=c.call(this,a)||this;d.$7=function(a,c){__p&&__p();var e=d.props.maxSelectedImages,f=q(d.props.accountID,{maxSelectedImages:e});f.setImageSelected(a,!0);var g=d.state.selectedLegacyImageList.concat(a);e=g.length-e;if(e>0){for(var h=0;h<e;h++)f.setImageSelected(a,!1);g=g.slice(e,g.length)}d.setState({selectedLegacyImageList:g,userSelected:!0},c||b("emptyFunction"))};d.$3=function(a,c){c===b("AdsImageSecondaryActionTypes").X&&d.$8(a)};d.$8=function(a){var b=q(d.props.accountID,{maxSelectedImages:d.props.maxSelectedImages});b.setImageSelected(a,!1);b=d.state.selectedLegacyImageList.filter(function(b){return!b.equals(a)});d.setState({selectedLegacyImageList:b,userSelected:!0})};d.$9=function(a){a.forEach(function(a){return delete a.crops}),d.props.maxSelectedImages===1&&(a.length||h(0,5167)),d.props.onSelect(a)};d.$6=function(a){__p&&__p();a&&a.preventDefault();var c=[];if(d.state.userSelected){var e=[];d.state.selectedLegacyImageList.forEach(function(a){a.isStockImage()&&e.push(d.$10(a))});e.length>0&&d.setState({userConfirmed:!0});b("promiseDone")(b("Promise").all(e),function(a){a.reverse(),d.state.selectedLegacyImageList.forEach(function(b){b.isStockImage()?c.push(a.pop()):c.push(b.toJSON())}),d.$9(c)})}};d.$1=function(a){var b=d.state.selectedLegacyImageList.some(function(b){return b.equals(a)});b?d.props.maxSelectedImages>1&&d.$8(a):d.$7(a)};d.$2=function(a){var b=d.props.selectedImages;if(d.props.maxSelectedImages==1&&b.length){b=p(b[0]);if(b&&b.equals(a))return;else b&&d.$7(a,d.$6)}};d.$4=function(a){__p&&__p();a=a.filter(function(a){return!d.state.selectedLegacyImageList.find(function(b){return b.equals(a)})});var c=a.map(function(a){return{hash:a.getAdAccountHash(),url:a.getUrl(),id:a.getID()}});b("AdsImageUploadUploadSuccessDataAction").dispatch({imagesData:{imagesData:c}},{line:"504",module:"AdsImageDialog.react.js"});c=a.map(function(a){return{legacyImage:a,view:b("AdsImageCollectionViews").views.LIBRARY}});m(d.props.accountID,d.props.instagramAccount,c,!1,{maxSelectedImages:d.maxSelectedImages});a.forEach(function(a){return d.$7(a)})};a=a.selectedImages.map(p);d.state={selectedLegacyImageList:a,userConfirmed:!1,userSelected:!1};return d}var d=a.prototype;d.UNSAFE_componentWillMount=function(){l(this.props.accountID,this.props.libraryImages,this.props.instagramAccount,this.props.instagramImages,this.props.pageImages||[],this.state.selectedLegacyImageList||[],{maxSelectedImages:this.props.maxSelectedImages})};d.UNSAFE_componentWillReceiveProps=function(a){var b=a.accountID,c=a.libraryImages,d=a.instagramAccount,e=a.instagramImages,f=a.pageImages;a=a.maxSelectedImages;l(b,c,d,e,f,this.state.selectedLegacyImageList||[],{maxSelectedImages:a})};d.render=function(){var a=b("AdImageSpecsUtils").reduceMinImageSpec(this.props.specs),c=a.imageSpec;a=a.igSpecificImageSpec;var d={onClick:this.$1,onDoubleClick:this.$2,onSecondaryAction:this.$3},e={onEnd:this.$4,onStart:this.$5},f=this.props.maxSelectedImages,g=q(this.props.accountID,{maxSelectedImages:f});return b("React").createElement(b("XUIDialog.react"),{behaviors:j,shown:!0,width:860,onToggle:this.props.onCancel},b("React").createElement(b("AdsMediaPanel.react"),babelHelpers["extends"]({},this.props,{buttonStyle:"done",disableTooSmallImages:!!c,igSpecificImageSpec:a,imageCollection:g,imageHandlers:d,imageSpec:c,initialSelectedTab:this.props.initialTab,instagramAccount:this.props.instagramAccount,maxSelectedImages:f,selectedImageList:this.state.selectedLegacyImageList,stockSearchText:"",tabKeys:this.props.tabKeys||i,uploadHandlers:e})),b("React").createElement(b("XUIDialogFooter.react"),{className:"_5h0r"},b("React").createElement(b("BUIAdoptionHorizontalLayout.react"),null,b("React").createElement(b("BUIAdoptionDialogCancelButton.react"),null),b("React").createElement(b("BUIAdoptionDialogConfirmButton.react"),{"data-testid":"image-dialog-close-button",disabled:!this.state.userSelected||this.state.userConfirmed,use:"confirm",onClick:this.$6}))))};d.$10=function(a){var c=this;return new(b("Promise"))(function(d,e){b("AdsShutterstockImageByIDStore").addLegacyCallback_DONT_USE_IN_NEW_CODE(b("nullthrows")(a.getStockImageID()),function(b){b.hasError()?(c.setState({userConfirmed:!1}),h(0,5168)):b.hasValue()&&d(babelHelpers["extends"]({},a.toJSON(),{url:b.getValueEnforcing().get("preview_url")}))})})};d.$5=function(){b("AdsImageUploadStartDataAction").dispatch({},{line:"485",module:"AdsImageDialog.react.js"})};return a}(b("React").PureComponent);k.propTypes={accountID:a.string.isRequired,allowMultiImage:a.bool,defaultStockSearchText:a.string,initialTab:a.string,instagramAccount:a.object,libraryImages:a.arrayOf(a.shape({url:a.string.isRequired,hash:a.oneOfType([a.string,a.oneOf([null,void 0])])})).isRequired,maxSelectedImages:a.number.isRequired,pageImages:a.arrayOf(a.instanceOf(b("AdsImageLegacy"))),selectedImages:a.arrayOf(a.shape({stockImageID:a.string,url:a.string,hash:a.string}).isRequired).isRequired,specs:a.arrayOf(a.shape({minWarningWidth:a.number.isRequired,minWarningHeight:a.number.isRequired})).isRequired,tabKeys:a.arrayOf(a.string),onCancel:a.func,onSelect:a.func.isRequired};k.defaultProps={defaultStockSearchText:"",initialTab:b("AdsMediaPanelTabs").LIBRARY,instagramAccount:null,instagramImages:[],libraryImages:[],maxSelectedImages:1,onSelect:b("emptyFunction"),pageFetchingNextPage:!1,pageImages:[],pageImagesLoaded:!0,pageOnEndReached:b("emptyFunction"),selectedImages:[],specs:[]};function l(a,c,d,e,f,g,h){__p&&__p();var i=[];c.length&&c.forEach(function(a){i.push({legacyImage:new(b("AdsImageLegacy"))(a),view:b("AdsImageCollectionViews").views.LIBRARY})});e.length&&e.forEach(function(a){i.push({legacyImage:new(b("AdsImageLegacy"))({url:a.url,imageType:"INSTAGRAM"}),view:b("AdsImageCollectionViews").views.INSTAGRAM})});f.length&&f.forEach(function(a){i.push({legacyImage:a,view:b("AdsImageCollectionViews").views.PAGE})});g.length&&g.filter(function(a){return!!a.getAdAccountHash()}).forEach(function(a){i.push({legacyImage:a,view:b("AdsImageCollectionViews").views.LIBRARY})});i.length&&m(a,d,i,!0,h)}function m(a,c,d,e,f){__p&&__p();if(d&&d.length){var g=q(a,f),h=[];f=c?c.id:null;c=o[a];f!==c&&(o[a]=f,g.clearImagesByViewBitmask(b("AdsImageCollectionViews").views.INSTAGRAM));d.forEach(function(a){g.hasImage(a.legacyImage)||h.push(a)});if(h.length){c=[b("AdsImageCollectionViews").views.INSTAGRAM,b("AdsImageCollectionViews").views.LIBRARY,b("AdsImageCollectionViews").views.PAGE];c.map(function(a){var b=h.filter(function(b){return b.view===a}).map(function(a){return a.legacyImage});e?g.addImagesToBack(b,a):g.addImagesToFront(b,a)})}}}var n={},o={};function p(a){if(a)return new(b("AdsImageLegacy"))(a);else return null}function q(a,c){var d=n[a];d||(d=new(b("AdsImageCollection"))(c),n[a]=d);return d}d=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(k,this.props)};return c}(b("React").Component);e.exports=d}),null);
__d("AdsImagePanelNote.react",["cx","fbt","AdsTextOverlayRecommendationNote.react","FDSText.react","List.react","React","suiMargin"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var c=a.fromDynamicCreative;c=c===void 0?!1:c;var d=c?"body3":"meta1",e=b("React").createElement(b("FDSText.react"),{color:"secondary",size:d},h._("Recommended image size: {Image size}",[h._param("Image size",b("React").createElement(b("FDSText.react"),{color:"secondary",size:d,weight:"bold"},h._("{width} \u00d7 {height} pixels",[h._param("width",a.imageSpec.width),h._param("height",a.imageSpec.height)])))])),f=b("React").createElement(b("FDSText.react"),{color:"secondary",size:d},h._("Recommended image ratio: {Image ratio}",[h._param("Image ratio",b("React").createElement(b("FDSText.react"),{color:"secondary",size:d,weight:"bold"},a.imageSpec.displayRatio))])),g=c?b("React").createElement(b("FDSText.react"),{color:"secondary",margin:"_3-96",size:"body3",weight:"bold"},h._("Image Specifications")):b("React").createElement("h4",{className:"_5r0 _3-94"},h._("IMAGE SPECIFICATIONS")),i=c?"_71si":"_5r1 _3-9c";c=c?"_71sj":null;return b("React").createElement("div",{className:(a.embedded?"":"_5qs")+(a.embedded?"":" _3-8o")+(a.embedded?"":" _2ph_")},g,b("React").createElement(b("List.react"),{border:"none",className:i,spacing:"small"},b("React").createElement("li",{className:c},e),b("React").createElement("li",{className:c},f),b("React").createElement("li",{className:c},b("React").createElement(b("FDSText.react"),{color:"secondary",size:d},b("React").createElement(b("AdsTextOverlayRecommendationNote.react"),{fromLWI:a.fromLWI,showPenaltyMessage:!0})))))}a.defaultProps={fromDynamicCreative:!1,fromLWI:!1};e.exports=a}),null);
__d("AdsImageCropperWindow.react",["cx","fbt","ix","CenteredContainer.react","Image.react","React","ReactDOM","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={ctaFullWidth:null},d.$1=function(){if(d.state.ctaFullWidth==null||d.state.ctaFullWidth===0){var a=d.refs&&d.refs.cta;a=a&&b("ReactDOM").findDOMNode(a);a===!0&&a.offsetWidth!=null&&a.offsetWidth!==0&&d.setState({ctaFullWidth:a.offsetWidth})}},d.$2=function(){var a=d.state.ctaFullWidth,c=a==null||a===0||d.props.width!=null&&d.props.width!==0&&d.props.width>a,e=d.props.isResizable===!0?h._("Crop Image"):h._("Drag to Reposition Image");return b("React").createElement("div",{className:"_5tw6"+(d.props.isCropping?" _5tw7":"")+(a?"":" _5tw8"),ref:"cta"},b("React").createElement(b("Image.react"),{src:i("22701")}),b("React").createElement("div",{className:(!c&&d.props.isResizing?"hidden_elem":"")+" _5tw9"},e))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidUpdate=function(a){this.$1()};d.shouldComponentUpdate=function(a){return this.state.ctaFullWidth==null||this.state.ctaFullWidth===0||this.props.width!==a.width||this.props.height!==a.height||this.props.isCropping!==a.isCropping};d.render=function(){return b("React").createElement(b("CenteredContainer.react"),babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,"_5tw4 lfloat _6s84"),style:babelHelpers["extends"]({},this.props.style||{},{width:this.props.width,height:this.props.height}),vertical:!0}),b("React").createElement("div",{className:"_5tw5"}),this.$2())};return c}(b("React").Component);c.propTypes={height:a.number,isCropping:a.bool,isResizable:a.bool,isResizing:a.bool,width:a.number};c.defaultProps={isResizable:!1};e.exports=c}),null);
__d("AdsImageCropSize.react",["fbt","Arbiter","FDSText.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={height:null,width:null},c.handleUpdate=function(a,b){return c.setState({height:b.height,width:b.width})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.updateToken=b("Arbiter").subscribe("AdsImageCropSelector/update",this.handleUpdate)};d.componentWillUnmount=function(){b("Arbiter").unsubscribe(this.updateToken)};d.render=function(){return this.state.height===null||this.state.width===null?null:b("React").createElement(b("FDSText.react"),{color:"white",size:"body3"},g._({"*":{"*":"{width} x {height}"}},[g._param("width",this.state.width,[0]),g._param("height",this.state.height,[0])]))};return c}(b("React").Component);e.exports=a}),null);
__d("AdsImageCropperWindowSize.react",["cx","AdsImageCropSize.react","React","ReactCSSTransitionGroup"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return!a.resizeHandlePosition?null:b("React").createElement(b("ReactCSSTransitionGroup"),{transitionEnter:!0,transitionEnterTimeout:250,transitionLeave:!0,transitionLeaveTimeout:250,transitionName:{enter:"_6mop",enterActive:"_6moq",leave:"_6mor",leaveActive:"_6mos"}},a.isResizing?b("React").createElement("div",{className:"_6kr6"+(a.resizeHandlePosition==="top-left"?" _6kr7":"")+(a.resizeHandlePosition==="top-right"?" _6kr8":"")+(a.resizeHandlePosition==="bottom-right"?" _6kr9":"")+(a.resizeHandlePosition==="bottom-left"?" _6kra":"")},b("React").createElement(b("AdsImageCropSize.react"),null)):null)}e.exports=a}),null);
__d("AdsImageCropSelector.react",["cx","invariant","ix","AdsImageCropperWindow.react","AdsImageCropperWindowSize.react","AdsImageLegacy","AdsInterfacesLogEvents","AdsInterfacesLogger","Arbiter","BackgroundImage.react","Event","Image.react","React","ReactDOM","isEmpty","joinClasses","throttle"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=b("React").PropTypes;var j=function(a){return a*a},k=function(a,b,c){return Math.min(Math.max(a,b),c)},l=b("throttle")(function(a){return b("Arbiter").inform("AdsImageCropSelector/update",a)});c=b("React").createClass({displayName:"AdsImageCropSelector",_dragging:!1,_dragEvent:null,_handler:null,_node:null,_origin:{},_releaseEvent:null,propTypes:{className:a.string,disableResizer:a.bool.isRequired,height:a.number.isRequired,image:a.instanceOf(b("AdsImageLegacy")).isRequired,imageSpec:a.object.isRequired,isDisabled:a.bool.isRequired,isError:a.bool.isRequired,isReady:a.bool.isRequired,width:a.number.isRequired,onContextMenu:a.func.isRequired,onCropUpdate:a.func.isRequired},getInitialState:function(){return{coordinates:{},imageDimensions:{},isCropping:!1,isResizing:!1,min:{},max:{},resizeHandlePosition:null,scale:1,screenX:0,screenY:0}},UNSAFE_componentWillMount:function(){this._calculateState(this.props)},componentWillUnmount:function(){this._dragEvent&&this._dragEvent.remove(),this._releaseEvent&&this._releaseEvent.remove()},UNSAFE_componentWillReceiveProps:function(a){this._calculateState(a)},render:function(){var a=this._isCroppingAllowed();return b("React").createElement("div",{className:b("joinClasses")(this.props.className,"_5tv-"),style:babelHelpers["extends"]({},this.props.style||{},{width:this.props.width}),onContextMenu:this._onContextMenu},b("React").createElement(b("BackgroundImage.react"),{backgroundSize:a?"contain":"containinside",className:"_537t",height:this.props.height,loadingIndicatorStyle:"large",src:this._getImageUrl(),width:this.props.width}),this._renderCropperMask(),this._renderFooter())},_getImageUrl:function(){var a=this.props.image;return a.isStockImage()?a.getFullSizeUrl():a.getUrl()},_drawCropperGrid:function(){var a=b("React").createElement("td",{className:"_35i_ _6s8h"},"\xa0");a=b("React").createElement("tr",null,a,a,a);return b("React").createElement("table",{className:"_35j0"},b("React").createElement("tbody",null,a,a,a))},_renderCropperMask:function(){if(!this._isCroppingAllowed())return null;var a=this._getFillStyle(this.state.coordinates),c=this.state.coordinates.width+"px",d=this.state.coordinates.height+"px",e=this.props.disableResizer?"none":"block";return b("React").createElement("div",{className:"_537t _4jo2"},b("React").createElement("div",{className:"_537t _537u",ref:"selector",style:{borderWidth:a,width:c,height:d,display:e}},this._drawCropperGrid(),this._getResizeHandles(),b("React").createElement(b("AdsImageCropperWindow.react"),{className:"_537t",height:this.state.isResizing?void 0:this.state.coordinates.height,isCropping:this.state.isCropping&&this._dragging,isResizable:!0,isResizing:this.state.isResizing,width:this.state.isResizing?void 0:this.state.coordinates.width,onMouseDown:this._onCropMoveStart})))},_isCroppingAllowed:function(){return!this.props.isDisabled&&!this.props.isError&&this.props.isReady},_renderFooter:function(){if(!this.props.isReady)return null;var a=this.props.image,c=this.props.imageSpec;c=c.placement;a=a.getValidation(c);c=a.errorMessage||a.warningMessage||a.successMessage;var d=i("22275");(a.errorMessage||a.warningMessage)&&(d=i("22276"));return b("React").createElement("div",{className:"_5tw0"},b("React").createElement("div",{className:(c?"":"hidden_elem")+" lfloat"},b("React").createElement(b("Image.react"),{className:"_5tw1",src:d}),b("React").createElement("span",{className:"_5tw2"},c&&c.split("\n")[0])))},_getResizeHandles:function(){return b("React").createElement("div",{className:"_u4e",ref:"handles"},b("React").createElement("div",{className:"_u49 _u4a",key:"top_left",onMouseDown:this._onTopLeftCropResizeStart}),b("React").createElement("div",{className:"_u49 _u4b",key:"top_right",onMouseDown:this._onTopRightCropResizeStart}),b("React").createElement("div",{className:"_u49 _u4c",key:"bottom_right",onMouseDown:this._onBottomRightCropResizeStart}),b("React").createElement("div",{className:"_u49 _u4d",key:"bottom_left",onMouseDown:this._onBottomLeftCropResizeStart}),b("React").createElement(b("AdsImageCropperWindowSize.react"),{isResizing:this.state.isResizing,resizeHandlePosition:this.state.resizeHandlePosition}))},_getFillStyle:function(a){var b=Math.floor(a.top),c=Math.floor(a.left),d=Math.ceil(a.right);a=Math.ceil(a.bottom);return b+"px "+d+"px "+a+"px "+c+"px"},_updateFormats:function(){var a=this.props.image,b=this.props.imageSpec,c=b.cropKey;b=b.placement;var d=this.getOffset();d=this.getCoordinates(d);this.props.onCropUpdate(a,b,(a={},a[c]=d,a))},getOffset:function(){return{left:this.state.coordinates.left-this.state.min.x,right:this.state.coordinates.right-this.state.min.x,top:this.state.coordinates.top-this.state.min.y,bottom:this.state.coordinates.bottom-this.state.min.y}},getCoordinates:function(a){var b=this.state.imageDimensions,c={bottom:0,left:Math.round(a.left/this.state.scale),right:Math.round(b.width-a.right/this.state.scale),top:Math.round(a.top/this.state.scale)},d=this.props.imageSpec;d.aspectRatio?c.bottom=Math.floor(c.top+(c.right-c.left)/d.aspectRatio):c.bottom=Math.round(b.height-a.bottom/this.state.scale);return[[c.left,Math.max(c.top,0)],[c.right,c.bottom]]},_onTopLeftCropResizeStart:function(a){this._onCropResizeStart(a,"top-left")},_onTopRightCropResizeStart:function(a){this._onCropResizeStart(a,"top-right")},_onBottomRightCropResizeStart:function(a){this._onCropResizeStart(a,"bottom-right")},_onBottomLeftCropResizeStart:function(a){this._onCropResizeStart(a,"bottom-left")},_onCropResizeStart:function(a,c){this._onCropChangeStart(a,!0,c),b("AdsInterfacesLogger").log({eventName:"crop_image_resize_mask",eventCategory:b("AdsInterfacesLogEvents").EventCategory.USER_ACTION})},_onCropMoveStart:function(a){this._onCropChangeStart(a,!1),b("AdsInterfacesLogger").log({eventName:"crop_image_drag_mask",eventCategory:b("AdsInterfacesLogEvents").EventCategory.USER_ACTION})},_onCropChangeStart:function(a,c,d){__p&&__p();a.preventDefault();this._setSelectorNodeToRendered();if(!this._dragging){this._handler=this._getHandler(c);var e=b("ReactDOM").findDOMNode(this.refs.handles);e||h(0,2116);e=e.getBoundingClientRect();var f=e.left,g=e.top,i=e.width;e=e.height;this._origin={x:f+i/2,y:g+e/2};this._dragEvent=b("Event").listen(window,"mousemove",this._cropMove);this._releaseEvent=b("Event").listen(window,"mouseup",this._cropEnd);this.setState({isCropping:!0,isResizing:c,resizeHandlePosition:d,screenX:a.pageX,screenY:a.pageY});c&&this._emitUpdateEvent(i,e);this._dragging=!0;this._place(this.state.coordinates.left,this.state.coordinates.top,this.state.coordinates.width,this.state.coordinates.height)}},_setSelectorNodeToRendered:function(){this._node&&h(0,2117),this._node=b("ReactDOM").findDOMNode(this.refs.selector),this._node||h(0,2118)},_cropMove:function(a){this._dragging&&(a.prevent(),this._handler||h(0,2119),this._handler(a.pageX-this.state.screenX,a.pageY-this.state.screenY))},_cropEnd:function(a){this._dragging&&(this._dragging=!1,this.setState({isCropping:!1,isResizing:!1}),this._handler||h(0,2119),this._handler(a.pageX-this.state.screenX,a.pageY-this.state.screenY),this._dragEvent&&this._dragEvent.remove(),this._dragEvent=null,this._releaseEvent&&this._releaseEvent.remove(),this._releaseEvent=null,this._handler=null),this._resetSelectorNode()},_resetSelectorNode:function(){delete this._node},_resize:function(a,b){__p&&__p();var c=Math.sqrt(j(this.state.screenX-this._origin.x)+j(this.state.screenY-this._origin.y));a={x:a/2+this.state.screenX,y:b/2+this.state.screenY};b=Math.sqrt(j(this._origin.x-a.x)+j(this._origin.y-a.y));a=k(b/c,this.state.min.scale,this.state.max.scale);b=Math.round(this.state.coordinates.width*a);c=Math.round(this.state.coordinates.height*a);a=this.state.screenX<this._origin.x?this.state.coordinates.width-b:0;var d=this.state.screenY<this._origin.y?this.state.coordinates.height-c:0;a=k(this.state.coordinates.left+a,this.state.min.x,this.state.max.x-b);d=k(this.state.coordinates.top+d,this.state.min.y,this.state.max.y-c);this._place(a,d,b,c);this._emitUpdateEvent(b,c)},_move:function(a,b){var c=this.state.coordinates.width,d=this.state.coordinates.height;a=k(this.state.coordinates.left+a,this.state.min.x,this.state.max.x-c);b=k(this.state.coordinates.top+b,this.state.min.y,this.state.max.y-d);this._place(a,b,c,d)},_place:function(a,b,c,d){var e=this,f=this.props.height-b-d,g=this.props.width-a-c,i=this._getFillStyle({top:b,left:a,bottom:f,right:g});this._node||h(0,2118);this._node.style.borderWidth=i;this._node.style.width=c+"px";this._node.style.height=d+"px";this._dragging||this.setState({coordinates:{top:b,left:a,bottom:f,right:g,width:c,height:d}},function(){e._updateFormats()})},_getHandler:function(a){return a?this._resize:this._move},_calculateState:function(a){__p&&__p();var c=this;if(!a.isReady)return;var d=a.image.getCrop(a.imageSpec.cropKey),e=Math.min(a.width/a.image.getWidth(),a.height/a.image.getHeight()),f={height:a.image.getHeight(),scaledWidth:Math.round(a.image.getWidth()*e),scaledHeight:Math.round(a.image.getHeight()*e),width:a.image.getWidth()},g={scale:1,x:(a.width-f.scaledWidth)/2,y:(a.height-f.scaledHeight)/2},h={scale:1,x:g.x+f.scaledWidth,y:g.y+f.scaledHeight},i={};d&&d.length&&(i.top=g.y+d[0][1]*e,i.left=g.x+d[0][0]*e,i.bottom=g.y+(f.height-d[1][1])*e,i.right=g.x+(f.width-d[1][0])*e,i.width=a.width-i.right-i.left,i.height=a.height-i.bottom-i.top);(b("isEmpty")(i)||Object.keys(i).some(function(a){return Math.ceil(i[a])<0}))&&(f.width/a.imageSpec.aspectRatio>f.height?(i.height=f.scaledHeight,i.width=i.height*a.imageSpec.aspectRatio):(i.width=f.scaledWidth,i.height=i.width/a.imageSpec.aspectRatio),i.top=g.y+(f.scaledHeight-i.height)/2,i.left=g.x+(f.scaledWidth-i.width)/2,i.bottom=a.height-i.top-i.height,i.right=a.width-i.left-i.width);g.scale=Math.min(a.imageSpec.minWarningWidth*e/i.width,a.imageSpec.minWarningHeight*e/i.height);h.scale=Math.min(f.scaledWidth/i.width,f.scaledHeight/i.height);this.setState({max:h,min:g,imageDimensions:f,scale:e,coordinates:i},function(){return c._emitUpdateEvent(i.width,i.height)})},_onContextMenu:function(a){this.props.onContextMenu(this.props.image,a)},_emitUpdateEvent:function(a,b){var c=this.props.imageSpec.aspectRatio;c=c?a/c:b;l({height:Math.round(c/this.state.scale),width:Math.round(a/this.state.scale)})}});e.exports=c}),null);
__d("AdsImageCropperCacheUtil",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b){return[a,(b||"").toString()].join()};e.exports={getCacheHashForImageTextCheck:a}}),null);
__d("AdsImageCropperImageOverlayContent",["ix","fbt","FDSSpinner.react","Image.react","React","WaitTimeArea.react","asset","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";a=b("immutable").Map({body:h._("We're checking that this image doesn't contain too much text."),icon:b("React").createElement(b("WaitTimeArea.react"),{name:"AdsImageCropperTextPenaltyChecker",owner:"ads_advanced_creative"},b("React").createElement(b("FDSSpinner.react"),{size:"small"})),title:h._("Checking image text...")});c=b("immutable").Map({body:h._("Please try again."),icon:b("React").createElement(b("Image.react"),{src:g("657778")}),title:h._("{=An error occurred while checking the text in your image.} Close this window and try again.",[h._param("=An error occurred while checking the text in your image.",b("React").createElement("b",null,h._("An error occurred while checking the text in your image.")))])});d=b("immutable").Map({WARNING_STOCK_IMAGE:b("immutable").Map({body:h._("For best ad performance, please make sure your image includes less than 20\u0025 text."),icon:null,title:null}),TEXT_PENALTY_OK:b("immutable").Map({body:h._("This image meets our text guidelines. Great!"),icon:b("React").createElement(b("Image.react"),{src:g("657780")}),title:h._("Text amount: OK")}),TEXT_PENALTY_LOW:b("immutable").Map({body:h._("{=Your ad's reach may be slightly lower.}{=Ad images with less than 20\u0025 text perform better. Try an image with less text, a smaller font size or without text-based logos.}",[h._param("=Your ad's reach may be slightly lower.",b("React").createElement("p",null,h._("Your ad's reach may be slightly lower."))),h._param("=Ad images with less than 20% text perform better. Try an image with less text, a smaller font size or without text-based logos.",b("React").createElement("p",null,h._("Ad images with less than 20\u0025 text perform better. Try an image with less text, a smaller font size or without text-based logos.")))]),icon:b("React").createElement(b("Image.react"),{src:g("657781")}),title:h._("Text amount: Low")}),TEXT_PENALTY_MEDIUM:b("immutable").Map({body:h._("{=Your ad's reach may be much lower.}{=Ad images with less than 20\u0025 text perform better. Try an image with less text, a smaller font size or without text-based logos.}",[h._param("=Your ad's reach may be much lower.",b("React").createElement("p",null,h._("Your ad's reach may be much lower."))),h._param("=Ad images with less than 20% text perform better. Try an image with less text, a smaller font size or without text-based logos.",b("React").createElement("p",null,h._("Ad images with less than 20\u0025 text perform better. Try an image with less text, a smaller font size or without text-based logos.")))]),icon:b("React").createElement(b("Image.react"),{src:g("657781")}),title:h._("Text amount: Medium")}),TEXT_PENALTY_HIGH:b("immutable").Map({body:h._("{=Your ad may not be shown.}{=Ad images with less than 20\u0025 text perform better. Try an image with less text, a smaller font size or without text-based logos.}",[h._param("=Your ad may not be shown.",b("React").createElement("p",null,h._("Your ad may not be shown."))),h._param("=Ad images with less than 20% text perform better. Try an image with less text, a smaller font size or without text-based logos.",b("React").createElement("p",null,h._("Ad images with less than 20\u0025 text perform better. Try an image with less text, a smaller font size or without text-based logos.")))]),icon:b("React").createElement(b("Image.react"),{src:g("657779")}),title:h._("Text amount: High")})});f=b("immutable").Map(a);var i=c.merge(b("immutable").Map({icon:b("React").createElement(b("Image.react"),{src:g("702356")})})),j=b("immutable").Map({WARNING_STOCK_IMAGE:d.get("WARNING_STOCK_IMAGE").merge(b("immutable").Map({})),TEXT_PENALTY_OK:d.get("TEXT_PENALTY_OK").merge(b("immutable").Map({icon:b("React").createElement(b("Image.react"),{src:g("702358")})})),TEXT_PENALTY_LOW:d.get("TEXT_PENALTY_LOW").merge(b("immutable").Map({icon:b("React").createElement(b("Image.react"),{src:g("702359")})})),TEXT_PENALTY_MEDIUM:d.get("TEXT_PENALTY_MEDIUM").merge(b("immutable").Map({icon:b("React").createElement(b("Image.react"),{src:g("702359")})})),TEXT_PENALTY_HIGH:d.get("TEXT_PENALTY_HIGH").merge(b("immutable").Map({icon:b("React").createElement(b("Image.react"),{src:g("702357")})}))}),k=b("immutable").Map(a),l=c.merge(b("immutable").Map({icon:b("React").createElement(b("Image.react"),{src:g("706233")})}));h=b("immutable").Map({WARNING_STOCK_IMAGE:d.get("WARNING_STOCK_IMAGE").merge(b("immutable").Map({})),TEXT_PENALTY_OK:d.get("TEXT_PENALTY_OK"),TEXT_PENALTY_LOW:d.get("TEXT_PENALTY_LOW").merge(b("immutable").Map({body:h._("Your ad's reach may be slightly lower."),icon:b("React").createElement(b("Image.react"),{src:g("706236")})})),TEXT_PENALTY_MEDIUM:d.get("TEXT_PENALTY_MEDIUM").merge(b("immutable").Map({body:h._("Your ad's reach may be much lower."),icon:b("React").createElement(b("Image.react"),{src:g("706236")})})),TEXT_PENALTY_HIGH:d.get("TEXT_PENALTY_HIGH").merge(b("immutable").Map({body:h._("Your ad may not be shown."),icon:b("React").createElement(b("Image.react"),{src:g("706234")})}))});e.exports={MAP_INFO_COMPS_FOR_LOADING:a,MAP_INFO_COMPS_FOR_LOADING_V1:f,MAP_INFO_COMPS_FOR_LOADING_CPP:k,MAP_INFO_COMPS_FOR_ERROR:c,MAP_INFO_COMPS_FOR_ERROR_V1:i,MAP_INFO_COMPS_FOR_ERROR_CPP:l,MAP_INFO_COMPONENTS_FOR_LOADED_TYPE:d,MAP_INFO_COMPONENTS_FOR_LOADED_TYPE_V1:j,MAP_INFO_COMPONENTS_FOR_LOADED_TYPE_CPP:h}}),null);
__d("AdsImageCropperResetButton.react",["ix","cx","fbt","AdsInterfacesLogEvents","AdsInterfacesLogger","FDSButton.react","Image.react","React","ReactCSSTransitionGroup","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.handleClick=function(){d.props.onClick(d.props.selectedPlacement),b("AdsInterfacesLogger").log({eventName:"crop_image_reset_changes",eventCategory:b("AdsInterfacesLogEvents").EventCategory.USER_ACTION})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=i._("Reset");return b("React").createElement(b("ReactCSSTransitionGroup"),{transitionEnter:!0,transitionEnterTimeout:250,transitionLeave:!0,transitionLeaveTimeout:250,transitionName:{enter:"_6mol",enterActive:"_6mom",leave:"_6mon",leaveActive:"_6moo"}},this.props.canResetChanges?b("React").createElement("div",{className:"_6mc7"},b("React").createElement("div",{className:"_6mc8"},b("React").createElement(b("FDSButton.react"),{icon:b("React").createElement(b("Image.react"),{src:g("560777"),style:{marginRight:6}}),label:a,size:"small",use:"flatWhite",onClick:this.handleClick}))):null)};return c}(b("React").Component);e.exports=a}),null);
__d("AdsImageCropperTextCheckerHOC.react",["React","immutable","loadObjectComponent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,b){b=b.get(a).toJS();return babelHelpers["extends"]({},b,{type:a})};function a(a){__p&&__p();return function(c){__p&&__p();babelHelpers.inheritsLoose(d,c);function d(){return c.apply(this,arguments)||this}var e=d.prototype;e.render=function(){var c=this,d=b("loadObjectComponent")({loading:function(){return b("React").createElement(a,babelHelpers["extends"]({},c.props.loadingStateComponents.toJS(),{loaded:!1}))},error:function(){return b("React").createElement(a,babelHelpers["extends"]({},c.props.loadErrorComponents.toJS(),{loaded:!1}))},loaded:function(d){if(!c.props.loadedStateComponents.has(d))return null;d=g(d,c.props.loadedStateComponents);return b("React").createElement(a,babelHelpers["extends"]({},d,{loaded:!0}))}});return b("React").createElement(d,{object:this.props.object})};return d}(b("React").Component)}e.exports=a}),null);
__d("AdsImageCropperTextOverlayInfoMessageV1.react",["ix","cx","fbt","FDSButton.react","FDSText.react","FlexLayout.react","Image.react","React","asset","suiMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={isDetailOpen:!1},c.$1=function(){c.setState(function(a){return{isDetailOpen:!a.isDetailOpen}})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props,c=a.title,d=a.body,e=a.icon;a=a.loaded;a=a===void 0?!1:a;e=e!=null?b("React").createElement("div",{className:"_6-i_"},e):null;c=c!=null?b("React").createElement(b("FDSText.react"),{color:"white",display:"block",margin:"_3-8w _3-91",size:"body3",weight:"bold"},c):null;a=a?b("React").createElement("div",{className:"_6-j0"},b("React").createElement(b("FDSButton.react"),{icon:this.state.isDetailOpen?b("React").createElement(b("Image.react"),{src:g("593209")}):b("React").createElement(b("Image.react"),{src:g("500190")}),label:i._("Show More"),labelIsHidden:!0,size:"small",use:"flatWhite",onClick:this.$1})):null;return b("React").createElement("div",{className:"_6-j1"},b("React").createElement(b("FlexLayout.react"),null,e,c,a),this.state.isDetailOpen?b("React").createElement(b("FDSText.react"),{color:"white",display:"block",margin:"_3-8y",size:"body2"},d):null)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("AdsCache",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").OrderedMap;a=function(){__p&&__p();function a(a){this.$1=g(),this.$2=a}var b=a.prototype;b.set=function(a,b){this.$1=this.$1.set(a,b),this.$3()};b.get=function(a){return this.$1.get(a)};b.has=function(a){return this.$1.has(a)};b.clearAll=function(){this.$1=g()};b.size=function(){return this.$1.size};b["delete"]=function(a){var b=this.has(a);this.$1=this.$1["delete"](a);return b};b.$3=function(){this.$1.size>this.$2&&this["delete"](this.$1.keySeq().first())};return a}();e.exports=a}),null);
__d("AdsTextCheckResponseCache",["AdsCache"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("AdsCache"));e.exports=new a(100)}),null);
__d("XAdsTextOverlayAsyncMultipleCropsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ads/tools/text_overlay_validation_with_crops/async/",{})}),null);
__d("AdsImageCropperTextOverlayRequester",["Promise","AdsImageCropperCacheUtil","AdsTextCheckResponseCache","AsyncRequest","URI","XAdsTextOverlayAsyncMultipleCropsController","immutable","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsImageCropperCacheUtil").getCacheHashForImageTextCheck;function h(a,b){__p&&__p();return a.withMutations(function(a){__p&&__p();for(var c=b,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;a["delete"](f)}})}function i(a){return new(b("URI"))(a.getUrl()).getPath()==="/safe_image.php"}function j(a){var b=a.getCrops(),c=Object.keys(b);c=c[0];return JSON.stringify({url:a.getUrl(),width:a.getWidth(),height:a.getHeight(),crops:c==null?null:(a=[]).concat.apply(a,b[c])})}function k(a){var b="TEXT_PENALTY_OK";Array.isArray(a)||(b=Object.keys(a[Object.keys(a)[0]])[0]);return b}function l(a){var b=Object.keys(a);return b.length===0?null:a[b[0]]}function m(a,c){a=n(a);a!=null&&b("AdsTextCheckResponseCache").set(a,c)}function n(a){var b=a.getAdAccountHash();if(b==null)return null;a=l(a.getCrops());return g(b,a)}a=function(){__p&&__p();function a(a){this.$3=a.filter(function(a){return!i(a)})}var c=a.prototype;c.request=function(){__p&&__p();var a=this,c=this.$4();if(c.size>0&&this.$3.size===c.size){this.$2=b("Promise").resolve(c);return this}var d=h(this.$3,c.keySeq()).map(function(a){return j(a)});if(d.size===0){this.$2=b("Promise").resolve();return this}this.$1=new(b("AsyncRequest"))();this.$2=new(b("Promise"))(function(e,f){__p&&__p();var g=b("XAdsTextOverlayAsyncMultipleCropsController").getURIBuilder().getURI();b("nullthrows")(a.$1).setURI(g).setData({image_position_to_crops:d.toJS()}).setHandler(function(d){d=b("immutable").Map(d.payload.penalties).map(function(a){return k(a)});d.entrySeq().forEach(function(b){var c=b[0];b=b[1];return m(a.$3.get(c),b)});e(d.merge(c))}).setErrorHandler(function(a){return f(a)}).setFinallyHandler(function(){a.$1=null}).send()});return this};c.hasValidImages=function(){return this.$3.size>0};c.getPromise=function(){return this.$2};c.abort=function(){this.$1&&this.$1.abort()};c.$4=function(){return this.$3.map(function(a){a=n(a);return a!=null&&b("AdsTextCheckResponseCache").has(a)?b("AdsTextCheckResponseCache").get(a):null}).filter(Boolean)};return a}();e.exports=a}),null);
__d("AdsImageCropperTextPenaltyCheckerContainer.react",["AdsImageCropperTextOverlayRequester","LoadObject","React","debounce","immutable","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={loadObject:b("LoadObject").empty()},d.$4=function(a){d.setState({loadObject:b("LoadObject").withError(new Error(a.getErrorDescription()))})},d.$2=b("debounce")(function(){var a=d.props.image;d.$1&&d.$1.abort();d.$1=new(b("AdsImageCropperTextOverlayRequester"))(b("immutable").Map({0:a}));d.$1.hasValidImages()?(d.setState({loadObject:b("LoadObject").loading()}),b("nullthrows")(d.$1).request().getPromise().then(function(a){return a&&d.$3(a.first())})["catch"](d.$4)["finally"](function(){d.$1=null})):d.setState({loadObject:b("LoadObject").withValue("WARNING_STOCK_IMAGE")})}),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.props.initialStatus?this.setState({loadObject:this.props.initialStatus}):this.$2()};d.componentDidUpdate=function(a){if(this.props.initialStatus!==a.initialStatus){this.setState({loadObject:this.props.initialStatus});return}this.props.image.equalsWithCrops(a.image)||this.$2()};d.componentWillUnmount=function(){this.$1&&this.$1.abort()};d.render=function(){var a=this.state.loadObject;if(!a||a.isEmpty())return null;var c=this.props.componentClass;return b("React").createElement(c,{loadErrorComponents:this.props.loadErrorComponents,loadedStateComponents:this.props.loadedStateComponents,loadingStateComponents:this.props.loadingStateComponents,object:a})};d.$3=function(a){this.setState({loadObject:b("LoadObject").withValue(a)})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("AdsImageCropperEditorHeader.react",["cx","AdsImageCropperImageOverlayContent","AdsImageCropperResetButton.react","AdsImageCropperTextCheckerHOC.react","AdsImageCropperTextOverlayInfoMessageV1.react","AdsImageCropperTextPenaltyCheckerContainer.react","AdsImageCropSize.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("AdsImageCropperImageOverlayContent").MAP_INFO_COMPONENTS_FOR_LOADED_TYPE_V1,i=b("AdsImageCropperImageOverlayContent").MAP_INFO_COMPS_FOR_ERROR_V1,j=b("AdsImageCropperImageOverlayContent").MAP_INFO_COMPS_FOR_LOADING_V1,k=b("AdsImageCropperTextCheckerHOC.react")(b("AdsImageCropperTextOverlayInfoMessageV1.react"));function a(a){var c=a.isV1===!0;return b("React").createElement("div",{className:"_6s8i"+(c?" _7083":"")},c?b("React").createElement("div",{className:"_6-j2"},b("React").createElement(b("AdsImageCropperTextPenaltyCheckerContainer.react"),{componentClass:k,image:a.image,loadErrorComponents:i,loadedStateComponents:h,loadingStateComponents:j})):null,b("React").createElement("div",{className:"_6s8j"},b("React").createElement(b("AdsImageCropSize.react"),null)),a.onReset?b("React").createElement(b("AdsImageCropperResetButton.react"),{canResetChanges:a.canResetChanges,selectedPlacement:a.selectedPlacement,onClick:a.onReset}):null)}e.exports=a}),null);
__d("AdsImageCropperEditorItem.react",["cx","AdsImageUtils","AdsUtils","React","ShimButton.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("AdsUtils").isEqualWeak;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){var a=d.props.image,c=d.props.imageSpec,e=c.placement,f=c.cropKey;c=b("AdsImageUtils").calculateDefaultCoordinates(a.getWidth(),a.getHeight(),c.aspectRatio);if(!a.getCrop(f)&&d.$3()){d.props.onCropUpdate(a,e,(a={},a[f]=c,a))}},d.$2=function(){var a=d.props.image;return a.isStockImage()?a.getFullSizeUrl():a.getUrl()},d.$3=function(){var a=d.props.isDisabled,b=d.props.isError,c=d.props.isReady;return!a&&!b&&c},d.$7=function(){d.props.onClick(d.props.imageSpec.placement)},d.$6=function(a){d.props.onContextMenu(d.props.image,a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1()};d.componentDidUpdate=function(){this.$1()};d.shouldComponentUpdate=function(a){return!h(this.props.image.getCrops(),a.image.getCrops())||this.props.isDisabled!==a.isDisabled||this.props.isError!==a.isError||this.props.isReady!==a.isReady||this.props.isSelected!==a.isSelected||this.props.imageSpec.aspectRatio!==a.imageSpec.aspectRatio||this.props.height!==a.height};d.render=function(){var a=this.props.image,c=this.props.imageSpec,d=this.$2(),e=this.$3(),f=e&&this.$4(a,c);e=e?this.$5(a,c):1;var g;d&&(g={backgroundImage:"url("+d+")",backgroundSize:Math.round(e*100)+"%",backgroundPosition:f,backgroundRepeat:"no-repeat"});a=b("React").createElement("div",{style:babelHelpers["extends"]({},g,{height:this.props.height,width:this.props.width}),onContextMenu:this.$6});return b("React").createElement(b("ShimButton.react"),{className:b("joinClasses")(this.props.className,"_5twa"+(this.props.isSelected?" _5twb":"")),onClick:this.$7},a)};d.$4=function(a,c){c=a.getCrop(c.cropKey);var d="50% 50%";if(c&&c.length){var e=a.getWidth();a=a.getHeight();var f=this.props.width,g=this.props.height;d=b("AdsImageUtils").calculateCroppedPosition(e,a,f,g,c)}return d};d.$5=function(a,c){var d=1;c=a.getCrop(c.cropKey);c&&c.length&&(d=b("AdsImageUtils").calculateBackgroundScale(a.getWidth(),a.getHeight(),c));return d};return c}(b("React").Component);c.propTypes={className:a.string,height:a.number.isRequired,image:a.object.isRequired,imageSpec:a.object.isRequired,isDisabled:a.bool.isRequired,isError:a.bool.isRequired,isReady:a.bool.isRequired,isSelected:a.bool,width:a.number.isRequired,onClick:a.func.isRequired,onContextMenu:a.func.isRequired,onCropUpdate:a.func.isRequired};e.exports=c}),null);
__d("AdsImageCropperEditorPlaceholderItem.react",["cx","React","ShimButton.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(){c.props.onClick(c.props.placement)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=b("React").createElement("div",{className:"_1ai3",style:{height:this.props.height,width:this.props.width}});return b("React").createElement(b("ShimButton.react"),{className:b("joinClasses")(this.props.className,"_5twa"+(this.props.isSelected?" _5twb":"")),onClick:this.$1},a)};return c}(b("React").Component);c.propTypes={className:a.string,height:a.number.isRequired,isSelected:a.bool,placement:a.string.isRequired,width:a.number.isRequired,onClick:a.func.isRequired};e.exports=c}),null);
__d("AdsImageCropperUtils",["AdImageSpecs","AdsImageValidation","AdsPageTypes","InstagramAdImageStoryPortalSpecs"],(function(a,b,c,d,e,f){"use strict";a={filterDisabledSpecsOnly:function(a,c){var d=a.getWidth(),e=a.getHeight(),f=b("InstagramAdImageStoryPortalSpecs").INSTAGRAM_STORY;return c.filter(function(c){return d<c.minWarningWidth||e<c.minWarningHeight||c.placement===b("AdsPageTypes").INSTAGRAM_STREAM&&c.cropKey===b("AdImageSpecs").INSTAGRAM_STREAM_NO_CROP.cropKey&&!b("AdsImageValidation").isValidAspectRatio(a,b("AdImageSpecs").INSTAGRAM_STREAM_NO_CROP)||c.placement===b("AdsPageTypes").INSTAGRAM_STORY&&c.cropKey===b("AdImageSpecs").INSTAGRAM_STORY.cropKey&&!b("AdsImageValidation").isValidAspectRatio(a,f)})}};e.exports=a}),null);
__d("AdsImageCropperImageSpecSelector.react",["cx","fbt","AdImageSpecCropKeys","AdImageSpecs","AdImageSpecsUtils","AdsApplicationUtils","AdsImageCropperUtils","AdsImageLegacy","AdsIntelligentBlueTip.react","AdsInterfacesLogEvents","AdsInterfacesLogger","AdsObjectivesConfig","AdsPageTypes","FDSLink.react","React","SUIBusinessTheme","SUIButtonGroup.react","SUITooltip.react","XUIButton.react","ads-objectives"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ads-objectives").KPIObjectives,j="https://www.facebook.com/business/help/2072491112815612",k=[];a=b("React").PropTypes;function l(a){return b("React").createElement(b("React").Fragment,null,a.message,a.recommendedSpec!=null&&a.recommendedSpec!==""?b("React").createElement(b("React").Fragment,null," ",h._("Recommended: {recommended spec}.",[h._param("recommended spec",a.recommendedSpec)])):null,a.showLearnMore?b("React").createElement(b("React").Fragment,null," ",b("React").createElement(b("FDSLink.react"),{href:j,isInverseColor:!0,showUnderline:"always",target:"_blank"},h._("Learn More"))):null)}c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={selectedSpec:d.props.selectedSpec,disabledSpecs:b("AdsImageCropperUtils").filterDisabledSpecsOnly(d.props.image,d.props.imageSpecs)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){this.setState({selectedSpec:a.selectedSpec,disabledSpecs:b("AdsImageCropperUtils").filterDisabledSpecsOnly(a.image,a.imageSpecs)})};d.render=function(){__p&&__p();var a=this,c=this.props.imageSpecs;if(!c.length)return null;c.every(function(a){return a.placement===b("AdsPageTypes").INSTAGRAM_STORY})&&(c=c.filter(function(c){return c.cropKey===b("AdImageSpecCropKeys").NO_CROP||c.cropKey===b("AdImageSpecCropKeys")["90x160"]||a.props.isCarouselAd===!0&&c.cropKey===b("AdImageSpecCropKeys")["100x100"]}));this.$1(c);var d=this.state.selectedSpec;c=c.map(function(c){var e=a.$2(c);if(!c.placement||e==null)return null;var f=c.cropKey;return b("React").createElement(b("SUITooltip.react"),{alignment:"center",key:String(c.placement).concat(c.cropKey),maxWidth:300,offset:10,theme:b("SUIBusinessTheme"),tooltip:a.$3(a.props.image,c)},b("React").createElement(b("XUIButton.react"),{className:"_5qc-"+(!d||d.aspectRatio!==c.aspectRatio||d.placement!==c.placement?" _5qc_":"")+(a.state.disabledSpecs.some(function(a){return a.cropKey===c.cropKey})?" _55oe":"")+" _5bv8",id:f,label:e,size:"large",onClick:function(){return a.$4(c)}}),a.$5())});return b("React").createElement(b("SUIButtonGroup.react"),{theme:b("SUIBusinessTheme")},c)};d.$4=function(a){if(this.state.disabledSpecs.some(function(b){return b.cropKey===a.cropKey}))return;this.setState({selectedSpec:a});this.props.onUpdateImageSpec(a);b("AdsInterfacesLogger").log({data:{source:a.cropKey},eventName:"crop_image_click_spec",eventCategory:b("AdsInterfacesLogEvents").EventCategory.USER_ACTION})};d.$2=function(a){var c;switch(a.cropKey){case b("AdImageSpecCropKeys").NO_CROP:return this.$6("NO_CROP");case b("AdImageSpecCropKeys")["100x100"]:return this.$6("SQUARE",a.displayRatio);case b("AdImageSpecCropKeys")["191x100"]:case b("AdImageSpecCropKeys")["400x150"]:return this.$6("HORIZONTAL",a.displayRatio);case b("AdImageSpecCropKeys")["90x160"]:return this.$6("VERTICAL",a.displayRatio)}return(c=a.displayRatio)!=null?c:String(a.aspectRatio)};d.$1=function(a){var c=this.$7(),d=[].concat(c?[c.cropKey]:k,[b("AdImageSpecCropKeys")["90x160"],b("AdImageSpecCropKeys")["100x100"],b("AdImageSpecCropKeys")["191x100"],b("AdImageSpecCropKeys").NO_CROP]);a.sort(function(a,b){return d.indexOf(a.cropKey)-d.indexOf(b.cropKey)})};d.$7=function(){return b("AdImageSpecsUtils").getRecommendedImageSpec(this.props.imageSpecs)};d.$3=function(a,c){__p&&__p();var d=null,e=a.getWidth();a=a.getHeight();var f=this.state.disabledSpecs.some(function(a){return a.cropKey===c.cropKey});if(f)if(c.placement===b("AdsPageTypes").INSTAGRAM_STREAM)switch(c.cropKey){case b("AdImageSpecs").INSTAGRAM_STREAM_NO_CROP.cropKey:if(e<c.minWarningWidth||a<c.minWarningHeight)break;d=h._({"wide":{"wider":"This aspect ratio is disabled because the original image is too wide. Try uploading a wider image.","taller":"This aspect ratio is disabled because the original image is too wide. Try uploading a taller image."},"narrow":{"wider":"This aspect ratio is disabled because the original image is too narrow. Try uploading a wider image.","taller":"This aspect ratio is disabled because the original image is too narrow. Try uploading a taller image."}},[h._enum(e>a?"wide":"narrow",{wide:"wide",narrow:"narrow"}),h._enum(e>a?"taller":"wider",{wider:"wider",taller:"taller"})]);break;case b("AdImageSpecs").INSTAGRAM_STREAM.cropKey:d=h._("This aspect ratio is disabled because the resulting image will be smaller than 500x500 pixels. Try uploading a larger image.");break;case b("AdImageSpecs").INSTAGRAM_STREAM_LANDSCAPE.cropKey:d=h._("This aspect ratio is disabled because the resulting image will be smaller than 500x262 pixels. Try uploading a larger image.");break}else if(c.placement===b("AdsPageTypes").INSTAGRAM_STORY)switch(c.cropKey){case b("AdImageSpecs").INSTAGRAM_STORY.cropKey:if(e<c.minWarningWidth||a<c.minWarningHeight)break;d=h._({"wide":{"wider":"This aspect ratio is disabled because the original image is too wide. Try uploading a wider image.","taller":"This aspect ratio is disabled because the original image is too wide. Try uploading a taller image."},"narrow":{"wider":"This aspect ratio is disabled because the original image is too narrow. Try uploading a wider image.","taller":"This aspect ratio is disabled because the original image is too narrow. Try uploading a taller image."}},[h._enum(e/a>.5625?"wide":"narrow",{wide:"wide",narrow:"narrow"}),h._enum(a>e?"wider":"taller",{wider:"wider",taller:"taller"})]);break;case b("AdImageSpecs").INSTAGRAM_STORY_CROP.cropKey:d=h._("This aspect ratio is disabled because the resulting image will be smaller than 500x889 pixels. Try uploading a larger image.");break}f=this.$7();if(!d&&f){a=this.props;e=a.imageSpecs;var g=a.objective;a=a.isAutomaticPlacements;if(e.length===1){e=null;g!=null&&g!==i.NONE&&!b("AdsApplicationUtils").isCreativeStudio()?(e=b("AdsObjectivesConfig").getShortName(g),d=b("React").createElement(l,{message:a===!0?h._("This is the only available ratio for the {objective} objective using Automatic Placements.",[h._param("objective",e)]):h._("This is the only available ratio for the {objective} objective using the placements you've selected.",[h._param("objective",e)]),showLearnMore:!0})):d=b("React").createElement(l,{message:h._("This is the only available ratio.")})}else switch(c.cropKey){case b("AdImageSpecCropKeys").NO_CROP:d=b("React").createElement(l,{message:h._("Custom cropped images may not deliver to all placements."),recommendedSpec:this.$2(f),showLearnMore:!0});break;case f.cropKey:d=b("React").createElement(l,{message:h._("Recommended")});break;default:d=b("React").createElement(l,{message:h._("This ratio is not recommended for your placements."),recommendedSpec:this.$2(f),showLearnMore:!0});break}}return d};d.$6=function(a,b){__p&&__p();if(a==="NO_CROP")return h._("Original");var c=b;switch(a){case"HORIZONTAL":c=h._("Horizontal");break;case"SQUARE":c=h._("Square");break;case"VERTICAL":c=h._("Vertical");break}return b!=null&&b!==""?h._("{Friendly human readable name of the aspect ratio} ({Aspect ratio e.g. 1.91:1})",[h._param("Friendly human readable name of the aspect ratio",c),h._param("Aspect ratio e.g. 1.91:1",b)]):c};d.$5=function(){return this.props.imageSpecs.every(function(a){return a.position!==b("AdsPageTypes").DESKTOP_FEED&&a.position!==b("AdsPageTypes").MOBILE_FEED&&a.position!==b("AdsPageTypes").MARKETPLACE&&a.cropKey!==b("AdImageSpecCropKeys")["100x100"]})?null:b("React").createElement(b("AdsIntelligentBlueTip.react"),{contextNodeID:b("AdImageSpecCropKeys")["100x100"],messageID:"ads_increase_image_aspect_ratio_nux",position:"above"})};return c}(b("React").Component);c.propTypes={image:a.instanceOf(b("AdsImageLegacy")).isRequired,imageSpecs:a.arrayOf(a.object).isRequired,isAutomaticPlacements:a.bool,objective:a.string,selectedSpec:a.object,onUpdateImageSpec:a.func.isRequired};e.exports=c}),null);
__d("adsImageCropperSpecSelectorSelector",["AdsAPICampaignGroupRecordUtils","AdsBulkValueUtils","AdsChildAttachmentsUtils","AdsPlacementSelectionUIStore","adsCreateSelector","adsUEditorSelectedAdgroupsSelector","adsUEditorSelectedCampaignGroupsSelector","adsUEditorSelectedCampaignIDsSelector","first","firstx"],(function(a,b,c,d,e,f){"use strict";e.exports=b("adsCreateSelector")([b("adsUEditorSelectedCampaignGroupsSelector"),b("adsUEditorSelectedCampaignIDsSelector"),b("AdsPlacementSelectionUIStore").getShowCustomSelectionSelector,b("adsUEditorSelectedAdgroupsSelector")],function(a,c,d,e){e=b("AdsBulkValueUtils").aggregate(e.map(function(a){return b("AdsChildAttachmentsUtils").isCarouselAd(a)}));a=b("first")(a);return{objective:a!=null?b("AdsAPICampaignGroupRecordUtils").getObjective(a):null,isAutomaticPlacements:c.length>0&&!d(b("firstx")(c)),isCarouselAd:!!b("AdsBulkValueUtils").getUniformValue(e,!1)}},{name:e.id})}),null);
__d("AdsImageCropperImageSpecSelectorContainer.react",["AdsFluxContainer","AdsImageCropperImageSpecSelector.react","AdsUEditorContextType","React","adsImageCropperSpecSelectorSelector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(a,c){a=c.adgroupEditorContext;return b("adsImageCropperSpecSelectorSelector").getStores(a)};c.calculateState=function(a,c,d){a=d.adgroupEditorContext;return b("adsImageCropperSpecSelectorSelector")(a)};var d=c.prototype;d.render=function(){return b("React").createElement(b("AdsImageCropperImageSpecSelector.react"),{image:this.props.image,imageSpecs:this.props.imageSpecs,isAutomaticPlacements:this.state.isAutomaticPlacements,isCarouselAd:this.state.isCarouselAd,objective:this.state.objective,selectedSpec:this.props.selectedSpec,onUpdateImageSpec:this.props.onUpdateImageSpec})};return c}(b("React").PureComponent);a.contextTypes=b("AdsUEditorContextType").adgroup;e.exports=b("AdsFluxContainer").create(a,{withContext:!0,withProps:!0,name:e.id})}),null);
__d("AdsImageCropperTextOverlayInfoMessage.react",["cx","fbt","FDSDivider.react","FDSLink.react","FDSText.react","FlexLayout.react","React","immutable","suiMargin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i="https://www.facebook.com/business/help/980593475366490",j=b("immutable").Map({TEXT_PENALTY_HIGH:"#high",TEXT_PENALTY_MEDIUM:"#medium",TEXT_PENALTY_LOW:"#low"});a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,d=a.title,e=a.body;a=a.icon;a=a!=null?b("React").createElement("div",{className:"_6rnf"},a):null;d=d!=null?b("React").createElement(b("FDSText.react"),{color:"primary",display:"block",size:"header4",weight:"bold"},d):null;return b("React").createElement("div",{className:"_6rnd"},b("React").createElement(b("FDSDivider.react"),null),b("React").createElement("div",{className:"_6rne"},b("React").createElement(b("FlexLayout.react"),null,a,b("React").createElement("div",null,d,b("React").createElement(b("FDSText.react"),{color:"secondary",display:"block",margin:"_3-8y",size:"body3"},e,b("React").createElement("p",null,b("React").createElement(b("FDSLink.react"),{display:"block",href:c.getLearnMoreUrl(this.props.type),target:"_blank"},h._("Learn More"))))))))};return c}(b("React").PureComponent);a.getLearnMoreUrl=function(a){if(a==null)return i;a=j.has(a)?j.get(a):"";return i+a};e.exports=a}),null);
__d("AdsPlacementPlatforms",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({AUDIENCE_NETWORK:null,FACEBOOK:null,INSTAGRAM:null});e.exports=a}),null);
__d("AdsImageSpecPlacementPlatformUtils",["AdsPageTypes","AdsPlacementPlatforms","AdsPlacementPlatformUtils"],(function(a,b,c,d,e,f){"use strict";a={getImageSpecPlacementPlatform:function(a){if(!a.placement)return null;return b("AdsPlacementPlatformUtils").hasAnyFacebookPlacement_DEPRECATED([a.placement])||a.placement===b("AdsPageTypes").MOBILE_EXTERNAL||a.placement===b("AdsPageTypes").MOBILE_FB_STORY?b("AdsPlacementPlatforms").FACEBOOK:a.placement===b("AdsPageTypes").INSTAGRAM_STREAM?b("AdsPlacementPlatforms").INSTAGRAM:null}};e.exports=a}),null);
__d("AdsPlacementPositionPluginKeyToFbtConfig",["fbt","AdsAPIAudienceNetworkPosition","AdsPageTypeLabels","AdsPageTypes","AdsPlacementPositionLabelConstant","immutable"],(function(a,b,c,d,e,f,g){"use strict";a=b("immutable").OrderedMap().set("audience_network/classic",{title:g._("{platform} {position}",[g._param("platform",b("AdsPageTypeLabels")[b("AdsPageTypes").MOBILE_EXTERNAL]),g._param("position",b("AdsPlacementPositionLabelConstant")[b("AdsAPIAudienceNetworkPosition").CLASSIC])])}).set("audience_network/instream_video",{title:g._("{platform} {position}",[g._param("platform",b("AdsPageTypeLabels")[b("AdsPageTypes").MOBILE_EXTERNAL]),g._param("position",b("AdsPlacementPositionLabelConstant")[b("AdsAPIAudienceNetworkPosition").INSTREAM_VIDEO])])}).set("audience_network/rewarded_video",{title:g._("{platform} {position}",[g._param("platform",b("AdsPageTypeLabels")[b("AdsPageTypes").MOBILE_EXTERNAL]),g._param("position",b("AdsPlacementPositionLabelConstant")[b("AdsAPIAudienceNetworkPosition").REWARDED_VIDEO])])}).set("facebook/feed",{title:g._("Facebook Feeds"),publicVisibility:!0}).set("facebook/group",{title:g._("Facebook Groups"),publicVisibility:!1}).set("facebook/instant_article",{title:b("AdsPageTypeLabels")[b("AdsPageTypes").INSTANT_ARTICLE],publicVisibility:!0}).set("facebook/instream_video",{title:g._("Facebook In-Stream Videos")}).set("facebook/marketplace",{title:b("AdsPageTypeLabels")[b("AdsPageTypes").MARKETPLACE_MOBILE]}).set("facebook/right_column",{title:b("AdsPageTypeLabels")[b("AdsPageTypes").RIGHT_COLUMN]}).set("facebook/search",{title:g._("Facebook Search")}).set("facebook/stories",{title:b("AdsPageTypeLabels")[b("AdsPageTypes").MOBILE_FB_STORY]}).set("facebook/suggested_video",{title:b("AdsPageTypeLabels")[b("AdsPageTypes").MOBILE_FB_STORY]}).set("instagram/igtv",{title:g._("IGTV")}).set("instagram/story",{title:b("AdsPageTypeLabels")[b("AdsPageTypes").INSTAGRAM_STORY]}).set("instagram/stream",{title:b("AdsPageTypeLabels")[b("AdsPageTypes").INSTAGRAM_STREAM]}).set("messenger/inbox",{title:b("AdsPageTypeLabels")[b("AdsPageTypes").MESSENGER_INBOX]}).set("messenger/story",{title:b("AdsPageTypeLabels")[b("AdsPageTypes").MESSENGER_MOBILE_STORY]});e.exports=a}),null);
__d("AdsImageCropPerPlacementConfig",["fbt","AdsPageTypeLabels","AdsPageTypes","AdsPlacementPositionPluginKeyToFbtConfig","URI","immutable"],(function(a,b,c,d,e,f,g){"use strict";a=b("immutable").OrderedMap().set("facebook/feed",{body:g._("Appear in Facebook's mobile app and web."),learnMoreLink:new(b("URI"))("https://www.facebook.com/business/help/116118951805237"),title:b("AdsPlacementPositionPluginKeyToFbtConfig").get("facebook/feed").title}).set("facebook/instant_article",{body:g._("Engage readers through fast-loading, interactive Facebook articles."),learnMoreLink:new(b("URI"))("https://www.facebook.com/business/help/825186870955247"),title:b("AdsPageTypeLabels")[b("AdsPageTypes").INSTANT_ARTICLE]}).set("facebook/instream_video",{body:g._("Appear in videos from publishers and digital-first creators."),learnMoreLink:new(b("URI"))("https://www.facebook.com/business/help/1808815812765433"),title:b("AdsPlacementPositionPluginKeyToFbtConfig").get("facebook/instream_video").title}).set("facebook/suggested_video",{body:g._("Appear in the Suggested videos feed and the Facebook Watch feed."),learnMoreLink:new(b("URI"))("https://www.facebook.com/business/help/1559984974021610"),title:b("AdsPlacementPositionPluginKeyToFbtConfig").get("facebook/suggested_video").title}).set("facebook/right_column",{body:g._("Place your ad to the right of the Facebook desktop newsfeed."),learnMoreLink:new(b("URI"))("https://www.facebook.com/business/help/116118951805237"),title:b("AdsPlacementPositionPluginKeyToFbtConfig").get("facebook/right_column").title}).set("facebook/marketplace",{body:g._("Show up next to items for sale in Marketplace."),learnMoreLink:new(b("URI"))("https://www.facebook.com/business/help/1648521258544455"),title:b("AdsPlacementPositionPluginKeyToFbtConfig").get("facebook/marketplace").title}).set("facebook/stories",{body:g._("Appear next to user Stories with this full-screen creative format."),learnMoreLink:new(b("URI"))("https://www.facebook.com/business/help/190599608272281"),title:b("AdsPlacementPositionPluginKeyToFbtConfig").get("facebook/stories").title}).set("instagram/stream",{body:g._("Tell your brand's story where people seek visual inspiration."),learnMoreLink:new(b("URI"))("https://www.facebook.com/business/help/1603906456518352"),title:b("AdsPlacementPositionPluginKeyToFbtConfig").get("instagram/stream").title}).set("instagram/story",{body:g._("Place your ad in an immersive, vertical creative format."),learnMoreLink:new(b("URI"))("https://www.facebook.com/business/help/1639197963055851"),title:b("AdsPlacementPositionPluginKeyToFbtConfig").get("instagram/story").title}).set("audience_network/classic",{body:g._("Show your ad across great publishers' sites and apps."),learnMoreLink:new(b("URI"))("https://www.facebook.com/business/help/1409448922609084"),title:b("AdsPlacementPositionPluginKeyToFbtConfig").get("audience_network/classic").title}).set("audience_network/instream_video",{body:g._("Appear in videos 3 minutes or longer from our publishing partners."),learnMoreLink:new(b("URI"))("https://www.facebook.com/business/help/1808815812765433"),title:b("AdsPlacementPositionPluginKeyToFbtConfig").get("audience_network/instream_video").title}).set("audience_network/rewarded_video",{body:g._("Provide viewers with an incentive to watch your video ad."),learnMoreLink:new(b("URI"))("https://www.facebook.com/business/help/1808815812765433"),title:b("AdsPlacementPositionPluginKeyToFbtConfig").get("audience_network/rewarded_video").title}).set("messenger/inbox",{body:g._("Appear in the Messenger home screen, where people check and respond to messages."),learnMoreLink:new(b("URI"))("https://www.facebook.com/business/help/151265592264111"),title:b("AdsPlacementPositionPluginKeyToFbtConfig").get("messenger/inbox").title});e.exports=a}),null);
__d("adsImageCropPerPlacementHeaderText",["ix","fbt","AdsImageCropPerPlacementConfig","AdsPageTypeLabels","AdsPageTypes","FDSText.react","FlexLayout.react","Image.react","React","asset","immutable","suiMargin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("immutable").Map({facebook:g("487659"),instagram:g("687373"),messenger:g("505617"),audience_network:g("696361")});var i=b("immutable").Map((c={},c[b("AdsPageTypes").INSTAGRAM_STORY]={imageIcon:a.get("instagram"),placementTitle:b("AdsPageTypeLabels")[b("AdsPageTypes").INSTAGRAM_STORY]},c[b("AdsPageTypes").INSTAGRAM_STREAM]={imageIcon:a.get("instagram"),placementTitle:b("AdsPageTypeLabels")[b("AdsPageTypes").INSTAGRAM_STREAM]},c[b("AdsPageTypes").DESKTOP_FEED]={imageIcon:a.get("facebook"),placementTitle:h._("Facebook Feeds")},c[b("AdsPageTypes").MOBILE_FEED]={imageIcon:a.get("facebook"),placementTitle:h._("Facebook Feeds")},c[b("AdsPageTypes").INSTANT_ARTICLE]={imageIcon:a.get("facebook"),placementTitle:b("AdsPageTypeLabels")[b("AdsPageTypes").INSTANT_ARTICLE]},c[b("AdsPageTypes").RIGHT_COLUMN]={imageIcon:a.get("facebook"),placementTitle:b("AdsPageTypeLabels")[b("AdsPageTypes").RIGHT_COLUMN]},c[b("AdsPageTypes").MARKETPLACE_MOBILE]={imageIcon:a.get("facebook"),placementTitle:b("AdsPageTypeLabels")[b("AdsPageTypes").MARKETPLACE_MOBILE]},c[b("AdsPageTypes").MOBILE_FB_STORY]={imageIcon:a.get("facebook"),placementTitle:b("AdsPageTypeLabels")[b("AdsPageTypes").MOBILE_FB_STORY]},c[b("AdsPageTypes").MESSENGER]={imageIcon:a.get("messenger"),placementTitle:b("AdsPageTypeLabels")[b("AdsPageTypes").MESSENGER]},c[b("AdsPageTypes").MOBILE_EXTERNAL]={imageIcon:a.get("audience_network"),placementTitle:b("AdsImageCropPerPlacementConfig").get("audience_network/classic").title},c));d=function(a,c){c===void 0&&(c=!1);if(c&&a!=null&&i.has(a)){c=i.get(a);a=c.placementTitle;c=c.imageIcon;return b("React").createElement(b("FlexLayout.react"),null,b("React").createElement(b("Image.react"),{src:c}),b("React").createElement(b("FDSText.react"),{margin:"_3-9a",size:"header4",weight:"bold"},h._("Crop Image for {placement title name}",[h._param("placement title name",a)])))}return h._("Crop Image")};e.exports=d}),null);
__d("AdsImageCropperEditor.react",["ix","cssVar","cx","fbt","AdImageSpecCropKeys","AdImageSpecsUtils","AdsImageCropperEditorHeader.react","AdsImageCropperEditorItem.react","AdsImageCropperEditorPlaceholderItem.react","AdsImageCropperImageOverlayContent","AdsImageCropperImageSpecSelectorContainer.react","AdsImageCropperTextCheckerHOC.react","AdsImageCropperTextOverlayInfoMessage.react","AdsImageCropperTextPenaltyCheckerContainer.react","AdsImageCropperUtils","AdsImageCropSelector.react","AdsImageDialog.react","AdsImageLegacy","AdsImagePanelNote.react","AdsImageSpecPlacementPlatformUtils","AdsImageUtils","AdsImageValidation","AdsInterfacesLogEvents","AdsInterfacesLogger","AdsPageTypes","AdsPlacementAssetCustomizationLoggerEvents","AdsPlatformTypes","AHGLink.react","ApiAdPageTypeToPlatformMap","CenteredContainer.react","Event","FDSButton.react","FDSCheckboxInput.maintenance.react","FDSModal.react","FDSModalFooter.react","FDSModalHeader.react","FDSSection.react","FlexLayout.react","Image.react","React","ReactFragment","SUIBusinessTheme","SUIText.react","adsImageCropPerPlacementHeaderText","asset","debounce","emptyFunction","emptyObject","getViewportDimensions","gkx","mapObject","suiMargin"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("AdsImageCropperImageOverlayContent").MAP_INFO_COMPONENTS_FOR_LOADED_TYPE,l=b("AdsImageCropperImageOverlayContent").MAP_INFO_COMPS_FOR_ERROR,m=b("AdsImageCropperImageOverlayContent").MAP_INFO_COMPS_FOR_LOADING,n=parseInt("684",10),o=40,p=50,q=parseInt("880",10),r=2,s=12,t=16,u=32,v=20,w=12,x=70,y=186,z=100,A=12,B=parseInt("26",10)+w,C=52,D=28,E=8,F=[b("AdsPageTypes").MOBILE_INSTREAM_VIDEO],G=b("AdsImageCropperTextCheckerHOC.react")(b("AdsImageCropperTextOverlayInfoMessage.react"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=null,d.$29=function(a){a?d.$31():d.$32(),b("AdsInterfacesLogger").log({eventName:"crop_image_choose_different_image",eventCategory:b("AdsInterfacesLogEvents").EventCategory.USER_ACTION})},d.$21=function(a){d.setState({selectedPlacement:a}),b("AdsInterfacesLogger").log({data:{source:a},eventName:"crop_image_change_placement",eventCategory:b("AdsInterfacesLogEvents").EventCategory.USER_ACTION})},d.$33=function(a){var c=d.$4(d.state.selectedPlacement),e=d.state.placementImageSpecs,f=e[d.state.selectedPlacement];if(f!==a){e[d.state.selectedPlacement]=a;d.setState({placementImageSpecs:e});d.props.onImageUpdate(c,d.state.selectedPlacement,(f={},f[a.cropKey]=c.crops[a.cropKey]||b("AdsImageUtils").calculateDefaultCoordinates(c.getWidth(),c.getHeight(),a.aspectRatio),f))}},d.$18=function(){d.setState({showImageLibrary:!0}),b("AdsInterfacesLogger").log({eventName:"crop_image_click_change_image",eventCategory:b("AdsInterfacesLogEvents").EventCategory.USER_ACTION})},d.$6=function(){d.setState({showImageLibrary:!1})},d.$7=function(a){a[0]&&d.props.onImageUpdate(new(b("AdsImageLegacy"))(babelHelpers["extends"]({},a[0])),d.state.selectedPlacement,d.props.canChangeImage===!0?b("emptyObject"):null),d.$6()},d.state={placementImageSpecs:d.$2(d.props.image,d.props.platformCustomizations,d.$3(d.props.imageSpecs)),selectedPlacement:d.props.selectedPlacement!=null?d.props.selectedPlacement:d.props.imageSpecs[0].placement},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){var a=this,c=b("debounce")(function(){return a.forceUpdate()});this.$1=b("Event").listen(window,"resize",c)};d.componentWillUnmount=function(){this.$1&&this.$1.remove&&this.$1.remove(),this.$1=null};d.UNSAFE_componentWillReceiveProps=function(a){__p&&__p();var b=a.imageSpecs;if(b.length===0)return;var c=a.image,d=this.state.selectedPlacement;a=a.platformCustomizations;var e=this.state.placementImageSpecs[d];d=b.every(function(a){return e!==a});(!e||d)&&this.setState({selectedPlacement:b[0].placement});this.setState({placementImageSpecs:this.$2(c,a,this.$3(b))})};d.renderLayers=function(){var a;this.state.showImageLibrary===!0&&(a=b("React").createElement(b("AdsImageDialog.react"),{accountID:this.props.accountID,libraryImages:this.props.libraryImages,maxSelectedImages:1,selectedImages:[this.$4(this.state.selectedPlacement).toJSON()],specs:this.$5(),onCancel:this.$6,onSelect:this.$7}));return b("ReactFragment").create({dialog:a})};d.render=function(){var a=this.state.selectedPlacement,c=this.$4(a),d=this.state.placementImageSpecs[a],e=this.$8()-(o+p)+(this.props.isV1===!0?E:0),f=this.$9();if(this.props.imageSpecs.length===0||!d)return b("React").createElement("div",null,this.renderLayers());var g=null;this.state.showCustomImagePanel===!0&&b("ApiAdPageTypeToPlatformMap")[a]&&c.equals(this.props.image)?a=this.$10(d):(a=this.$11(c,d),g=this.$12(c));g==null&&(g=this.$12(c));d=b("ApiAdPageTypeToPlatformMap")[this.state.selectedPlacement]||b("AdsPlatformTypes").DEFAULT_PLATFORM;c=b("React").createElement(b("FlexLayout.react"),{style:{height:e,overflowX:this.props.isV1===!0?"hidden":"inherit"}},b("React").createElement("div",{className:"_2z_-"},b("React").createElement("div",{className:"_5oh2"},b("React").createElement(b("AdsImageCropperEditorHeader.react"),{canResetChanges:this.props.canResetChanges!=null&&this.props.canResetChanges[d],image:this.props.image,isV1:this.props.isV1,selectedPlacement:this.state.selectedPlacement,onReset:this.props.onReset}),a,g)),b("React").createElement("div",{style:{width:f}},this.$13(),this.renderLayers()));return this.props.isContentsOnly===!0?c:b("React").createElement(b("FDSModal.react"),{footer:this.$14(),header:this.$15(),isShown:!0,width:880,onHide:this.props.onClose},b("React").createElement(b("FDSSection.react"),{hasPadding:!1},c))};d.$15=function(){return b("React").createElement(b("FDSModalHeader.react"),{title:this.$16()})};d.$17=function(a){return this.props.disabledSpecs.some(function(b){return b.placement===a})};d.$14=function(){var a=b("React").createElement(b("FDSButton.react"),{label:j._("Cancel"),onClick:this.props.onClose}),c=this.props.onSaveToLibraryCheckChange||b("emptyFunction"),d=this.props.canChangeImage===!0?b("React").createElement(b("FDSButton.react"),{icon:b("React").createElement(b("Image.react"),{src:g("534757")}),label:j._("Change Image"),onClick:this.$18}):null;c=this.props.isV1===!0?b("React").createElement(b("FDSCheckboxInput.maintenance.react"),{label:j._("Save to Library"),margin:this.props.canChangeImage===!0?"_3-9b":null,tooltip:j._("Save current crop to your Account Images library"),value:this.props.shouldSaveToAssetLibrary,onChange:c}):null;return b("React").createElement(b("FDSModalFooter.react"),babelHelpers["extends"]({leftContent:b("React").createElement("div",null,d,c),primaryButton:b("React").createElement(b("FDSButton.react"),{"data-testid":"image-cropper-dialog-close-button",label:this.props.onConfirm?j._("Confirm"):j._("Done"),use:"primary",onClick:this.props.onConfirm||this.props.onClose})},this.props.onConfirm?{secondaryButton:a}:null))};d.$13=function(){__p&&__p();var a=this.state.selectedPlacement,c=this.$3(this.props.imageSpecs),d=this.$19()?1:Object.keys(c).length,e=d>1,f=this.$9()-(d-1)*w-d*r*2-2*(e?s:u),g=this.$8()-o-p-2*(e?t:v);g=Math.min(g-r*2,e?x:y);f=this.$20(c,f,g);var h=this.state.placementImageSpecs,i=Object.keys(h).map(function(a){return h[a]}),j=[];for(var n=0;n<d;n++){var q=i[n],z=Number(q.aspectRatio);if(!q.placement||d>1&&q.placement===b("AdsPageTypes").INSTAGRAM_STORY)continue;var A=this.$4(q.placement),B=z>0?z:A.width/A.height,C=f[q.placement].width,D=C/B;e&&(D=f[q.placement].height,C=f[q.placement].height*B);D>g&&(D=g,C=D*B);B=a===q.placement;B||(C+=r,D+=r);z<=0&&(q=babelHelpers["extends"]({},q,{height:A.height,width:A.width,aspectRatio:A.width/A.height}));z=void 0;this.state.showCustomImagePanel===!0&&b("ApiAdPageTypeToPlatformMap")[q.placement]&&A.equals(this.props.image)?z=b("React").createElement(b("AdsImageCropperEditorPlaceholderItem.react"),{height:Math.floor(D),isSelected:B,placement:q.placement,width:Math.floor(C),onClick:this.$21}):z=b("React").createElement(b("AdsImageCropperEditorItem.react"),{height:Math.floor(D),image:A,imageSpec:q,isDisabled:this.$17(q.placement),isError:this.$22(A,q),isReady:this.$23(A),isSelected:B,width:Math.floor(C),onClick:this.$21,onContextMenu:this.$24,onCropUpdate:this.props.onImageUpdate});j.push(b("React").createElement("div",{className:"_145i",key:A.getUniqueIdentifier()+q.placement+q.cropKey,style:{width:f[q.placement].width}},z))}return b("React").createElement("div",null,this.$25(e),this.$26(c,f),b("React").createElement("div",{className:"_5twi"},j),this.$27(),this.$28(),this.props.isV1===!1?b("React").createElement(b("AdsImageCropperTextPenaltyCheckerContainer.react"),{componentClass:G,image:this.$4(this.state.selectedPlacement),loadErrorComponents:l,loadedStateComponents:k,loadingStateComponents:m}):null)};d.$19=function(){return b("gkx")("866588")?!0:this.props.isSingleCropMode===!0};d.$27=function(){__p&&__p();var a=this.state.selectedPlacement;if(!b("ApiAdPageTypeToPlatformMap")[a]||!this.props.canSetPlatformCustomImage||this.$19())return null;var c=this.props.image;a=this.$4(a);c=this.state.showCustomImagePanel===!0||!c.equals(a);a=b("React").createElement(b("FDSCheckboxInput.maintenance.react"),{display:"block",label:j._("Select a separate image for this placement"),value:c,onChange:this.$29});var d;c&&(d=b("React").createElement("div",null,b("React").createElement(b("FDSButton.react"),{label:j._("Change Image"),style:{marginTop:"12px"},onClick:this.$18}),b("React").createElement(b("AdsImagePanelNote.react"),{imageSpec:this.$30()})));return b("React").createElement("div",{className:"_2ph_"},a,d)};d.$11=function(a,c){var d=this.$8()-p-2*A-(o+C)-B-(this.props.showSpecSelector===!0?D:0);return b("React").createElement(b("AdsImageCropSelector.react"),{disableResizer:Number(c.aspectRatio)<=0,height:d,image:a,imageSpec:c,isDisabled:c.placement!=null?this.$17(c.placement):!1,isError:this.$22(a,c),isReady:this.$23(a),suppressValidationError:this.props.suppressValidationError,width:q-this.$9()-2*A,onContextMenu:this.$24,onCropUpdate:this.props.onImageUpdate})};d.$10=function(a){a=this.$8()-2*A;var c=q-this.$9()-2*A;return b("React").createElement("div",{className:"_5tv-",style:{height:a,width:c}},b("React").createElement(b("CenteredContainer.react"),{className:"_kzj",fullHeight:!0,vertical:!0},j._("Please select an image for this placement")))};d.$12=function(a){var c=this.state.selectedPlacement,d=this.$17(c),e=this.$3(this.props.imageSpecs),f=!this.props.shouldShowSpecSelector&&e[c].length<2;if(d||this.props.showSpecSelector==!1||f)return null;d=this.state.placementImageSpecs[c];return b("React").createElement("div",{className:"_23et"},b("React").createElement(b("AdsImageCropperImageSpecSelectorContainer.react"),{image:a,imageSpecs:e[c],selectedSpec:d,onUpdateImageSpec:this.$33}))};d.$26=function(a,c){if(Object.keys(c).length<=1)return null;var d=Object.keys(a).map(function(d){return b("React").createElement("div",{className:"_qmy",key:"header title"+d,style:{width:c[d].width}},b("AdsImageSpecPlacementPlatformUtils").getImageSpecPlacementPlatform(a[d][0]))});return b("React").createElement(b("CenteredContainer.react"),{className:"_qmz",horizontal:!0,vertical:!1},b("React").createElement("div",null,d))};d.$34=function(){return this.props.imageSpecs.length===1&&this.props.imageSpecs[0].cropKey===b("AdImageSpecCropKeys").NO_CROP};d.$28=function(){var a=this.state.selectedPlacement;if(!this.$17(a)&&!this.$34())return null;var c=this.$3(this.props.imageSpecs);c=b("AdsImageSpecPlacementPlatformUtils").getImageSpecPlacementPlatform(c[a][0]);if(c==null)return null;c=c.charAt(0).toUpperCase()+c.slice(1).toLowerCase();return b("React").createElement(b("SUIText.react"),{className:"_26_h",display:"block",size:"meta1",theme:b("SUIBusinessTheme"),weight:"bold"},j._("Editing the crop for {Placement name (Facebook or Instagram)} is not available",[j._param("Placement name (Facebook or Instagram)",c)]))};d.$25=function(a){return!a?null:b("React").createElement(b("SUIText.react"),{className:"_3-8z _3-8t _3-96",display:"block",size:"meta1",theme:b("SUIBusinessTheme")},j._("Select the image to edit how it is cropped. {=Learn about ad placements} on Facebook and Instagram.",[j._param("=Learn about ad placements",b("React").createElement(b("AHGLink.react"),{href:"/business/help/202838606926630",label:j._("Learn about ad placements"),onClick:this.$35}))]))};d.$35=function(){b("AdsInterfacesLogger").log({eventName:"crop_image_click_learn_about_ad_placements",eventCategory:b("AdsInterfacesLogEvents").EventCategory.USER_ACTION})};d.$8=function(){var a=b("getViewportDimensions")().height;a=a-z;return Math.max(Number("384"),Math.min(n,a))};d.$22=function(a,b){return this.props.suppressValidationError===!0?!1:b.placement!=null?a.hasValidationError(b.placement):!1};d.$23=function(a){return a.isStockImage()?a.hasFullSizeDimensions():a.hasDimensions()};d.$9=function(){var a=this.props.isV1===!0?"0":"250";return parseInt(a,10)};d.$24=function(a,b){a.isStockImage()&&b.preventDefault()};d.$2=function(a,c,d){__p&&__p();var e=this;return b("mapObject")(d,function(d,f){__p&&__p();var g;f=b("ApiAdPageTypeToPlatformMap")[f];var h=f&&c&&c[f];h||(h=a);var i=b("AdsImageValidation").getDefaultImageSpec(f,h,d),j=Object.keys(h.crops);h=b("AdsImageCropperUtils").filterDisabledSpecsOnly(h,d);var k=b("AdImageSpecsUtils").getRecommendedImageSpec(d);h=h.includes(k);h||(g=k);(e.$19()&&f||!f||c&&c[f])&&d.forEach(function(a){j.includes(a.cropKey)&&(g=a)});return g||i})};d.$3=function(a){var b={};a.filter(function(a){return!F.includes(a.placement)}).forEach(function(a){if(!a.placement)return;b[a.placement]=b[a.placement]||[];b[a.placement].push(a)});return b};d.$20=function(a,b,c){__p&&__p();var d=this,e=a;if(this.$19()){a=this.props.imageSpecs.find(function(a){return F.indexOf(a.placement)});if(a){var f;e=(f={},f[a.placement]=[a],f)}}var g=0,h={};Object.keys(e).map(function(a){var b=d.$4(a),c=b.width/b.height;h[a]=e[a].map(function(a){return Number(a.aspectRatio)>0?a.aspectRatio:c}).reduce(function(a,b){return Math.max(parseFloat(a),parseFloat(b))});g+=h[a]});var i={};Object.keys(h).forEach(function(a){var d=h[a],e=d/g*b,f=e/d;f>c&&(f=c,e=f*d);i[a]={height:f,width:e}});return i};d.$4=function(a){var c;a=b("ApiAdPageTypeToPlatformMap")[a];var d=this.props.platformCustomizations;d&&a&&(c=d[a]);return c||this.props.image};d.$31=function(){b("AdsInterfacesLogger").log({eventName:b("AdsPlacementAssetCustomizationLoggerEvents").CLICK_OLD_CROPPER_INSTAGRAM_CUSTOMIZATION,eventCategory:b("AdsInterfacesLogEvents").EventCategory.USER_ACTION}),this.setState({showCustomImagePanel:!0})};d.$32=function(){b("AdsInterfacesLogger").log({eventName:b("AdsPlacementAssetCustomizationLoggerEvents").REMOVE_OLD_CROPPER_INSTAGRAM_CUSTOMIZATION,eventCategory:b("AdsInterfacesLogEvents").EventCategory.USER_ACTION}),this.props.onImageUpdate(this.props.image,this.state.selectedPlacement,null),this.setState({showCustomImagePanel:!1})};d.$5=function(){var a=this,c=this.props.imageSpecs.filter(function(c){return b("ApiAdPageTypeToPlatformMap")[c.placement]===b("ApiAdPageTypeToPlatformMap")[a.state.selectedPlacement]});return b("AdImageSpecsUtils").getUniqueCropImageSpecs(c)};d.$30=function(){var a=this.$5();return a.find(function(a){return a.cropKey===b("AdImageSpecCropKeys")["100x100"]})||a[0]};d.$16=function(){return b("adsImageCropPerPlacementHeaderText")(this.state.selectedPlacement,this.props.isV1)};return c}(b("React").Component);a.defaultProps={disabledSpecs:[],isContentsOnly:!1,isV1:!1,shouldShowSpecSelector:!1,onClose:b("emptyFunction"),onImageUpdate:b("emptyFunction"),onSaveToLibraryCheckChange:b("emptyFunction")};e.exports=a}),null);