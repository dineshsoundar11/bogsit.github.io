if (self.CavalryLogger) { CavalryLogger.start_js(["2HPBs"]); }

__d("ExternalTrackingTag",["AsyncSignal","Event","TrackingPixel"],(function(a,b,c,d,e,f){var g={listenForElementClick:function(a,c,d,e,f){b("Event").listen(a,"click",function(){g.sendRequest(c,d,e,f)})},sendRequest:function(a,c,d,e){if(!a)return;new(b("AsyncSignal"))("/ads/external_tracking_tag/",{href:a,tracking_tag_id:c,adgroup_id:d,ad_id:e}).send();b("TrackingPixel").loadWithNoReferrer(a)}};e.exports=g}),null);
__d("FBLynxWrapper",["URI","isFacebookURI","isLinkshimURI"],(function(a,b,c,d,e,f){"use strict";a={SUBDOMAIN:"l",SUBDOMAIN_M:"lm",PATH:"/",URL_PARAM:"u",ENC_PARAM:"e",isLynxLink:function(a){if(a.getAttribute("data-lynx-async-dest"))return!0;if(a.getAttribute("data-lynx-uri"))return!0;return b("isLinkshimURI")(new(b("URI"))(a.href))?!0:!1}};e.exports=a}),null);
__d("LitestandColumnManager",["Arbiter","BlueBar","Event","NavigationMessage","Run","SubscriptionsHandler","clamp","getScrollPosition"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=0,h=null;function i(){if(h)return;h=new(b("SubscriptionsHandler"))();h.addSubscriptions(b("Arbiter").subscribe(b("NavigationMessage").NAVIGATION_BEGIN,function(){l(0),j()}),b("Event").listen(window,"resize",function(){b("BlueBar").hasFixedBlueBar()||(l(0),j())}),b("Event").listen(window,"scroll",function(){k()||j()}));b("Run").onLeave(function(){return h&&h.release()})}function j(){h&&h.release(),h=null}function k(){if(g<=0)return!1;l(b("clamp")(b("getScrollPosition")(window).y,0,g));return g>0}function l(a){g=a}a={adjustVerticalWindowPosition:function(a,b){i(),l(b),window.scrollTo(a.x,a.y+g)}};e.exports=a}),null);
__d("LitestandStream",["csx","invariant","Arbiter","CSS","EventEmitter","LitestandColumnManager","Run","getScrollPosition","nullthrows"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j,k,l,m=new(b("EventEmitter"))(),n={init:function(a,c,d,e){i=d,k=a,j=e,l||(l=b("Arbiter").subscribe("ufi/didUpdate",function(a,c){c.offsetY&&b("LitestandColumnManager").adjustVerticalWindowPosition(b("getScrollPosition")(window),c.offsetY)})),b("Run").onLeave(function(){l&&l.unsubscribe(),l=null,m.removeAllListeners("ready"),k=null}),m.emit("ready")},getStoriesSelector:function(){return"._5jmm"},getStreamRoot:function(){return k},getSectionID:function(){return i},getStoryID:function(){return j},isStory:function(a){return b("CSS").matchesSelector(a,"._5jmm")},getFeedStreamID:function(){return parseInt(b("nullthrows")(k).id.split("feed_stream_")[1],16)%1e8},isReady:function(){return!!k},addReadyListener:function(a){n.isReady()||h(0,1974);return m.once("ready",a)}};e.exports=n}),null);
__d("FeedAdsClickLogger",["Arbiter","AsyncRequest","BanzaiODS","DataAttributeUtils","DOM","ExternalTrackingTag","FBLynxWrapper","LitestandMessages","LitestandStream","Parent","SLConfig","TrackingNodes","URI","collectDataAttributes","ge","isFacebookURI","isLinkshimURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={},h=!1,i,j=!1,k=function(){__p&&__p();function a(){}var c=a.prototype;c.init=function(a){i=b("SLConfig").gk.sl_replace_s,b("Arbiter").subscribe("ClickRefAction/new",this.onNewUserAction.bind(this)),b("Arbiter").subscribe("ClickRefAction/contextmenu",this.onNewUserAction.bind(this)),b("Arbiter").subscribe("ClickRefAction/middleclick",this.onNewUserAction.bind(this)),j=a.see_more_logging_enabled,a.append_tracking_data_to_links&&(this.appendTrackingDataToLinks(),b("Arbiter").subscribe(b("LitestandMessages").STORIES_INSERTED,this.appendTrackingDataToLinks.bind(this)),b("Arbiter").subscribe("FeedAdsClickLogger/refreshTrackingData",this.appendTrackingDataToLinks.bind(this),"new"))};c.getStories=function(){var a=b("LitestandStream").getStreamRoot();if(a)return b("DOM").scry(a,b("LitestandStream").getStoriesSelector());else{a=b("ge")("home_stream");if(a)return b("DOM").scry(a,".uiStreamStory")}return[]};c.appendTrackingDataToLinks=function(){__p&&__p();var a=this.getStories();for(var c=0;c<a.length;c++){var d=a[c],e=b("DataAttributeUtils").getDataFt(d);if(!e||e.indexOf("ei")===-1&&e.indexOf("mei")===-1)continue;e=b("DOM").scry(d,"a");for(var d=0;d<e.length;d++){var f=e[d];if(f.getAttribute("ajaxify")!=null)continue;if(f.getAttribute("rel")!=null)continue;var g=f.getAttribute("href");if(!g||g.charAt(0)==="#")continue;g=new(b("URI"))(f);if(g.domain==="m.facebook.com")continue;if(b("isFacebookURI")(g)===!1)continue;if(b("isLinkshimURI")(g)||b("FBLynxWrapper").isLynxLink(f))continue;if("hash"in g.getQueryData())continue;if(i&&(g.getPath()==="/ads/about"||g.getPath()==="/about/ads"))continue;f.setAttribute("href",l(f).toString());f.setAttribute("onmousedown","this.href = this.href.replace('__md__=0', '__md__=1');")}}};c.getHref=function(a){return a.getAttribute&&(a.getAttribute("ajaxify")||a.getAttribute("data-endpoint"))||a.action||a.href};c.sendLogRequest=function(a,c){__p&&__p();var d=a.ei||a.ai;!d&&a.mei&&(d=a.mf_story_key);if(a!==null&&typeof d==="string"){var e=!1;if(a.tn){var f=b("TrackingNodes").parseTrackingNodeString(a.tn);for(var h=0;h<f.length;h++){var i=f[h][0];switch(i){case b("TrackingNodes").types.LIKE_LINK:case b("TrackingNodes").types.UNLIKE_LINK:case b("TrackingNodes").types.COMMENT:case b("TrackingNodes").types.COMMENT_LINK:case b("TrackingNodes").types.ADD_COMMENT_BOX:case b("TrackingNodes").types.MULTI_ATTACHMENT_VIDEO:return;case b("TrackingNodes").types.XBUTTON:case b("TrackingNodes").types.HIDE_LINK:case b("TrackingNodes").types.REPORT_SPAM_LINK:case b("TrackingNodes").types.HIDE_ALL_LINK:case b("TrackingNodes").types.DROPDOWN_BUTTON:case b("TrackingNodes").types.UNHIDE_LINK:return;case b("TrackingNodes").types.RELATED_SHARE_ARTICLE:case b("TrackingNodes").types.RELATED_SHARE_VIDEO:return;case b("TrackingNodes").types.TRANSLATION:return;case b("TrackingNodes").types.ATTACHMENT:case b("TrackingNodes").types.USER_MESSAGE:e=!0;break}}}i=Date.now();h=500;a.duplicate_click=!!g[d]&&i-g[d]<h;g[d]=i;f=new(b("AsyncRequest"))("/ajax/ssinfeed/end/").setData(a).setAllowCrossPageTransition(!0).setMethod("POST");f.send();h=a.href;b("isLinkshimURI")(new(b("URI"))(h))&&new(b("URI"))(h).getQueryData()&&(h=new(b("URI"))(h).getQueryData().u);e&&!a.duplicate_click&&c!==null&&c.url&&h&&b("isFacebookURI")(new(b("URI"))(h))===!1&&(b("ExternalTrackingTag").sendRequest(c.url,c.tag_id,c.adgroup_id),b("BanzaiODS").bumpEntityKey("external_tracking_tags","request_sent"))}};c.onNewUserAction=function(a,c){__p&&__p();if(!c.node)return;a=this.getHref(c.node);var d=b("Parent").byTag(c.node,"input")||b("Parent").byTag(c.node,"button");!a&&d&&d.type=="submit"&&d.getAttribute&&b("DataAttributeUtils").getDataFt(d)&&(a="#");d=!1;if(c.node.getAttribute){var e=b("DataAttributeUtils").getDataFt(c.node);d=e&&e.indexOf("force_log_href")!=-1}!d&&c.event&&c.node.tagName==="A"&&c.event.defaultPrevented&&j&&(a="#");c.event&&(c.event.type==="click"||c.event.type==="contextmenu"||c.event.type==="mousedown")&&(e=b("collectDataAttributes")(c.node,["ft"]),e.ft.href=a,e.ft.mouse_type=c.event.type,e.ft.is_right_click=c.event.isRightClick()?1:0,e.ft.click_type=c.event.isRightClick()?"right_click":c.event.type==="click"?"left_click":"middle_click",d=b("collectDataAttributes")(c.node,["external-tracking-tags"]),a=b("collectDataAttributes")(c.node,["leadgen"]),a&&a.leadgen&&a.leadgen.submitted&&(e.ft.leadgen_submitted=1),this.sendLogRequest(e.ft,d["external-tracking-tags"]))};return a}();function l(a){var c=new(b("URI"))(a.href);a=b("collectDataAttributes")(a,["ft"]).ft;var d=c.getQueryData();d.ft=a;d.__md__=0;c.setQueryData(d);return c}e.exports={init:function(a){h===!1&&(new k().init(a),h=!0)},buildURL:l}}),null);
__d("SLPerfTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:SLPerfLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:SLPerfLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:SLPerfLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setCount=function(a){this.$1.count=a;return this};c.setDurationMs=function(a){this.$1.duration_ms=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={count:!0,duration_ms:!0,event:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("cxodecode",["invariant"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=36,i=2;function a(a){__p&&__p();if(!a)return"";a=a.cxononce;a||g(0,4289);var b=a.substr(0,a.length-i);a=parseInt(a.substr(-i),h);var c="";for(var d=0;d<b.length;d+=i)c+=String.fromCharCode(parseInt(b.substr(d,i),h)^a);return c}e.exports=a}),null);
__d("SLUtils",["csx","Arbiter","DOM","Event","FeedAdsClickLogger","LitestandMessages","LitestandStream","Run","SLConfig","SLPerfTypedLogger","URI","clearTimeout","curry","cxodecode","gkx","goURI","joinClasses","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("gkx")("677764"),i=!1,j=[];function a(a,c){__p&&__p();if(i)return;i=!0;if(!b("SLConfig").gk.s_link_utils)return;z()&&(A().setEvent("init").log(),C("init_timer"));k();b("SLConfig").gk.sl_replace_about_link&&!h&&p(function(a,b){return q(a,b)});if(b("SLConfig").gk.sl_replace_s){w(a);var d=c.map(function(a){return{nonce:b("cxodecode")(a.nonce),className:b("cxodecode")(a.className)}});p(function(a,c){d.forEach(function(c){var d=b("DOM").scry(a,c.nonce);d.forEach(function(a){while(a.firstChild)a.removeChild(a.firstChild);a.className=b("joinClasses")(a.className,c.className)})})})}m();z()&&A().setEvent("init_duration").setDurationMs(D("init_timer")).log()}function k(){b("Arbiter").subscribe(b("LitestandMessages").STORIES_INSERTED,m),b("Arbiter").subscribe("FeedAdsClickLogger/refreshTrackingData",m,"new")}function c(){z()&&C("cleanup_timer"),j.forEach(function(a){a.unsubscribe()}),i=!1,j=[],z()&&A().setEvent("cleanup_duration").setDurationMs(D("cleanup_timer")).log()}var l=null;function m(){__p&&__p();z()&&C("hsa_timer");b("clearTimeout")(l);l=null;var a=[],c=t(),d=y(),e=!1;d.forEach(function(b){__p&&__p();if(!b.id)return;if(c.has(b.id))return;if(!v(b,b.id)){e=!0;return}c.add(b.id);a.push([b,b.id])});e&&(l=b("setTimeoutAcrossTransitions")(m,b("SLConfig").sv.sl_content_waiting_delay),z()&&A().setEvent("hsa_waiting_for_content").log());z()&&A().setEvent("hsa_stories_added").setCount(a.length).log();if(a.length===0)return;a.forEach(function(a){var b=a[0],c=a[1];return o().forEach(function(a){return a(b,c)})});z()&&A().setEvent("hsa_duration").setDurationMs(D("hsa_timer")).log()}var n=[];function o(){return n}function p(a){n.push(a)}function q(a,c){__p&&__p();a=v(a,c);if(!a){z()&&A().setEvent("usl_real_subtitle_missing").log();return}c=b("DOM").scry(a,"a");a=c.filter(function(a){a=new(b("URI"))(a.href).getPath();return a==="/ads/about"||a==="/about/ads"});z()&&A().setEvent("usl_links_updated").setCount(a.length).log();a.forEach(function(a){var c=b("FeedAdsClickLogger").buildURL(a);b("Event").listen(a,"click",b("curry")(r,c));a.href="#"})}function d(a){b("Event").listen(a.link,"click",b("curry")(r,new(b("URI"))("/ads/about")))}function f(a){return}function r(a,c){b("goURI")(a),b("Event").stop(c)}var s=new Set();function t(){return s}var u=new Map();new Map();function v(a,c){var d=null;u.has(c)?d=u.get(c):d=a;c=b("DOM").scry(d,"._5pcp");if(c.length===0)return null;else return c[0]}function w(a){var c=document.createElement("style");c.type="text/css";c.textContent=b("cxodecode")(a);document.getElementsByTagName("head")[0].appendChild(c)}function x(){return b("LitestandStream").getStreamRoot()||document.body}function y(){return b("DOM").scry(x(),"._5pat")}function z(){return!!b("SLConfig").gk.sl_perf_logging}function A(){return new(b("SLPerfTypedLogger"))()}var B=new Map();function C(a){B.set(a,Date.now())}function D(a){a=B.get(a);return a==null?-1:Date.now()-a}b("Run").onBeforeUnload(c);g={init:a,openLink:f,openLabelLink:d};e.exports=g}),null);
__d("ConditionClassOnVisible",["CSS","Run","intersectionObserverEntryIsIntersecting","observeIntersection"],(function(a,b,c,d,e,f){"use strict";a={track:function(a,c,d){var e=b("observeIntersection")(a,function(a){b("CSS").conditionClass(a.target,c,d===b("intersectionObserverEntryIsIntersecting")(a))});b("Run").onLeave(function(){e.remove()})}};e.exports=a}),null);
__d("MainThreadPerformanceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MainThreadPerformanceLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MainThreadPerformanceLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MainThreadPerformanceLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAction=function(a){this.$1.action=a;return this};c.setArtilleryTraceID=function(a){this.$1.artillery_trace_id=a;return this};c.setEventDurationMs=function(a){this.$1.event_duration_ms=a;return this};c.setFrameDrops=function(a){this.$1.frame_drops=a;return this};c.setLargeFrameDrops=function(a){this.$1.large_frame_drops=a;return this};c.setMaxFrameDrops=function(a){this.$1.max_frame_drops=a;return this};c.setParallelActions=function(a){this.$1.parallel_actions=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setSampleRate=function(a){this.$1.sample_rate=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={action:!0,artillery_trace_id:!0,event_duration_ms:!0,frame_drops:!0,large_frame_drops:!0,max_frame_drops:!0,parallel_actions:!0,sample_rate:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("ArtilleryInteractionTraceName",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DETAILS_PAGE_LOADING:"Details Page Loading",FBPKG_UI:"fbpkg_ui",BACKBONE_UI:"backbone_ui",ADS_INTERFACES_INTERACTION:"ADS_INTERFACES_INTERACTION",ADS_PERF_SCENARIO:"ads_perf_scenario",ADS_WAIT_TIME:"ads_wait_time",INTERN_NOTIFY_INBOX_PAGE_LOAD:"intern_notify_inbox_page_load",INTERN_NOTIFY_JEWEL_LIST_LOAD:"intern_notify_jewel_list_load",MAIN_THREAD_PERFORMANCE:"main_thread_performance",PAGES_INBOX_WWW_LOADING_ITEM:"pages_inbox_www.loading_item",SEVMANAGER_POWERSEARCH_INITIAL_PAGE_LOAD:"sevmanager_powersearch_initial_page_load",WATCH_SECTIONS_LOAD_MORE:"watch_sections_load_more",WATCH_DISCOVER_SCROLL:"watch_discover_scroll",WATCH_CAROUSEL_LEFT_SCROLL:"watch_carousel_left_scroll",WATCH_CAROUSEL_RIGHT_SCROLL:"watch_carousel_right_scroll",VIDEO_STALL:"video_stall",VIDEO_PSR:"video_psr",EVENT:"Event",DAIQUERY_INTERACTIVE_QUERY:"daiquery_interactive_query",TASKS_INITIAL_PAGE_LOAD:"tasks_initial_page_load",DO_NOT_USE_JUST_FOR_TESTING:"__test_interaction",PIXELCLOUD_VIEW_PERFORMANCE:"pixelcloud_view_performance"})}),null);
__d("MainThreadPerformanceMonitorActionEntry",["ArtilleryInteractionTraceName","FeedQuickLogModule","MainThreadPerformanceTypedLogger","QuickPerformanceLogger","TimeSliceInteraction","performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(c,d,e){this.$4=0,this.$5=0,this.$7=0,this.$2=c,this.$10=e,this.$8=b("performanceNow")(),this.$6=new Set(d),this.$9=b("TimeSliceInteraction").create(b("ArtilleryInteractionTraceName").MAIN_THREAD_PERFORMANCE),this.$9.trace().addStringAnnotation("action",this.$2),this.$3=a.$1++,b("QuickPerformanceLogger").markerStart(b("FeedQuickLogModule").MAIN_THREAD_PERFORMANCE,this.$3),b("QuickPerformanceLogger").annotateMarkerString(b("FeedQuickLogModule").MAIN_THREAD_PERFORMANCE,"ACTION",c,this.$3),b("QuickPerformanceLogger").setSampleRateForInstance(b("FeedQuickLogModule").MAIN_THREAD_PERFORMANCE,e,this.$3)}var c=a.prototype;c.addLargeFrameDrops=function(a){if(a<=0)return this;this.$4+=a;this.$9.inform("large_frame_drop",{pointGroup:"large_frame_drops"}).addStringAnnotation("quantity",a.toString());return this};c.addFrameDrops=function(a){if(a<=0)return this;this.$5=Math.max(this.$5,a);this.$7+=a;return this};c.addParallelAction=function(a){this.$6.add(a);return this};c.log=function(){__p&&__p();if(this.$7>0){var a=b("performanceNow")()-this.$8;new(b("MainThreadPerformanceTypedLogger"))().setFrameDrops(this.$7).setLargeFrameDrops(this.$4).setMaxFrameDrops(this.$5).setAction(this.$2).setEventDurationMs(Math.round(a)).setParallelActions(this.$6).setArtilleryTraceID(this.$9.getTraceID()).setSampleRate(this.$10).log()}a=Array.from(this.$6);this.$4>0&&(this.$9.trace().addSetAnnotation("parallel_actions",a),this.$9.finish());b("QuickPerformanceLogger").annotateMarkerStringArray(b("FeedQuickLogModule").MAIN_THREAD_PERFORMANCE,"PARALLEL_ACTIONS",a,this.$3);b("QuickPerformanceLogger").annotateMarkerDouble(b("FeedQuickLogModule").MAIN_THREAD_PERFORMANCE,"LARGE_FRAME_DROPS",this.$4,this.$3);b("QuickPerformanceLogger").annotateMarkerDouble(b("FeedQuickLogModule").MAIN_THREAD_PERFORMANCE,"FRAME_DROPS",this.$7,this.$3);b("QuickPerformanceLogger").markerEnd(b("FeedQuickLogModule").MAIN_THREAD_PERFORMANCE,"SUCCESS",this.$3)};return a}();a.$1=0;e.exports=a}),null);
__d("MainThreadPerformanceMonitor",["MainThreadPerformanceMonitorActionEntry","MainThreadPerformanceMonitorConfig","Random","Run","SubscriptionsHandler","Visibility","clearTimeout","gkx","requestAnimationFrame","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MainThreadPerformanceMonitorConfig").actionMaxDuration||12e4,h=1,i=4;a=60;var j=1e3/a,k=j*60,l=new Map(),m={},n,o,p=new(b("SubscriptionsHandler"))();function q(){p&&p.release(),u(),l.clear()}function r(){t(),p.addSubscriptions(b("Run").onLeave(q),b("Visibility").addListener(b("Visibility").VISIBLE,function(){return t()}),b("Visibility").addListener(b("Visibility").HIDDEN,function(){return u()}))}function s(a){__p&&__p();if(o){var c=a-o;if(c<k){c=Math.max(Math.round(c/j)-1,0);var d=c>=h?c/h:0,e=c>=i?c/i:0;l.forEach(function(a){return a.addFrameDrops(d).addLargeFrameDrops(e)})}}o=a;n=b("requestAnimationFrame")(s)}function t(){n||(o=0,n=b("requestAnimationFrame")(s))}function u(){cancelAnimationFrame(n),n=null}c={isEnabled:function(){return b("gkx")("678737")},start:function(a){__p&&__p();var c=this;if(l.has(a))return!0;if(!this.isEnabled())return!1;l.forEach(function(b){return b.addParallelAction(a)});var d=b("MainThreadPerformanceMonitorConfig").actionSamplingRates[a]||0;if(!b("Random").coinflip(d))return!1;l.size===0&&r();l.set(a,new(b("MainThreadPerformanceMonitorActionEntry"))(a,l.keys(),d));m[a]=b("setTimeout")(function(){return c.stop(a)},g);return!0},stop:function(a){__p&&__p();if(!this.isEnabled())return;var c=l.get(a);if(!c)return;c.log();l["delete"](a);b("clearTimeout")(m[a]);delete m[a];l.size===0&&q()}};e.exports=c}),null);
__d("getEditorStateFromUFI2ComposerState",["CompositeDraftDecorator","ContentState","EditorState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.inputState;switch(c.__type){case"plain-text":var d=c.selectionOffsets,e=c.text;e=b("ContentState").createFromText(e.replace(/\n\n$/,"\n"));var f=b("EditorState").createWithContent(e);if(d){var g,h,i,j=e.getFirstBlock(),k=0;while(j){var l=j.getKey(),m=j.getLength(),n=k;k+=m;k>=d.start&&d.start-n>=0&&(g={key:l,offset:d.start-n});k>=d.end&&d.end-n>=0&&(h={key:l,offset:d.end-n});i==null&&(h&&!g?i=!0:g&&!h?i=!1:h&&g&&(i=g.offset>h.offset));j=e.getBlockAfter(l)}if(g&&h){m=f.getSelection().merge({anchorKey:g.key,anchorOffset:g.offset,focusKey:h.key,focusOffset:h.offset,isBackward:!!i});f=b("EditorState").forceSelection(f,m)}}return f;case"editor-state-based":default:return a.inputDecorators.length>0?b("EditorState").set(c.editorState,{decorator:new(b("CompositeDraftDecorator"))(a.inputDecorators)}):c.editorState}}e.exports=a}),null);
__d("UFI2RichComposerInput.react",["cx","DraftEditor.react","Keys","React","getDefaultKeyBinding","getEditorStateFromUFI2ComposerState","isSoftNewlineEvent","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("Keys").RETURN;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){d.props.onComposerStateChange(function(b){return babelHelpers["extends"]({},b,{inputState:b.inputState.__type==="editor-state-based"?babelHelpers["extends"]({},b.inputState,{editorState:a}):{__type:"editor-state-based",editorState:a}})})},d.$2=function(a,b){return d.props.handleBeforeInput?d.props.handleBeforeInput(a,b):"not-handled"},d.$3=function(a,b){if(d.props.handleKeyCommand&&d.props.handleKeyCommand(a,b)==="handled")return"handled";if(a==="ufi-commit"){d.props.onCommit();return"handled"}return"not-handled"},d.$4=function(a){if(d.props.keyBindingFn){var c=d.props.keyBindingFn(a);if(c!=null)return c}return a.keyCode===h&&!b("isSoftNewlineEvent")(a)?"ufi-commit":b("getDefaultKeyBinding")(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.execCommand=function(a){this.props.handleCommand&&this.props.handleCommand(a)};d.render=function(){return b("React").createElement("div",{className:b("joinClasses")((this.props.composerState.isLocked?"_3d2p":"")+" _3d2q",this.props.className),onClick:this.props.onClick},b("React").createElement(b("DraftEditor.react"),{editorState:b("getEditorStateFromUFI2ComposerState")(this.props.composerState),handleBeforeInput:this.$2,handleKeyCommand:this.$3,handlePastedFiles:this.props.handlePastedFiles,keyBindingFn:this.$4,onBlur:this.props.onBlur,onChange:this.$1,onFocus:this.props.onFocus,placeholder:String(this.props.placeholder),readOnly:this.props.composerState.isLocked,ref:this.props.onInputRefUpdated,spellCheck:!0,stripPastedStyles:!0,webDriverTestID:this.props.webDriverTestID}))};return c}(b("React").Component);e.exports=a}),null);
__d("installUFI2ComposerInputDecorators",[],(function(a,b,c,d,e,f){"use strict";function a(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return babelHelpers["extends"]({},a,{inputDecorators:[].concat(a.inputDecorators,c)})}e.exports=a}),null);
__d("removeEmojiFromEditorState",["keyCommandBackspaceEmoji","keyCommandDeleteEmoji"],(function(a,b,c,d,e,f){"use strict";function a(a,c){switch(a){case"backspace":return b("keyCommandBackspaceEmoji")(c)||c;case"delete":return b("keyCommandDeleteEmoji")(c)||c;default:return c}}e.exports=a}),null);
__d("getUpgradedUFI2EmojiComposerPlugin",["EmojiRenderer","EmojiSpan.react","installUFI2ComposerInputDecorators","removeEmojiFromEditorState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c={component:b("EmojiSpan.react"),props:a,strategy:function(a,c){b("EmojiRenderer").parse(a.getText()).forEach(function(a){var b=a.length;a=a.offset;c(a,a+b)})}};return{handleKeyCommand:function(a,c,d){__p&&__p();var e=a.composerState.inputState;if(e.__type==="editor-state-based"){var f;switch(c){case"backspace":f="backspace";break;case"delete":f="delete";break}if(f){var g=b("removeEmojiFromEditorState")(f,d);if(e.editorState!==g){a.onComposerStateChange(function(a){return babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},e,{editorState:g})})});return"handled"}}}return a.handleKeyCommand?a.handleKeyCommand(c,d):"not-handled"},installEmojiInputDecorator:function(a){return b("installUFI2ComposerInputDecorators")(a,c)}}}e.exports=a}),null);
__d("replaceEmoticonsWithEntitiesInEditorState",["invariant","CharacterMetadata","DraftEntity","EditorState","EmoticonsList","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").List;function a(a){__p&&__p();var c=a.getSelection();if(!c.isCollapsed())return a;var d=c.getAnchorKey(),e=a.getCurrentContent(),f=e.getBlockMap().reduce(function(a,e){__p&&__p();var f=e.getText(),i=f.split(b("EmoticonsList").regexp);if(i.length===1)return a;var j=i.splice(0,1).join(""),k=[];while(i.length){var l=i.splice(0,2);if(i.length<2&&l[0].length+(l[1]?l[1].length:0)===0)continue;l.length===2||g(0,5882,l.join(", "));k.push(l)}var m=e.getKey()===d,n=j.length,o=e.getCharacterList(),p=f;k.forEach(function(d,f){__p&&__p();var g=d[0],i=d[1];if(!b("EmoticonsList").emotes[i]||e===a.getLastBlock()&&f===k.length-1||m&&c.anchorOffset>=n+g.length&&c.anchorOffset<=n+g.length+i.length||function(){for(var a=0;a<i.length;a++)if(e.getEntityAt(n+g.length+a)!=null)return!0;return!1}())n+=d[0].length+d[1].length;else{f=b("DraftEntity").create("EMOTICON","IMMUTABLE",{originalEmoticon:i,type:b("EmoticonsList").emotes[i]});d=n+g.length;p=p.slice(0,d)+"\u3000"+p.slice(d+i.length);o=o.slice(0,d).concat(h.of(b("CharacterMetadata").applyEntity(o.get(d),f)),o.slice(d+i.length));n=d+1}});if(f!==p){l=e.merge({characterList:o,text:p});var q;if(m){i=c.getAnchorOffset()-(e.getLength()-l.getLength());q={selectionAfter:c.merge({anchorOffset:i,focusOffset:i}),selectionBefore:c}}return a.merge(babelHelpers["extends"]({blockMap:a.getBlockMap().set(e.getKey(),l)},q))}return a},e);if(f===e)return a;else return b("EditorState").push(a,f,"insert-characters")}e.exports=a}),null);
__d("getUpgradedUFI2EmoticonsComposerPlugin",["DraftEntity","EmoticonSpan.react","React","getEntityMatcher","installUFI2ComposerInputDecorators","replaceEmoticonsWithEntitiesInEditorState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){a.inputProps.onComposerStateChange(function(a){a=babelHelpers["extends"]({},a,c(a));var d=a.inputState;switch(d.__type){case"editor-state-based":var e=b("replaceEmoticonsWithEntitiesInEditorState")(d.editorState);if(e!==d.editorState)return babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},d,{editorState:e})});else return a;default:return a}})}function a(a){__p&&__p();var c={component:b("EmoticonSpan.react"),props:a,strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOTICON"})};return{installPlugin:function(a){__p&&__p();a.onInstallContentBlockToTextWithEntitiesInputMessageMappers(function(a,c,d){__p&&__p();d=a.getEntityAt(c);if(d==null)return null;a=b("DraftEntity").get(d);if(a.getType()==="EMOTICON"){c=a.getData();d=c.originalEmoticon;return{message:{text:d}}}return null})},render:function(a,d){a.subscriptionsHandler;var e=babelHelpers.objectWithoutPropertiesLoose(a,["subscriptionsHandler"]);return b("React").createElement(d,babelHelpers["extends"]({},e,{inputProps:babelHelpers["extends"]({},e.inputProps,{composerState:b("installUFI2ComposerInputDecorators")(e.inputProps.composerState,c),onComposerStateChange:function(b){return g(a,b)}})}))}}}e.exports=a}),null);
__d("getUpgradedUFI2HashtagComposerPlugin",["HashtagSpan.react","getHashtagMatches","installUFI2ComposerInputDecorators"],(function(a,b,c,d,e,f){"use strict";function a(){var a={component:b("HashtagSpan.react"),props:{},strategy:b("getHashtagMatches")};return{installHashtagInputDecorator:function(c){return b("installUFI2ComposerInputDecorators")(c,a)}}}e.exports=a}),null);
__d("getUpgradedUFI2PrefillMentionComposerPlugin",["ContentState","EditorState","FBLogger","SelectionState","createMentionEntityForContentState","getPlainTextFromUFI2InputState","replaceSelectionWithMention"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){__p&&__p();var d=a.inputState;switch(d.__type){case"editor-state-based":var e=b("getPlainTextFromUFI2InputState")(d),f=d.editorState;if(e.trim()===""){e===""&&(f=b("EditorState").moveSelectionToEnd(b("EditorState").createWithContent(b("ContentState").createFromText(" "))));e=f.getSelection();f=b("replaceSelectionWithMention")(c,f,b("SelectionState").createEmpty(f.getCurrentContent().getFirstBlock().getKey()),b("createMentionEntityForContentState"));c=e.getStartOffset()+c.getTitle().length;f=b("EditorState").forceSelection(f,e.merge({anchorOffset:c,focusOffset:c}));return babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},d,{editorState:f})})}else return null;case"plain-text":d.text.trim()===""&&b("FBLogger")("ufi2").warn("Someone called for the composer to be prefilled with a mention but the composer state was of the `plain-text` type. Adding mentions to a plain-text composer is not yet implemented (T29402486).");return null;default:return d.__type}}function a(){return{handleCommand:function(a,b){a.__type==="PrefillMention"&&b.onComposerStateChange(function(b){return g(b,a.mentionableEntity)}),b.handleCommand&&b.handleCommand(a)}}}e.exports=a}),null);
__d("MainThreadPerformanceLoggerActions",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SCROLL:"scroll",TAIL_LOAD:"tail_load"})}),null);