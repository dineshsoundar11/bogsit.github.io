if (self.CavalryLogger) { CavalryLogger.start_js(["EOMM2"]); }

__d("PresmaUsageTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:PresmaUsageLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:PresmaUsageLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PresmaUsageLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setBusinessID=function(a){this.$1.business_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setUsageEvent=function(a){this.$1.usage_event=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={business_id:!0,time:!0,usage_event:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("PresenceAccountIntagramDialog",["cx","CSS","DialogX","LayerDestroyOnHide","LayerFadeOnHide","LayerFadeOnShow","LayerHideOnEscape","LayerRefocusOnHide"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=485;a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){return a.call(this,{width:h,xui:!0,addedBehaviors:[b("LayerDestroyOnHide"),b("LayerFadeOnShow"),b("LayerFadeOnHide"),b("LayerHideOnEscape"),b("LayerRefocusOnHide")]},c)||this}var d=c.prototype;d.getContentRoot=function(){var c=a.prototype.getContentRoot.call(this);b("CSS").addClass(c,"_3acm");return c};return c}(b("DialogX"));e.exports=a}),null);
__d("XPresenceAccountInstagramAuthenticateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/presence/instagram/authenticate/",{})}),null);
__d("XPresenceAccountInstagramConnectionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/presence/instagram/connect/",{})}),null);
__d("XPresenceAccountInstagramCreateAndConnectController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/presence/instagram/create_connect/",{})}),null);
__d("PresenceAccountInstagramAuthenticator",["fbt","invariant","AsyncRequest","FacebookAppIDs","PresenceAccountInstagramAuthView.react","PresenceAccountIntagramDialog","React","XPresenceAccountInstagramAuthenticateController","XPresenceAccountInstagramConnectionController","XPresenceAccountInstagramCreateAndConnectController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(){__p&&__p();a.authenticateWithCredential=function(c,d,e,f,g){var h=b("XPresenceAccountInstagramConnectionController").getURIBuilder().getURI();a.$9(h,c,{username:d,password:e},f,g)};a.authenticateAccountWithCredential=function(c,d,e,f,g,h){var i=b("XPresenceAccountInstagramAuthenticateController").getURIBuilder().getURI();a.$9(i,c,{username:d,password:e,should_authenticate_page_linked_ig_biz:h},f,g)};a.authenticateWithAccountCreation=function(c,d,e,f,g,h){var i=b("XPresenceAccountInstagramCreateAndConnectController").getURIBuilder().getURI();a.$9(i,c,{username:d,email:e,phone_number:f},g,h)};a.$9=function(c,d,e,f,g){new(b("AsyncRequest"))().setURI(c).setMethod("POST").setData(Object.assign({owner_id:d,presence_owner_id:d,app_id:b("FacebookAppIDs").FBPAGES},e)).setHandler(function(a){a=a.payload;a&&a.ig_error_message?g(a.ig_error_message):f(a)}).setErrorHandler(function(b){return g(a.getDefaultErrorMessage())}).send()};a.getDefaultErrorMessage=function(){return g._("Sorry, an unknown error occurred. Please try again.")};function a(a,b,c,d){this.$1=a,this.$2=!1,this.$3=b,this.$5=d,this.$4=c}var c=a.prototype;c.authenticate=function(a,b){this.$2&&h(0,1542),this.$7=a,this.$8=b,this.$10()};c.verifyAccess=function(a,b){this.$2&&h(0,1542),this.$7=a,this.$8=b,this.$11()};c.$12=function(){this.$2&&h(0,1542),this.$2=!0,this.$6&&this.$6.hide()};c.$10=function(){var a=this,c=b("React").createElement(b("PresenceAccountInstagramAuthView.react"),{presenceOwnerID:this.$3,onConnected:function(b){a.$7&&a.$7(b),a.$12()},onClose:function(){a.$8&&a.$8("USER_CLOSE_DIALOG"),a.$12()},viewOptions:"signIn"});this.$6=new(b("PresenceAccountIntagramDialog"))(c);this.$6.show()};c.$11=function(){var a=this,c=b("React").createElement(b("PresenceAccountInstagramAuthView.react"),{presenceOwnerID:this.$3,onConnected:function(b){a.$7&&a.$7(b),a.$12()},onClose:function(){a.$8&&a.$8("USER_CLOSE_DIALOG"),a.$12()},viewOptions:"authenticate",entryPoint:this.$5==="pages_composer"?"pages_composer":null,username:this.$4});this.$6=new(b("PresenceAccountIntagramDialog"))(c);this.$6.show()};return a}();e.exports=a}),null);
__d("PresmaUsageEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LINK_ACCOUNT:"link_account",UNLINK_ACCOUNT:"unlink_account",IG_UPDATE_PROFILE_IMAGE:"ig_update_profile_image",IG_UPDATE_PROFILE_DATA:"ig_update_profile_data",IG_CONNECT_VIEW_LOADED:"ig_connect_view_loaded",IG_CONNECT_XOUT_CLICKED:"ig_connect_xout_clicked",IG_CONNECT_SEE_DETAILS_CLICKED:"ig_connect_see_details_clicked",IG_SETTING_VIEW_LOADED:"ig_setting_view_loaded",IG_CONNECT_AUTH_CLICKED:"ig_connect_auth_clicked",IG_CONNECT_LOGIN_CLICKED:"ig_connect_login_clicked",IG_CONNECT_SWITCH_TO_LOG_IN:"ig_connect_switch_to_log_in",IG_CONNECT_SWITCH_TO_SIGN_UP:"ig_connect_switch_to_sign_up",IG_CONNECT_SIGN_UP_CLICKED:"ig_connect_sign_up_clicked",IG_CONNECT_CONNECT_BUTTON_CLICKED:"ig_connect_connect_button_clicked",IG_CONNECT_DISCONNECT_BUTTON_CLICKED:"ig_connect_disconnect_button_clicked",IG_CONNECT_OAUTH_CONNECT_CLICKED:"ig_connect_oauth_connect_clicked",IG_CONNECT_OAUTH_WEBVIEW_CANCEL_CLICKED:"ig_connect_oauth_webview_cancel_clicked",MISSING_INSTAGRAM_USER_FOR_V2_ID:"missing_instagram_user_for_v2_id",MISSING_PAGE_FOR_INSTAGRAM_USER:"missing_page_for_instagram_user",ACCEPT_INVITATION:"accept_invitation",ADDED_ROLE:"added_role",ATTEMPT_ADDING_OR_INVITE_ROLE:"attempt_adding_or_invite_role",ATTEMPT_CANCELING_INVITATION:"attempt_canceling_invitation",ATTEMPT_CHANGING_ROLE:"attempt_changing_role",ATTEMPT_DELETING_ROLE:"attempt_deleting_role",CANCELED_INVITATION:"canceled_invitation",CHANGED_ROLE:"changed_role",DECLINE_INVITATION:"decline_invitation",DELETED_ROLE:"deleted_role",FAILED_ADDING_ROLE:"failed_adding_role",FAILED_CANCELING_INVITATION:"failed_canceling_invitation",FAILED_CHANGING_ROLE:"failed_changing_role",FAILED_DELETING_ROLE:"failed_delete_role",FAILED_PERMISSION_CHECK:"failed_permission_check",FAILED_REMOVING_PROXY:"failed_removing_proxy",FAILED_TRANSFERING_SCHEULD_POSTS:"failed_transfering_scheuld_posts",INVITATION_SENT:"invitation_sent",FAILED_ADDING_SPECIAL_ROLE:"failed_adding_special_role",ACCEPT_PROXY_REQUEST:"accept_proxy_request",REJECT_PROXY_REQUEST:"reject_proxy_request",ACCEPT_BUSINESS_REQUEST:"accept_business_request",REJECT_BUSINESS_REQUEST:"recject_business_request",WA_ACCOUNT_CREATION_CALLBACK:"account_creation_callback",WA_REQUEST_WA_REGISTRATION_CODE:"wa_request_wa_registration_code",BUSINESS_PAGE_IG_MISMATCH:"business_page_ig_mismatch",ROLLBACK_BUSINESS_MIGRATION:"rollback_business_migration"})}),null);
__d("PresenceAccountInstagramAuthView.react",["cx","fbt","ix","AbstractButton.react","AbstractTextInput.react","Image.react","Keys","Link.react","PresmaUsageEvents","PresmaUsageTypedLogger","React","ShimButton.react","XUISpinner.react","fbglyph","joinClasses","PresenceAccountInstagramAuthenticator"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$7=function(){new(b("PresmaUsageTypedLogger"))().setUsageEvent(b("PresmaUsageEvents").IG_CONNECT_XOUT_CLICKED).setBusinessID(d.props.presenceOwnerID).log(),d.props.onClose()};d.$8=function(a){var c=d.$9();a.keyCode===b("Keys").RETURN&&!c.isButtonDisabled()&&(c.buttonAction(),new(b("PresmaUsageTypedLogger"))().setUsageEvent(b("PresmaUsageEvents").IG_CONNECT_LOGIN_CLICKED).setBusinessID(d.props.presenceOwnerID).log())};d.$1={signIn:{subtitle:h._("Log in to Instagram so you can connect with more customers right from Facebook"),buttonLabel:h._("Log In"),buttonAction:function(){new(b("PresmaUsageTypedLogger"))().setUsageEvent(b("PresmaUsageEvents").IG_CONNECT_LOGIN_CLICKED).setBusinessID(d.props.presenceOwnerID).log(),d.$2()},isButtonDisabled:function(){return!d.state.username||!d.state.password},renderForm:function(){return d.$3()},promptSectionConfig:{prompt:h._("Don't have an account?"),actionLabel:h._("Sign up"),action:function(){return d.setState({errorMessage:null,mode:"signUp"})}}},signUp:{subtitle:h._("Sign up to see photos and videos from your friends"),buttonLabel:h._("Create Account"),buttonAction:function(){new(b("PresmaUsageTypedLogger"))().setUsageEvent(b("PresmaUsageEvents").IG_CONNECT_SIGN_UP_CLICKED).setBusinessID(d.props.presenceOwnerID).log(),d.$4()},isButtonDisabled:function(){return!d.state.username||!d.state.email||d.state.email!==d.state.reEnterEmail},renderForm:function(){return d.$5()},promptSectionConfig:{prompt:h._("Already have an account?"),actionLabel:h._("Sign in"),action:function(){return d.setState({errorMessage:null,mode:"signIn"})}}},authenticate:{subtitle:d.props.entryPoint==="pages_composer"?h._("To post to Instagram enter the username and password of the Instagram account connected to this Page. Once you connect, admins and editors of this Page will have access to the connected account."):h._("You're about to change the instagram username. Please enter your original username and password to verify your identity."),buttonLabel:d.props.entryPoint==="pages_composer"?h._("Log In"):h._("Verify"),buttonAction:function(){new(b("PresmaUsageTypedLogger"))().setUsageEvent(b("PresmaUsageEvents").IG_CONNECT_AUTH_CLICKED).setBusinessID(d.props.presenceOwnerID).log(),d.$6()},isButtonDisabled:function(){return!d.state.username||!d.state.password},renderForm:function(){return d.$3()},PromptRenderConfig:null}};d.state={username:d.props.username||"",password:"",email:"",reEnterEmail:"",phoneNumber:"",isRequesting:!1,errorMessage:null,mode:d.props.viewOptions};return d}var d=c.prototype;d.$9=function(){if(this.state.mode==="authenticate")return this.$1.authenticate;else if(this.state.mode==="signUp")return this.$1.signUp;else return this.$1.signIn};d.componentDidMount=function(){new(b("PresmaUsageTypedLogger"))().setUsageEvent(b("PresmaUsageEvents").IG_SETTING_VIEW_LOADED).setBusinessID(this.props.presenceOwnerID).log()};d.render=function(){var a=this.$9();a=this.state.isRequesting?this.$10():this.$11(a);return b("React").createElement("div",{className:b("joinClasses")(this.props.className,"_2k3s")},this.$12(),a)};d.$13=function(a){var b=this;return function(c){b.$14(a,c.target.value)}};d.$14=function(a,b){var c={};c[a]=b;this.setState(c)};d.$12=function(){return!this.state.errorMessage?null:b("React").createElement("div",{className:"_53n- _4auv _4auw"},b("React").createElement(b("Image.react"),{src:i("114551")}),b("React").createElement("div",{className:"_3-9a"},this.state.errorMessage))};d.$10=function(){return b("React").createElement("div",{className:"_4aux _4auy"},b("React").createElement("div",{className:"_2k3t _2k3u"},b("React").createElement(b("Image.react"),{src:i("96615"),height:46,width:160}),b("React").createElement("div",{className:"_3-8y"},b("React").createElement(b("XUISpinner.react"),{className:"_4auz",size:"large",background:"dark"}))))};d.$15=function(){return b("React").createElement(b("ShimButton.react"),{className:"_2k3x"+(this.state.isRequesting?" hidden_elem":""),onClick:this.$7},b("React").createElement(b("Image.react"),{src:i("114708")}))};d.$11=function(a){return b("React").createElement("div",{className:"_4au- _4auv _4auy _2k3t"},this.$15(),b("React").createElement(b("Image.react"),{src:i("96615"),height:46,width:160}),b("React").createElement("div",{className:"_2k3y"},a.subtitle),b("React").createElement("div",{className:"_2k3z"}),a.renderForm(),b("React").createElement(b("AbstractButton.react"),{className:"_2k43",onClick:a.buttonAction,label:a.buttonLabel,disabled:a.isButtonDisabled()}),this.$16(a.promptSectionConfig))};d.$5=function(){return b("React").createElement("div",null,b("React").createElement(b("AbstractTextInput.react"),{className:"_2k3- _4au_",placeholder:h._("username"),value:this.state.username,onChange:this.$13("username")}),b("React").createElement(b("AbstractTextInput.react"),{className:"_2k3- _4au_",placeholder:h._("email"),value:this.state.email,onChange:this.$13("email")}),b("React").createElement(b("AbstractTextInput.react"),{className:"_2k3- _4au_",placeholder:h._("re-enter email"),value:this.state.reEnterEmail,onChange:this.$13("reEnterEmail")}),b("React").createElement(b("AbstractTextInput.react"),{className:"_2k3- _4au_",placeholder:h._("phone number (optional)"),value:this.state.phoneNumber,onChange:this.$13("phoneNumber")}))};d.$3=function(){return b("React").createElement("div",null,b("React").createElement(b("AbstractTextInput.react"),{className:"_2k3- _4au_",placeholder:h._("Username"),value:this.state.username,onChange:this.$13("username"),onKeyDown:this.$8}),b("React").createElement(b("AbstractTextInput.react"),{className:"_2k3-",type:"password",placeholder:h._("Password"),value:this.state.password,onChange:this.$13("password"),onKeyDown:this.$8}))};d.$16=function(a){return this.state.mode==="authenticate"?b("React").createElement("div",{className:"_4av0"}):b("React").createElement("div",{className:"_4av0"},b("React").createElement("span",null,a?a.prompt:null),b("React").createElement(b("Link.react"),{onClick:a?a.action:null},a?a.actionLabel:null))};d.$2=function(){var a=this;this.setState({isRequesting:!0,errorMessage:null});b("PresenceAccountInstagramAuthenticator").authenticateWithCredential(this.props.presenceOwnerID,this.state.username,this.state.password,function(b){a.props.onConnected(b),a.setState({isRequesting:!1})},function(b){a.setState({isRequesting:!1,errorMessage:b})})};d.$6=function(){var a=this;this.setState({isRequesting:!0,errorMessage:null});b("PresenceAccountInstagramAuthenticator").authenticateAccountWithCredential(this.props.presenceOwnerID,this.state.username,this.state.password,function(b){a.props.onConnected(b),a.setState({isRequesting:!1})},function(b){a.setState({isRequesting:!1,errorMessage:b})},this.props.entryPoint==="pages_composer")};d.$4=function(){var a=this;this.setState({isRequesting:!0,errorMessage:null});b("PresenceAccountInstagramAuthenticator").authenticateWithAccountCreation(this.props.presenceOwnerID,this.state.username,this.state.email,this.state.phoneNumber,function(b){a.props.onConnected(b),a.setState({isRequesting:!1})},function(b){a.setState({isRequesting:!1,errorMessage:b})})};return c}(b("React").Component);e.exports=a}),null);
__d("XPresenceAccountOAuthUpdateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/presence/account/oauth/update/",{})}),null);
__d("PresenceAccountOAuthAuthenticator",["invariant","AsyncRequest","EventListener","PopupWindow","URI","XPresenceAccountOAuthUpdateController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){__p&&__p();a.informOAuthResult=function(a,b){a.postMessage({oAuthResult:b},window.location.origin)};a.extractResultFromOAuthHash=function(){var a=window.location.hash.substr(1),b=/([^&=]+)=([^&]*)/g,c={},d=null;while(d=b.exec(a))c[decodeURIComponent(d[1])]=decodeURIComponent(d[2]);if(c.error)return{succeeded:!1,error:c.error,payload:null};else return{succeeded:!0,error:null,payload:c}};function a(a,b,c,d,e){this.$1=a,this.$3=c,this.$5=!1,this.$6=b,this.$10=d,this.$11=e}var c=a.prototype;c.authenticate=function(a,c){__p&&__p();var d=this;this.$5&&g(0,1542);this.$2&&g(0,1543);this.$8=a;this.$7=c;a=new(b("URI"))("/presence/oauth/callback").setProtocol("https").setDomain(this.$1.location.hostname);c=new(b("URI"))(this.$3.url).addQueryData(this.$6).addQueryData("redirect_uri",a.toString()).toString();this.$9=b("PopupWindow").open(c,this.$3.height,this.$3.width);this.$2=b("EventListener").listen(this.$1,"message",function(a){return d.$12(a)});this.$4=b("EventListener").listen(this.$9,"beforeunload",function(a){d.$7&&d.$7("DIALOG_CLOSED"),d.$13()})};c.$12=function(a){__p&&__p();var c=this;if(a.origin!==this.$1.location.origin||!a.data.oAuthResult)return;if(a.data.oAuthResult.succeeded){var d=a.data.oAuthResult.payload;d||g(0,1544);var e=b("XPresenceAccountOAuthUpdateController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(e).setMethod("POST").setData({presence_owner_id:this.$10,presence_account_type:this.$11,payload:JSON.stringify(d)}).setHandler(function(a){c.$8&&c.$8(a.payload),c.$13()}).setErrorHandler(function(a){c.$7&&c.$7("UPDATE_ACCOUNT_FAILED"),c.$13()}).send()}else this.$7&&this.$7(a.data.error),this.$13()};c.$13=function(){this.$5&&g(0,1542),this.$2&&this.$2.remove(),this.$2=null,this.$4&&this.$4.remove&&this.$4.remove(),this.$4=null,this.$9&&this.$9.close(),this.$9=null,this.$5=!0};return a}();e.exports=a}),null);
__d("PresenceAccountType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FACEBOOK_PAGE:"page",INSTAGRAM:"instagram",GOOGLE:"google"})}),null);
__d("XPresenceAccountDisconnectController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/presence/account/disconnect/",{})}),null);
__d("XPresenceAccountPayloadFetchController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/presence/account/payload/fetch/",{})}),null);
__d("PresenceAccountUtilities",["invariant","AsyncRequest","FacebookAppIDs","PresenceAccountInstagramAuthenticator","PresenceAccountOAuthAuthenticator","PresenceAccountType","XPresenceAccountDisconnectController","XPresenceAccountPayloadFetchController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={getAuthPayloadAsync:function(a,c,d,e){var f=b("XPresenceAccountPayloadFetchController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(f).setMethod("POST").setData({owner_id:a,presence_account_type:c}).setHandler(function(b){b.payload&&b.payload.authContext||g(0,4304),!b.payload.accountPayload&&d?h.connectToAccountOfType(a,c,b.payload.authContext,e):e(b.payload.accountPayload,null)}).setErrorHandler(function(){e(null,"ACCOUNT_PAYLOAD_FETCH_ERROR")}).send()},connectToAccountOfType:function(a,c,d,e){__p&&__p();switch(c){case b("PresenceAccountType").GOOGLE:new(b("PresenceAccountOAuthAuthenticator"))(window,d.oAuthParams,d.dialogParams,a,c).authenticate(function(a){return e(a,null)},function(a){return e(null,a)});return;case b("PresenceAccountType").INSTAGRAM:new(b("PresenceAccountInstagramAuthenticator"))(window,a).authenticate(function(a){return e(a,null)},function(a){return e(null,a)});return;default:throw new Error("Unsupported account type: "+c)}},disconnectAccountOfType:function(a,c,d,e){var f=b("XPresenceAccountDisconnectController").getURIBuilder().getURI(),g=null;d==b("PresenceAccountType").INSTAGRAM&&(g=b("FacebookAppIDs").FBPAGES);d&&new(b("AsyncRequest"))().setURI(f).setMethod("POST").setData({owner_id:a,presence_account_type:d,app_id:g,page_id:c}).setHandler(function(a){e(a.payload,null)}).setErrorHandler(function(){e(null,"DISCONNECT_FAILURE")}).send()},verifyAccountOfType:function(a,c,d,e,f){switch(d){case b("PresenceAccountType").INSTAGRAM:new(b("PresenceAccountInstagramAuthenticator"))(window,a,c,"pages_composer").verifyAccess(function(a){return f(a,null)},function(a){return f(null,a)});return;default:throw new Error("Unsupported account type: "+d)}}};e.exports=h}),null);